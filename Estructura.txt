CREATE TABLE advartic (
  codartic varchar(16) NOT NULL default '',
  nomartic varchar(40) NOT NULL default '',
  codigoea varchar(13) default NULL,
  codprove int(6) unsigned NOT NULL default '0',
  codfamia smallint(3) unsigned NOT NULL default '0',
  codunida smallint(2) unsigned NOT NULL default '0',
  tipoprod tinyint(1) NOT NULL COMMENT '0=Producto 1=Trabajo 2=Varios',
  codigiva tinyint(1) unsigned NOT NULL default '0',
  preciomp decimal(10,4) default NULL,
  preciouc decimal(10,4) default NULL,
  preciove decimal(10,4) NOT NULL default '0.0000',
  ultfecco date default NULL,
  fecaltas date NOT NULL default '0000-00-00',
  textoven varchar(200) default NULL,
  textocom varchar(200) default NULL,
  ctrstock tinyint(1) unsigned NOT NULL default '0',
  adr varchar(15) default NULL,
  numserie varchar(15) default NULL,
  unicajas smallint(5) unsigned NOT NULL,
  PRIMARY KEY  (codartic),
  KEY fkcodfamia (codfamia),
  KEY fkcodunida (codunida),
  KEY fkcodtipar (tipoprod),
  KEY iartic1 (nomartic),
  KEY iartic3 (codigoea),
  KEY FK_sartic (codprove),
  CONSTRAINT advartic_ibfk_2 FOREIGN KEY (codprove) REFERENCES proveedor (codprove),
  CONSTRAINT advartic_ibfk_3 FOREIGN KEY (codunida) REFERENCES sunida (codunida),
  CONSTRAINT advartic_ibfk_4 FOREIGN KEY (codfamia) REFERENCES advfamia (codfamia) ON UPDATE CASCADE
) ENGINE=InnoDB DEFAULT CHARSET=latin1;     

CREATE TABLE advartic_matactiva (
  codartic varchar(16) NOT NULL,
  codmatact int(6) unsigned NOT NULL,
  cantidad decimal(8,4) unsigned NOT NULL,
  PRIMARY KEY  (codartic,codmatact),
  CONSTRAINT advartic_matactiva_ibfk_1 FOREIGN KEY (codartic) REFERENCES advartic (codartic) ON UPDATE CASCADE
) ENGINE=InnoDB DEFAULT CHARSET=latin1;     

CREATE TABLE advartic_salmac (
  codartic varchar(16) NOT NULL default '0',
  codalmac smallint(3) unsigned NOT NULL default '0',
  canstock decimal(12,3) NOT NULL default '0.000',
  stockmin decimal(12,3) default '0.000',
  puntoped decimal(12,3) default '0.000',
  stockmax decimal(12,3) default '0.000',
  stockinv decimal(12,3) default '0.000',
  fechainv date default NULL,
  horainve datetime default NULL,
  statusin tinyint(1) unsigned NOT NULL default '0',
  PRIMARY KEY  (codartic,codalmac),
  KEY fkcodartic (codartic),
  KEY fkcodalmac (codalmac),
  CONSTRAINT advartic_salmac_ibfk_1 FOREIGN KEY (codartic) REFERENCES advartic (codartic),
  CONSTRAINT advartic_salmac_ibfk_2 FOREIGN KEY (codalmac) REFERENCES salmpr (codalmac)
) ENGINE=InnoDB DEFAULT CHARSET=latin1;     

CREATE TABLE advfacturas (
  codtipom varchar(3) NOT NULL,
  numfactu int(7) unsigned NOT NULL,
  fecfactu date NOT NULL,
  codsocio int(6) unsigned NOT NULL,
  nifsocio varchar(9) NOT NULL,
  nomsocio varchar(40) NOT NULL,
  telsoci1 varchar(10) default NULL,
  dirsocio varchar(35) default NULL,
  pobsocio varchar(30) default NULL,
  prosocio varchar(30) default NULL,
  codpostal varchar(6) default NULL,
  codforpa smallint(3) unsigned NOT NULL,
  observac varchar(200) default NULL,
  baseimp1 decimal(10,2) default NULL,
  baseimp2 decimal(10,2) default NULL,
  baseimp3 decimal(10,2) default NULL,
  impoiva1 decimal(10,2) default NULL,
  impoiva2 decimal(10,2) default NULL,
  impoiva3 decimal(10,2) default NULL,
  imporec1 decimal(10,2) default NULL,
  imporec2 decimal(10,2) default NULL,
  imporec3 decimal(10,2) default NULL,
  codiiva1 smallint(2) default NULL,
  codiiva2 smallint(2) default NULL,
  codiiva3 smallint(2) default NULL,
  porciva1 decimal(4,2) default NULL,
  porciva2 decimal(4,2) default NULL,
  porciva3 decimal(4,2) default NULL,
  porcrec1 decimal(4,2) default NULL,
  porcrec2 decimal(4,2) default NULL,
  porcrec3 decimal(4,2) default NULL,
  brutofac decimal(10,2) default NULL,
  totalfac decimal(10,2) default NULL,
  impreso tinyint(1) NOT NULL,
  intconta tinyint(1) NOT NULL,
  pasaridoc tinyint(1) NOT NULL,
  PRIMARY KEY  (codtipom,numfactu,fecfactu),
  KEY FK_advfacturas (codsocio),
  CONSTRAINT advfacturas_ibfk_1 FOREIGN KEY (codsocio) REFERENCES rsocios (codsocio) ON UPDATE CASCADE
) ENGINE=InnoDB DEFAULT CHARSET=latin1;     

CREATE TABLE advfacturas_lineas (
  codtipom varchar(3) NOT NULL,
  numfactu int(7) unsigned NOT NULL,
  fecfactu date NOT NULL,
  codtipop varchar(3) NOT NULL,
  numparte int(7) unsigned NOT NULL,
  numlinea smallint(3) NOT NULL,
  codalmac smallint(3) unsigned NOT NULL,
  codartic varchar(16) NOT NULL,
  cantidad decimal(8,3) NOT NULL,
  preciove decimal(10,4) NOT NULL,
  dosishab decimal(8,3) default NULL,
  importel decimal(10,2) NOT NULL,
  ampliaci varchar(60) default NULL,
  codigiva smallint(2) NOT NULL,
  PRIMARY KEY  (codtipom,numfactu,fecfactu,codtipop,numparte,numlinea),
  KEY FK_advfacturas_lineas (codalmac),
  KEY FK_advfacturas_lineas1 (codartic,codalmac),
  CONSTRAINT advfacturas_lineas_ibfk_1 FOREIGN KEY (codartic, codalmac) REFERENCES advartic_salmac (codartic, codalmac) ON UPDATE CASCADE,
  CONSTRAINT advfacturas_lineas_ibfk_2 FOREIGN KEY (codtipom, numfactu, fecfactu, codtipop, numparte) REFERENCES advfacturas_partes (codtipom, numfactu, fecfactu, codtipop, numparte) ON UPDATE CASCADE
) ENGINE=InnoDB DEFAULT CHARSET=latin1;     

CREATE TABLE advfacturas_partes (
  codtipom varchar(3) NOT NULL,
  numfactu int(7) unsigned NOT NULL default '0',
  fecfactu date NOT NULL default '0000-00-00',
  codtipop varchar(3) NOT NULL,
  numparte int(7) unsigned NOT NULL default '0',
  fechapar date NOT NULL default '0000-00-00',
  codcampo int(8) unsigned NOT NULL,
  codtrata varchar(4) NOT NULL,
  observac varchar(200) default NULL,
  codcuadrilla int(6) unsigned default NULL,
  nrohombres int(6) default NULL,
  nrohoras decimal(6,2) default NULL,
  litrospre int(6) NOT NULL,
  litrosrea int(6) NOT NULL,
  PRIMARY KEY  (codtipom,numfactu,fecfactu,codtipop,numparte),
  KEY fk_advfacturas_partes (codtipom,numfactu,fecfactu),
  CONSTRAINT advfacturas_partes_ibfk_1 FOREIGN KEY (codtipom, numfactu, fecfactu) REFERENCES advfacturas (codtipom, numfactu, fecfactu)
) ENGINE=InnoDB DEFAULT CHARSET=latin1 COMMENT='Partes x Factura';     

CREATE TABLE advfacturas_trabajador (
  codtipom varchar(3) NOT NULL,
  numfactu int(7) unsigned NOT NULL,
  fecfactu date NOT NULL,
  codtipop varchar(3) NOT NULL,
  numparte int(7) unsigned NOT NULL,
  numlinea int(6) NOT NULL,
  codtraba int(6) NOT NULL,
  horas decimal(8,2) NOT NULL default '0.00',
  precio decimal(10,4) NOT NULL default '0.0000',
  importel decimal(12,2) NOT NULL default '0.00',
  KEY FK_advfacturas_trabajador (codtraba),
  KEY FK_advfacturas_trabajador1 (codtipom,numfactu,fecfactu,codtipop,numparte),
  CONSTRAINT advfacturas_trabajador_ibfk_1 FOREIGN KEY (codtraba) REFERENCES straba (codtraba) ON UPDATE CASCADE,
  CONSTRAINT advfacturas_trabajador_ibfk_2 FOREIGN KEY (codtipom, numfactu, fecfactu, codtipop, numparte) REFERENCES advfacturas_partes (codtipom, numfactu, fecfactu, codtipop, numparte) ON UPDATE CASCADE
) ENGINE=InnoDB DEFAULT CHARSET=latin1;     

CREATE TABLE advfamia (
  codfamia smallint(4) unsigned NOT NULL default '0',
  nomfamia varchar(25) NOT NULL default '',
  ctaventa varchar(10) NOT NULL default '',
  ctacompr varchar(10) NOT NULL default '',
  aboventa varchar(10) NOT NULL default '',
  abocompr varchar(10) NOT NULL default '',
  codccost char(4) default NULL,
  PRIMARY KEY  (codfamia)
) ENGINE=InnoDB DEFAULT CHARSET=latin1 COMMENT='Familias de Articulos ADV';     

CREATE TABLE advmatactiva (
  codmatact int(6) unsigned NOT NULL,
  nommatact varchar(30) NOT NULL,
  plazoseg int(6) NOT NULL default '0',
  plazoent int(6) NOT NULL default '0',
  PRIMARY KEY  (codmatact)
) ENGINE=InnoDB DEFAULT CHARSET=latin1;     

CREATE TABLE advpartes (
  numparte int(7) unsigned NOT NULL,
  fechapar date NOT NULL,
  codtrata varchar(4) NOT NULL,
  codsocio int(6) unsigned NOT NULL,
  codcampo int(8) unsigned NOT NULL,
  litrospre int(6) NOT NULL default '0',
  litrosrea int(6) NOT NULL default '0',
  factursn tinyint(1) unsigned NOT NULL default '0',
  observac varchar(200) default NULL,
  codcuadrilla int(6) unsigned default NULL,
  nrohombres int(6) default NULL,
  nrohoras decimal(6,2) default NULL,
  PRIMARY KEY  (numparte),
  KEY FK_advpartes (codsocio),
  KEY FK_advpartes1 (codcampo),
  KEY FK_advpartes2 (codtrata),
  KEY FK_advpartes3 (codcuadrilla),
  CONSTRAINT advpartes_ibfk_1 FOREIGN KEY (codsocio) REFERENCES rsocios (codsocio),
  CONSTRAINT advpartes_ibfk_2 FOREIGN KEY (codcampo) REFERENCES rcampos (codcampo),
  CONSTRAINT advpartes_ibfk_3 FOREIGN KEY (codtrata) REFERENCES advtrata (codtrata) ON UPDATE CASCADE,
  CONSTRAINT advpartes_ibfk_4 FOREIGN KEY (codcuadrilla) REFERENCES rcuadrilla (codcuadrilla) ON UPDATE CASCADE
) ENGINE=InnoDB DEFAULT CHARSET=latin1;     

CREATE TABLE advpartes_lineas (
  numparte int(7) unsigned NOT NULL,
  numlinea smallint(2) NOT NULL,
  codalmac smallint(3) unsigned NOT NULL default '0',
  codartic varchar(16) NOT NULL,
  dosishab decimal(8,3) default NULL,
  cantidad decimal(8,3) NOT NULL,
  preciove decimal(10,4) NOT NULL,
  importel decimal(10,2) NOT NULL,
  ampliaci varchar(60) default NULL,
  codigiva smallint(2) NOT NULL,
  PRIMARY KEY  (numparte,numlinea),
  KEY FK_advpartes_lineas1 (codalmac,codartic),
  KEY FK_advpartes_lineas (codartic,codalmac),
  CONSTRAINT advpartes_lineas_ibfk_1 FOREIGN KEY (numparte) REFERENCES advpartes (numparte) ON UPDATE CASCADE,
  CONSTRAINT advpartes_lineas_ibfk_2 FOREIGN KEY (codartic) REFERENCES advartic (codartic) ON UPDATE CASCADE,
  CONSTRAINT advpartes_lineas_ibfk_3 FOREIGN KEY (codartic, codalmac) REFERENCES advartic_salmac (codartic, codalmac) ON UPDATE CASCADE
) ENGINE=InnoDB DEFAULT CHARSET=latin1;     

CREATE TABLE advpartes_trabajador (
  numparte int(7) unsigned NOT NULL,
  numlinea int(6) NOT NULL,
  codtraba int(6) NOT NULL,
  horas decimal(8,2) NOT NULL default '0.00',
  precio decimal(10,4) NOT NULL default '0.0000',
  importel decimal(12,2) NOT NULL default '0.00',
  PRIMARY KEY  (numparte,numlinea),
  KEY FK_advpartes_trabajador1 (numparte),
  KEY FK_advpartes_trabajador2 (codtraba),
  CONSTRAINT advpartes_trabajador_ibfk_1 FOREIGN KEY (numparte) REFERENCES advpartes (numparte) ON UPDATE CASCADE,
  CONSTRAINT advpartes_trabajador_ibfk_2 FOREIGN KEY (codtraba) REFERENCES straba (codtraba) ON UPDATE CASCADE
) ENGINE=InnoDB DEFAULT CHARSET=latin1;     

CREATE TABLE advsmoval (
  codartic varchar(16) NOT NULL default '0',
  codalmac smallint(3) unsigned NOT NULL default '0',
  fechamov date NOT NULL default '0000-00-00',
  horamovi datetime NOT NULL default '0000-00-00 00:00:00',
  tipomovi tinyint(1) unsigned NOT NULL default '0',
  detamovi char(3) NOT NULL default '',
  cantidad decimal(10,3) NOT NULL default '0.000',
  impormov decimal(12,2) NOT NULL default '0.00',
  codigope int(6) unsigned NOT NULL default '0',
  letraser char(1) default NULL,
  document varchar(10) NOT NULL default '0',
  numlinea smallint(5) unsigned NOT NULL default '0',
  codcampo int(8) unsigned NOT NULL default '0',
  KEY fkCodArtic (codartic),
  KEY fkCodAlmac (codartic,codalmac),
  KEY fkDetaMovi (detamovi),
  KEY FK_advsmoval (codcampo),
  CONSTRAINT advsmoval_ibfk_1 FOREIGN KEY (codartic) REFERENCES advartic (codartic),
  CONSTRAINT advsmoval_ibfk_2 FOREIGN KEY (codartic, codalmac) REFERENCES advartic_salmac (codartic, codalmac),
  CONSTRAINT advsmoval_ibfk_3 FOREIGN KEY (codcampo) REFERENCES rcampos (codcampo) ON UPDATE CASCADE
) ENGINE=InnoDB DEFAULT CHARSET=latin1 COMMENT='Movimientos Articulos ADV';     

CREATE TABLE advtrata (
  codtrata varchar(4) NOT NULL,
  nomtrata varchar(30) NOT NULL,
  fechaini date default NULL,
  fechafin date default NULL,
  observac varchar(250) default NULL,
  tipoprecio tinyint(1) NOT NULL default '0' COMMENT '0=cantidad 1=bulto',
  PRIMARY KEY  (codtrata)
) ENGINE=InnoDB DEFAULT CHARSET=latin1;     

CREATE TABLE advtrata_lineas (
  codtrata varchar(4) NOT NULL,
  numlinea smallint(2) unsigned NOT NULL,
  codartic varchar(16) NOT NULL,
  dosishab decimal(8,3) default NULL,
  cantidad decimal(8,3) default NULL,
  PRIMARY KEY  (codtrata,numlinea),
  KEY FK_advlintra (codartic),
  CONSTRAINT advtrata_lineas_ibfk_1 FOREIGN KEY (codartic) REFERENCES advartic (codartic),
  CONSTRAINT advtrata_lineas_ibfk_2 FOREIGN KEY (codtrata) REFERENCES advtrata (codtrata) ON UPDATE CASCADE
) ENGINE=InnoDB DEFAULT CHARSET=latin1;     

CREATE TABLE agencias (
  codtrans smallint(3) unsigned NOT NULL default '0',
  nomtrans varchar(40) NOT NULL default '0',
  domtrans varchar(35) default '0',
  codpobla varchar(6) default '0',
  pobtrans varchar(30) default '0',
  protrans varchar(30) default '0',
  ciftrans varchar(9) NOT NULL default '0',
  wwwtrans varchar(40) default '0',
  teltrans varchar(10) default '0' COMMENT 'Datos Admin.',
  faxtrans varchar(10) default '0',
  movtrans varchar(10) default '0',
  pertrans varchar(35) default NULL,
  maitrans varchar(40) default '0',
  teltrans1 varchar(10) default '0' COMMENT 'Datos Comercial',
  faxtrans1 varchar(10) default '0',
  movtrans1 varchar(10) default '0',
  pertrans1 varchar(35) default NULL,
  maitrans1 varchar(40) default '0',
  obstrans varchar(250) default NULL,
  codforpa smallint(3) unsigned NOT NULL,
  codbanpr smallint(5) unsigned NOT NULL,
  iban varchar(4) default NULL,
  codbanco smallint(5) unsigned default NULL,
  codsucur smallint(5) unsigned default NULL,
  digcontr char(2) default NULL,
  cuentaba varchar(10) default NULL,
  codmacta varchar(10) default NULL,
  porcereten decimal(4,2) default NULL,
  tipo tinyint(1) NOT NULL default '0' COMMENT '0=Transportista 1=Comisionista',
  PRIMARY KEY  (codtrans)
) ENGINE=InnoDB DEFAULT CHARSET=latin1 COMMENT='Agencias Transporte';     

CREATE TABLE albaran (
  numalbar int(6) unsigned NOT NULL,
  fechaalb date NOT NULL,
  codclien int(6) unsigned NOT NULL,
  coddesti smallint(3) unsigned NOT NULL,
  codtrans smallint(3) unsigned NOT NULL,
  matriveh varchar(12) default NULL,
  matrirem varchar(12) default NULL,
  refclien varchar(12) default NULL,
  codtimer smallint(3) unsigned NOT NULL,
  totpalet int(3) default NULL,
  portespre decimal(8,2) default NULL,
  nrocontra varchar(15) default NULL,
  nroactas smallint(4) default NULL,
  numpedid int(6) default NULL,
  fechaped date default NULL,
  observac varchar(200) default NULL,
  pasaridoc tinyint(1) NOT NULL COMMENT 'Pasado a ARIDOC',
  codalmac smallint(3) unsigned NOT NULL,
  portespag decimal(8,2) default NULL,
  paletspag int(3) default NULL,
  numerocmr int(7) default NULL,
  comisionespre decimal(8,2) default NULL,
  comisionespag decimal(8,2) default NULL,
  codcomis smallint(3) unsigned default NULL,
  codsocio int(6) unsigned default NULL,
  airline varchar(30) default NULL,
  AWB varchar(30) default NULL,
  flight1 varchar(30) default NULL,
  flight2 varchar(30) default NULL,
  airorigin varchar(30) default NULL,
  airdestiny varchar(30) default NULL,
  ETD varchar(20) default NULL,
  ETA varchar(20) default NULL,
  PRIMARY KEY  (numalbar),
  KEY FK_albaran (codclien,coddesti),
  KEY FK_albaran1 (codtrans),
  KEY FK_albaran2 (codtimer),
  KEY FK_albaran3 (codalmac),
  KEY FK_albaran4 (codcomis),
  KEY FK_albaran5 (codsocio),
  CONSTRAINT albaran_ibfk_1 FOREIGN KEY (codclien, coddesti) REFERENCES destinos (codclien, coddesti) ON UPDATE CASCADE,
  CONSTRAINT albaran_ibfk_2 FOREIGN KEY (codtrans) REFERENCES agencias (codtrans) ON UPDATE CASCADE,
  CONSTRAINT albaran_ibfk_3 FOREIGN KEY (codtimer) REFERENCES tipomer (codtimer) ON UPDATE CASCADE,
  CONSTRAINT albaran_ibfk_4 FOREIGN KEY (codalmac) REFERENCES salmpr (codalmac) ON UPDATE CASCADE,
  CONSTRAINT albaran_ibfk_5 FOREIGN KEY (codcomis) REFERENCES agencias (codtrans) ON UPDATE CASCADE,
  CONSTRAINT albaran_ibfk_6 FOREIGN KEY (codsocio) REFERENCES rsocios (codsocio) ON UPDATE CASCADE
) ENGINE=InnoDB DEFAULT CHARSET=latin1;     

CREATE TABLE albaran_calibre (
  numalbar int(6) unsigned NOT NULL,
  numlinea smallint(2) unsigned NOT NULL,
  numline1 smallint(2) unsigned NOT NULL,
  codvarie int(6) unsigned NOT NULL,
  codcalib smallint(2) unsigned NOT NULL,
  numcajas int(4) default NULL,
  pesobrut int(6) default NULL,
  pesoneto int(6) NOT NULL,
  unidades int(4) default NULL,
  preciopro decimal(6,4) default NULL,
  PRIMARY KEY  (numalbar,numlinea,numline1),
  KEY FK_pedidos_calibre (codvarie,codcalib),
  CONSTRAINT albaran_calibre_ibfk_1 FOREIGN KEY (numalbar, numlinea) REFERENCES albaran_variedad (numalbar, numlinea),
  CONSTRAINT albaran_calibre_ibfk_2 FOREIGN KEY (codvarie) REFERENCES variedades (codvarie),
  CONSTRAINT albaran_calibre_ibfk_3 FOREIGN KEY (codvarie, codcalib) REFERENCES calibres (codvarie, codcalib)
) ENGINE=InnoDB DEFAULT CHARSET=latin1;     

CREATE TABLE albaran_costes (
  numalbar int(6) unsigned NOT NULL,
  numlinea smallint(2) unsigned NOT NULL,
  tipogasto tinyint(1) unsigned NOT NULL COMMENT '0=Costes 1=Mat. 2=Portes  3=Comisiones  4=Paletización',
  codcoste smallint(2) default NULL,
  impcoste decimal(10,4) NOT NULL,
  importes decimal(8,4) NOT NULL,
  unidades int(6) NOT NULL,
  codartic varchar(16) default NULL,
  KEY FK_albaran_costes (codcoste),
  KEY FK_albaran_costes4 (codartic),
  KEY albaran_costes_ibfk_3 (numalbar,numlinea),
  CONSTRAINT albaran_costes_ibfk_1 FOREIGN KEY (codcoste) REFERENCES nombcoste (codcoste),
  CONSTRAINT albaran_costes_ibfk_2 FOREIGN KEY (numalbar) REFERENCES albaran (numalbar),
  CONSTRAINT albaran_costes_ibfk_3 FOREIGN KEY (numalbar, numlinea) REFERENCES albaran_variedad (numalbar, numlinea),
  CONSTRAINT albaran_costes_ibfk_4 FOREIGN KEY (codartic) REFERENCES sartic (codartic) ON UPDATE CASCADE
) ENGINE=InnoDB DEFAULT CHARSET=latin1;     

CREATE TABLE albaran_costreal (
  numalbar int(6) unsigned NOT NULL,
  numlinea smallint(2) unsigned NOT NULL,
  codcoste smallint(2) default NULL,
  impcoste decimal(10,4) NOT NULL,
  KEY FK_albaran_costreal (codcoste),
  KEY albaran_costreal_ibfk_3 (numalbar,numlinea),
  CONSTRAINT albaran_costreal_ibfk_1 FOREIGN KEY (codcoste) REFERENCES nombcoste (codcoste),
  CONSTRAINT albaran_costreal_ibfk_2 FOREIGN KEY (numalbar) REFERENCES albaran (numalbar),
  CONSTRAINT albaran_costreal_ibfk_3 FOREIGN KEY (numalbar, numlinea) REFERENCES albaran_variedad (numalbar, numlinea)
) ENGINE=InnoDB DEFAULT CHARSET=latin1;     

CREATE TABLE albaran_envase (
  numalbar int(6) unsigned NOT NULL,
  numlinea int(6) unsigned NOT NULL,
  fechamov date NOT NULL,
  codartic varchar(16) NOT NULL,
  tipomovi tinyint(1) NOT NULL,
  cantidad int(3) NOT NULL,
  codclien int(6) unsigned NOT NULL,
  impfianza decimal(10,2) NOT NULL default '0.00',
  PRIMARY KEY  (numalbar,numlinea),
  KEY FK_albaran_envase (codartic),
  KEY FK_albaran_envase3 (codclien),
  CONSTRAINT albaran_envase_ibfk_2 FOREIGN KEY (codartic) REFERENCES sartic (codartic),
  CONSTRAINT albaran_envase_ibfk_3 FOREIGN KEY (codclien) REFERENCES clientes (codclien) ON UPDATE CASCADE
) ENGINE=InnoDB DEFAULT CHARSET=latin1;     

CREATE TABLE albaran_palets (
  numalbar int(6) unsigned NOT NULL,
  numlinea smallint(2) unsigned NOT NULL,
  numpalet int(6) unsigned NOT NULL,
  PRIMARY KEY  (numalbar,numlinea),
  KEY FK_albaran_palets (numpalet),
  CONSTRAINT albaran_palets_ibfk_1 FOREIGN KEY (numalbar) REFERENCES albaran (numalbar),
  CONSTRAINT albaran_palets_ibfk_2 FOREIGN KEY (numpalet) REFERENCES palets (numpalet)
) ENGINE=InnoDB DEFAULT CHARSET=latin1;     

CREATE TABLE albaran_variedad (
  numalbar int(6) unsigned NOT NULL,
  numlinea smallint(2) unsigned NOT NULL,
  codvarie int(6) unsigned NOT NULL,
  codvarco int(6) unsigned NOT NULL,
  codforfait varchar(16) NOT NULL,
  codmarca smallint(3) unsigned NOT NULL,
  categori varchar(3) default NULL,
  totpalet int(3) default NULL,
  numcajas int(4) default NULL,
  pesobrut int(6) default NULL,
  pesoneto int(6) default NULL,
  preciopro decimal(6,4) default NULL,
  preciodef decimal(6,4) default NULL,
  codincid smallint(3) NOT NULL,
  impcomis decimal(6,2) default NULL,
  observac varchar(70) default NULL,
  unidades int(4) default NULL,
  referencia varchar(12) default NULL,
  codpalet smallint(3) unsigned default NULL,
  nrotraza varchar(15) default NULL,
  codtipo smallint(3) unsigned NOT NULL default '0',
  sefactura tinyint(1) NOT NULL default '1',
  codcomis smallint(3) unsigned default NULL,
  nrotraza1 varchar(10) default NULL,
  nrotraza2 varchar(10) default NULL,
  nrotraza3 varchar(10) default NULL,
  nrotraza4 varchar(10) default NULL,
  nrotraza5 varchar(10) default NULL,
  nrotraza6 varchar(10) default NULL,
  PRIMARY KEY  (numalbar,numlinea),
  KEY FK_pedidos_lineas1 (codvarie),
  KEY FK_pedidos_lineas (codvarco),
  KEY FK_pedidos_lineas4 (codforfait),
  KEY FK_pedidos_lineas5 (codmarca),
  KEY FK_albaran_variedad (codincid),
  KEY FK_albaran_variedad7 (codpalet),
  KEY FK_albaran_variedad8 (codtipo),
  CONSTRAINT albaran_variedad_ibfk_1 FOREIGN KEY (numalbar) REFERENCES albaran (numalbar),
  CONSTRAINT albaran_variedad_ibfk_2 FOREIGN KEY (codvarie) REFERENCES variedades (codvarie),
  CONSTRAINT albaran_variedad_ibfk_3 FOREIGN KEY (codvarco) REFERENCES variedades (codvarie),
  CONSTRAINT albaran_variedad_ibfk_4 FOREIGN KEY (codmarca) REFERENCES marcas (codmarca),
  CONSTRAINT albaran_variedad_ibfk_5 FOREIGN KEY (codforfait) REFERENCES forfaits (codforfait),
  CONSTRAINT albaran_variedad_ibfk_6 FOREIGN KEY (codincid) REFERENCES inciden (codincid),
  CONSTRAINT albaran_variedad_ibfk_7 FOREIGN KEY (codpalet) REFERENCES confpale (codpalet) ON UPDATE CASCADE,
  CONSTRAINT albaran_variedad_ibfk_8 FOREIGN KEY (codtipo) REFERENCES tipovarie (codtipo) ON UPDATE CASCADE
) ENGINE=InnoDB DEFAULT CHARSET=latin1;     

CREATE TABLE banpropi (
  codbanpr smallint(5) unsigned NOT NULL default '0',
  nombanpr varchar(30) NOT NULL default '',
  dombanpr varchar(30) default NULL,
  codpopr varchar(5) default NULL,
  pobbanpr varchar(30) default NULL,
  probanpr varchar(30) default NULL,
  telbanpr varchar(10) default NULL,
  faxbanpr varchar(10) default NULL,
  iban varchar(4) NOT NULL default 'ES00',
  codbanco smallint(5) unsigned NOT NULL default '0',
  codsucur smallint(5) unsigned NOT NULL default '0',
  digcontr char(2) NOT NULL default '',
  cuentaba varchar(10) NOT NULL default '',
  sufijoem varchar(3) default NULL,
  codmacta varchar(10) default NULL,
  perbanpr varchar(30) default NULL,
  maibanpr varchar(40) default NULL,
  wwwbanpr varchar(30) default NULL,
  codorden34 varchar(10) default NULL COMMENT 'Codigo Ordenante',
  PRIMARY KEY  (codbanpr)
) ENGINE=InnoDB DEFAULT CHARSET=latin1 COMMENT='Bancos Propios';     

CREATE TABLE cabcostreal (
  codcoste smallint(2) NOT NULL,
  mescoste smallint(2) NOT NULL,
  anocoste int(4) NOT NULL,
  impcostealb decimal(10,2) NOT NULL,
  impcostereal decimal(10,2) NOT NULL,
  impcostecalc decimal(10,2) NOT NULL,
  PRIMARY KEY  (codcoste,mescoste,anocoste),
  CONSTRAINT cabcostreal_ibfk_1 FOREIGN KEY (codcoste) REFERENCES nombcoste (codcoste) ON UPDATE CASCADE
) ENGINE=InnoDB DEFAULT CHARSET=latin1;     

CREATE TABLE cadenas (
  codcaden smallint(3) unsigned NOT NULL default '0',
  nomcaden varchar(30) NOT NULL default '0',
  PRIMARY KEY  (codcaden)
) ENGINE=InnoDB DEFAULT CHARSET=latin1 COMMENT='Cadenas';     

CREATE TABLE calibres (
  codvarie int(6) unsigned NOT NULL default '0',
  codcalib smallint(2) unsigned NOT NULL,
  nomcalib varchar(12) NOT NULL,
  nomcalab varchar(3) NOT NULL,
  calbaneco varchar(10) default NULL,
  PRIMARY KEY  (codvarie,codcalib),
  CONSTRAINT calibres_ibfk_1 FOREIGN KEY (codvarie) REFERENCES variedades (codvarie)
) ENGINE=InnoDB DEFAULT CHARSET=latin1;     

CREATE TABLE capacida (
  codcapac smallint(3) unsigned NOT NULL default '0',
  nomcapac varchar(25) NOT NULL default '0',
  PRIMARY KEY  (codcapac)
) ENGINE=InnoDB DEFAULT CHARSET=latin1 ROW_FORMAT=DYNAMIC COMMENT='Capacidad Envases';     

CREATE TABLE ccareas (
  codarea int(4) unsigned NOT NULL,
  nomarea char(50) default NULL,
  PRIMARY KEY  (codarea)
) ENGINE=InnoDB DEFAULT CHARSET=latin1;     

CREATE TABLE cccabdia (
  fecha datetime NOT NULL,
  codcoste int(4) unsigned NOT NULL,
  observac varchar(250) default NULL,
  PRIMARY KEY  (fecha,codcoste),
  KEY FK_cccabdia (codcoste),
  CONSTRAINT cccabdia_ibfk_1 FOREIGN KEY (codcoste) REFERENCES ccconcostes (codcoste)
) ENGINE=InnoDB DEFAULT CHARSET=latin1;     

CREATE TABLE cccabecera (
  idcontador int(11) unsigned NOT NULL,
  fecha datetime NOT NULL,
  codtraba int(6) unsigned NOT NULL,
  codcoste int(4) unsigned NOT NULL,
  fechaini datetime NOT NULL,
  fechafin datetime NOT NULL,
  codvarie int(6) unsigned NOT NULL,
  kilos int(6) unsigned NOT NULL,
  importe decimal(10,2) NOT NULL,
  costekilo decimal(10,6) NOT NULL,
  importetrab decimal(10,2) unsigned NOT NULL,
  PRIMARY KEY  (idcontador),
  KEY FK_tmpcccabecera (codtraba)
) ENGINE=InnoDB DEFAULT CHARSET=latin1;     

CREATE TABLE cccaborden (
  codorden int(7) unsigned NOT NULL,
  fechaini datetime NOT NULL,
  fechafin datetime default NULL,
  codclien int(6) unsigned default NULL,
  observac varchar(250) default NULL,
  PRIMARY KEY  (codorden),
  KEY FK_cccaborden (codclien),
  CONSTRAINT cccaborden_ibfk_1 FOREIGN KEY (codclien) REFERENCES clientes (codclien) ON UPDATE CASCADE
) ENGINE=InnoDB DEFAULT CHARSET=latin1;     

CREATE TABLE ccconcostes (
  codcoste int(4) unsigned NOT NULL,
  nomcoste varchar(50) NOT NULL,
  codarea int(4) unsigned NOT NULL,
  codincid int(4) unsigned default NULL,
  tipocoste smallint(4) unsigned NOT NULL,
  ctacontable varchar(10) default NULL,
  importe decimal(10,2) default NULL,
  tipokilos tinyint(1) unsigned NOT NULL,
  p1 smallint(3) NOT NULL,
  p2 smallint(3) NOT NULL,
  p3 smallint(3) NOT NULL,
  PRIMARY KEY  (codcoste),
  KEY FK_ccconcostes (codarea),
  CONSTRAINT ccconcostes_ibfk_1 FOREIGN KEY (codarea) REFERENCES ccareas (codarea)
) ENGINE=InnoDB DEFAULT CHARSET=latin1;     

CREATE TABLE ccconcostes_cta (
  codcoste int(4) unsigned NOT NULL,
  numlinea int(4) unsigned NOT NULL,
  ctacontable varchar(10) NOT NULL,
  PRIMARY KEY  (codcoste,numlinea),
  KEY FK_ccconcostes_cta (codcoste),
  CONSTRAINT ccconcostes_cta_ibfk_1 FOREIGN KEY (codcoste) REFERENCES ccconcostes (codcoste)
) ENGINE=InnoDB DEFAULT CHARSET=latin1;     

CREATE TABLE ccconcostes_lin (
  codcoste int(4) unsigned NOT NULL,
  numlinea int(4) unsigned NOT NULL,
  codlinea int(4) unsigned NOT NULL,
  PRIMARY KEY  (codcoste,numlinea),
  KEY FK_ccconcostes_lin (codcoste),
  CONSTRAINT ccconcostes_lin_ibfk_1 FOREIGN KEY (codcoste) REFERENCES ccconcostes (codcoste)
) ENGINE=InnoDB DEFAULT CHARSET=latin1;     

CREATE TABLE ccconcostes_mes (
  codcoste int(4) unsigned NOT NULL,
  mes smallint(2) unsigned NOT NULL,
  año smallint(4) unsigned NOT NULL,
  importeprev decimal(10,2) default NULL,
  importereal decimal(10,2) default NULL,
  tipo tinyint(1) unsigned NOT NULL default '0' COMMENT '0=Gasto 1=Ingreso',
  PRIMARY KEY  (codcoste,mes,año,tipo),
  KEY FK_ccconcostes_mes (codcoste),
  CONSTRAINT ccconcostes_mes_ibfk_1 FOREIGN KEY (codcoste) REFERENCES ccconcostes (codcoste)
) ENGINE=InnoDB DEFAULT CHARSET=latin1;     

CREATE TABLE cchorario (
  codhorario int(4) unsigned NOT NULL,
  descripc varchar(40) NOT NULL,
  PRIMARY KEY  (codhorario),
  KEY FK_cccabdia (codhorario)
) ENGINE=InnoDB DEFAULT CHARSET=latin1;     

CREATE TABLE cchorario_tramo (
  codhorario int(4) unsigned NOT NULL,
  numlinea smallint(4) unsigned NOT NULL,
  fechaini datetime NOT NULL,
  fechafin datetime NOT NULL,
  fechares datetime NOT NULL,
  PRIMARY KEY  (codhorario,numlinea),
  KEY FK_cchorario_tramo (codhorario),
  CONSTRAINT cchorario_tramo_ibfk_1 FOREIGN KEY (codhorario) REFERENCES cchorario (codhorario)
) ENGINE=InnoDB DEFAULT CHARSET=latin1;     

CREATE TABLE ccinforme (
  p1 smallint(3) NOT NULL,
  p2 smallint(3) NOT NULL,
  p3 smallint(3) NOT NULL,
  nombre varchar(50) NOT NULL,
  PRIMARY KEY  (p1,p2,p3)
) ENGINE=InnoDB DEFAULT CHARSET=latin1;     

CREATE TABLE cclinconf (
  codlinconf smallint(2) unsigned NOT NULL,
  nomlinconf varchar(40) NOT NULL,
  PRIMARY KEY  (codlinconf)
) ENGINE=InnoDB DEFAULT CHARSET=latin1;     

CREATE TABLE cclindia1 (
  fecha datetime NOT NULL,
  codcoste int(4) unsigned NOT NULL,
  numlinea smallint(4) unsigned NOT NULL,
  codtraba int(6) NOT NULL,
  fechaini datetime NOT NULL,
  fechafin datetime NOT NULL,
  horas decimal(4,2) NOT NULL,
  PRIMARY KEY  (fecha,codcoste,numlinea),
  KEY FK_cclindia1 (codtraba),
  CONSTRAINT cclindia1_ibfk_1 FOREIGN KEY (fecha, codcoste) REFERENCES cccabdia (fecha, codcoste),
  CONSTRAINT cclindia1_ibfk_2 FOREIGN KEY (codtraba) REFERENCES straba (codtraba)
) ENGINE=InnoDB DEFAULT CHARSET=latin1;     

CREATE TABLE cclindia2 (
  fecha datetime NOT NULL,
  codcoste int(4) unsigned NOT NULL,
  numlinea smallint(4) unsigned NOT NULL,
  codcateg smallint(2) NOT NULL,
  horas decimal(4,2) NOT NULL,
  PRIMARY KEY  (fecha,codcoste,numlinea),
  KEY FK_cclindia2 (codcateg),
  CONSTRAINT cclindia2_ibfk_1 FOREIGN KEY (fecha, codcoste) REFERENCES cccabdia (fecha, codcoste),
  CONSTRAINT cclindia2_ibfk_2 FOREIGN KEY (codcateg) REFERENCES salarios (codcateg)
) ENGINE=InnoDB DEFAULT CHARSET=latin1;     

CREATE TABLE cclineas1 (
  idcontador int(11) NOT NULL,
  idpalet int(11) NOT NULL,
  PRIMARY KEY  (idcontador,idpalet),
  KEY idpalet (idpalet)
) ENGINE=InnoDB DEFAULT CHARSET=latin1;     

CREATE TABLE cclineas2 (
  idcontador int(11) NOT NULL,
  numpalet int(6) unsigned NOT NULL,
  PRIMARY KEY  (idcontador,numpalet),
  KEY numpalet (numpalet)
) ENGINE=InnoDB DEFAULT CHARSET=latin1;     

CREATE TABLE cclineas3 (
  idcontador int(11) unsigned NOT NULL,
  codcoste int(4) unsigned NOT NULL,
  codforfait varchar(16) NOT NULL,
  codvarie int(6) unsigned NOT NULL,
  kilos int(6) unsigned NOT NULL,
  importe decimal(10,2) NOT NULL
) ENGINE=InnoDB DEFAULT CHARSET=latin1;     

CREATE TABLE cclineas4 (
  codforfait varchar(16) NOT NULL,
  codvarie int(6) unsigned NOT NULL,
  kilos int(6) unsigned NOT NULL,
  importe decimal(10,2) NOT NULL
) ENGINE=InnoDB DEFAULT CHARSET=latin1;     

CREATE TABLE cclineas5 (
  codforfait varchar(16) NOT NULL,
  codvarie int(6) unsigned NOT NULL,
  kilos int(6) unsigned NOT NULL,
  importe decimal(10,2) NOT NULL,
  PRIMARY KEY  (codforfait,codvarie)
) ENGINE=InnoDB DEFAULT CHARSET=latin1;     

CREATE TABLE cclineas6 (
  codvarie int(6) unsigned NOT NULL,
  kentrados int(6) unsigned NOT NULL,
  kvolcados int(6) unsigned NOT NULL,
  kconfeccionados int(6) unsigned NOT NULL,
  PRIMARY KEY  (codvarie)
) ENGINE=InnoDB DEFAULT CHARSET=latin1;     

CREATE TABLE cclinorden1 (
  codorden int(7) unsigned NOT NULL,
  numlinea smallint(4) unsigned NOT NULL,
  codtraba int(6) NOT NULL,
  codcoste int(4) unsigned NOT NULL,
  fechaini datetime NOT NULL,
  fechafin datetime NOT NULL,
  horas decimal(4,2) NOT NULL,
  PRIMARY KEY  (codorden,numlinea),
  KEY FK_cclinorden1 (codtraba),
  KEY FK_cclinorden3 (codcoste),
  CONSTRAINT cclinorden1_ibfk_1 FOREIGN KEY (codorden) REFERENCES cccaborden (codorden),
  CONSTRAINT cclinorden1_ibfk_2 FOREIGN KEY (codtraba) REFERENCES straba (codtraba),
  CONSTRAINT cclinorden1_ibfk_3 FOREIGN KEY (codcoste) REFERENCES ccconcostes (codcoste) ON UPDATE CASCADE
) ENGINE=InnoDB DEFAULT CHARSET=latin1;     

CREATE TABLE cclinorden2 (
  codorden int(7) unsigned NOT NULL,
  numlinea smallint(4) unsigned NOT NULL,
  codcoste int(4) unsigned NOT NULL,
  codcateg smallint(2) NOT NULL,
  horas decimal(4,2) NOT NULL,
  PRIMARY KEY  (codorden,numlinea),
  KEY FK_cclinorden1 (codcateg),
  KEY FK_cclinorden2 (codcoste),
  CONSTRAINT cclinorden2_ibfk_1 FOREIGN KEY (codorden) REFERENCES cccaborden (codorden),
  CONSTRAINT cclinorden2_ibfk_2 FOREIGN KEY (codcateg) REFERENCES salarios (codcateg),
  CONSTRAINT cclinorden2_ibfk_3 FOREIGN KEY (codcoste) REFERENCES ccconcostes (codcoste) ON UPDATE CASCADE
) ENGINE=InnoDB DEFAULT CHARSET=latin1;     

CREATE TABLE cclinorden3 (
  codorden int(7) unsigned NOT NULL,
  numlinea smallint(4) unsigned NOT NULL,
  codvarie int(6) unsigned NOT NULL,
  codforfait varchar(16) NOT NULL,
  kilosnet int(6) NOT NULL,
  numcajon int(6) NOT NULL,
  PRIMARY KEY  (codorden,numlinea),
  KEY FK_cclinorden3 (codvarie),
  KEY FK_cclinorden4 (codforfait),
  CONSTRAINT cclinorden3_ibfk_1 FOREIGN KEY (codvarie) REFERENCES variedades (codvarie) ON UPDATE CASCADE,
  CONSTRAINT cclinorden3_ibfk_2 FOREIGN KEY (codforfait) REFERENCES forfaits (codforfait) ON UPDATE CASCADE,
  CONSTRAINT cclinorden3_ibfk_3 FOREIGN KEY (codorden) REFERENCES cccaborden (codorden) ON UPDATE CASCADE
) ENGINE=InnoDB DEFAULT CHARSET=latin1;     

CREATE TABLE cclinorden4 (
  codorden int(7) unsigned NOT NULL,
  numlinea smallint(4) unsigned NOT NULL,
  codforfait varchar(16) NOT NULL,
  kilosnet int(6) NOT NULL,
  numcajon int(6) NOT NULL,
  PRIMARY KEY  (codorden,numlinea),
  KEY FK_cclinorden4 (codforfait),
  CONSTRAINT cclinorden4_ibfk_1 FOREIGN KEY (codorden) REFERENCES cccaborden (codorden) ON UPDATE CASCADE,
  CONSTRAINT cclinorden4_ibfk_2 FOREIGN KEY (codforfait) REFERENCES forfaits (codforfait) ON UPDATE CASCADE
) ENGINE=InnoDB DEFAULT CHARSET=latin1;     

CREATE TABLE cclinorden5 (
  codorden int(7) unsigned NOT NULL,
  numpalet int(6) unsigned NOT NULL,
  PRIMARY KEY  (codorden,numpalet),
  CONSTRAINT cclinorden5_ibfk_1 FOREIGN KEY (codorden) REFERENCES cccaborden (codorden) ON UPDATE CASCADE
) ENGINE=InnoDB DEFAULT CHARSET=latin1;     

CREATE TABLE ccticajes (
  codtraba int(6) default NULL,
  mes int(6) default NULL,
  dia int(6) default NULL,
  hora int(6) default NULL,
  minuto int(6) default NULL,
  actividad int(6) default NULL,
  anyo int(6) default NULL
) ENGINE=InnoDB DEFAULT CHARSET=latin1;     

CREATE TABLE cctipocoste (
  tipocoste smallint(4) unsigned NOT NULL,
  descripcion varchar(20) NOT NULL,
  PRIMARY KEY  (tipocoste)
) ENGINE=InnoDB DEFAULT CHARSET=latin1;     

CREATE TABLE cctrabaconf (
  codtraba int(6) unsigned NOT NULL,
  fechaini datetime NOT NULL,
  fechafin datetime NOT NULL,
  codlinconf smallint(2) unsigned NOT NULL,
  codcoste int(4) unsigned NOT NULL,
  procesado tinyint(1) unsigned NOT NULL default '0',
  sinacabar tinyint(1) NOT NULL default '0',
  PRIMARY KEY  (codtraba,fechaini,fechafin)
) ENGINE=InnoDB DEFAULT CHARSET=latin1;     

CREATE TABLE cczonas (
  codzona smallint(4) unsigned NOT NULL,
  nomzona varchar(30) NOT NULL,
  PRIMARY KEY  (codzona)
) ENGINE=InnoDB DEFAULT CHARSET=latin1;     

CREATE TABLE chivato (
  basedato varchar(4) NOT NULL,
  nomtabla varchar(8) default NULL,
  operacio varchar(1) default NULL,
  fechadia date default NULL,
  separado varchar(1) default NULL,
  claveant varchar(25) default NULL,
  clavenue varchar(25) default NULL,
  nombmemo varchar(1300) default NULL,
  nombmem1 varchar(254) default NULL,
  nombmem2 varchar(254) default NULL,
  horaproc time NOT NULL,
  numorden int(11) NOT NULL,
  nombmem3 varchar(254) default NULL,
  nombmem4 varchar(254) default NULL
) ENGINE=InnoDB DEFAULT CHARSET=latin1;     

CREATE TABLE clases (
  codclase smallint(3) unsigned NOT NULL default '0',
  nomclase varchar(15) NOT NULL default '0',
  PRIMARY KEY  (codclase)
) ENGINE=InnoDB DEFAULT CHARSET=latin1 COMMENT='Clases Variedades';     

CREATE TABLE clientes (
  codclien int(6) unsigned NOT NULL default '0',
  nomclien varchar(40) NOT NULL default '0',
  domclien varchar(35) default '0',
  codpobla varchar(6) default '0',
  pobclien varchar(30) default '0',
  proclien varchar(30) default '0',
  codpaise smallint(3) unsigned default '0',
  wwwclien varchar(40) default NULL,
  cifclien varchar(15) default '0',
  telclie1 varchar(15) default '0',
  faxclie1 varchar(15) default '0',
  movclie1 varchar(10) default '0',
  maiclie1 varchar(40) default NULL,
  perclie1 varchar(35) default '0',
  telclie2 varchar(15) default NULL,
  faxclie2 varchar(15) default NULL,
  movclie2 varchar(10) default NULL,
  maiclie2 varchar(40) default NULL,
  perclie2 varchar(35) default NULL,
  observac varchar(250) default NULL,
  codforpa smallint(3) unsigned NOT NULL default '0',
  tipoiva tinyint(1) NOT NULL default '0' COMMENT '0=Normal 1=Exento 2=Con Recargo Equiv.',
  porccom1 decimal(4,2) default NULL,
  porccom2 decimal(4,2) default NULL,
  tipodtos tinyint(1) unsigned NOT NULL,
  codmacta varchar(10) default NULL,
  cliabono tinyint(1) unsigned NOT NULL default '0',
  tipofact tinyint(1) unsigned NOT NULL default '0' COMMENT '0=Automática  1=Manual',
  codtipom varchar(3) default NULL,
  iban varchar(4) default NULL,
  codbanco smallint(5) unsigned default NULL,
  codsucur smallint(5) unsigned default NULL,
  digcontr char(2) default NULL,
  cuentaba varchar(10) default NULL,
  codigoedi varchar(17) default NULL COMMENT 'Codigo Edi',
  nrocopias smallint(2) unsigned NOT NULL default '1',
  nrodecprec smallint(2) NOT NULL default '4',
  destedi tinyint(1) NOT NULL default '0' COMMENT '0=cliente 1=destino',
  ctrolcobroalb tinyint(1) unsigned NOT NULL default '0' COMMENT '0=NO 1=SI',
  nroseguro varchar(15) default NULL,
  diasasegurados smallint(6) default NULL,
  limiteriesgos decimal(8,2) default NULL,
  domcliencorreo varchar(35) NOT NULL,
  pobcliencorreo varchar(30) NOT NULL,
  procliencorreo varchar(30) default NULL,
  codpoblacorreo varchar(6) NOT NULL,
  codtipalb varchar(3) NOT NULL default 'ALV',
  PRIMARY KEY  (codclien),
  KEY FK_clientes3 (codpaise),
  KEY FK_clientes4 (codforpa),
  KEY FK_clientes (codtipom),
  CONSTRAINT clientes_ibfk_1 FOREIGN KEY (codpaise) REFERENCES paises (codpaise),
  CONSTRAINT clientes_ibfk_2 FOREIGN KEY (codforpa) REFERENCES forpago (codforpa)
) ENGINE=InnoDB DEFAULT CHARSET=latin1 COMMENT='Clientes';     

CREATE TABLE clientes_precio (
  codclien int(6) unsigned NOT NULL,
  codartic varchar(16) NOT NULL,
  precioar decimal(10,4) NOT NULL,
  PRIMARY KEY  (codclien,codartic),
  KEY FK_clientes_precio1 (codartic),
  CONSTRAINT clientes_precio_ibfk_1 FOREIGN KEY (codclien) REFERENCES clientes (codclien) ON UPDATE CASCADE,
  CONSTRAINT clientes_precio_ibfk_2 FOREIGN KEY (codartic) REFERENCES sartic (codartic) ON UPDATE CASCADE
) ENGINE=InnoDB DEFAULT CHARSET=latin1;     

CREATE TABLE codigoean (
  codclien int(6) unsigned NOT NULL,
  codforfait varchar(16) NOT NULL,
  codvarie int(6) unsigned NOT NULL,
  codigoean varchar(13) NOT NULL,
  refclien int(8) default NULL,
  PRIMARY KEY  (codclien,codforfait,codvarie),
  KEY FK_codigoean (codforfait),
  KEY FK_codigoean1 (codvarie),
  CONSTRAINT codigoean_ibfk_1 FOREIGN KEY (codclien) REFERENCES clientes (codclien) ON UPDATE CASCADE,
  CONSTRAINT codigoean_ibfk_2 FOREIGN KEY (codforfait) REFERENCES forfaits (codforfait) ON UPDATE CASCADE,
  CONSTRAINT codigoean_ibfk_3 FOREIGN KEY (codvarie) REFERENCES variedades (codvarie) ON UPDATE CASCADE
) ENGINE=InnoDB DEFAULT CHARSET=latin1;     

CREATE TABLE confenva (
  codtipen smallint(3) unsigned NOT NULL default '0',
  nomtipen varchar(25) NOT NULL default '0',
  pesocaja decimal(5,2) default NULL,
  escaja tinyint(1) NOT NULL default '0',
  numorden smallint(1) default NULL,
  PRIMARY KEY  (codtipen)
) ENGINE=InnoDB DEFAULT CHARSET=latin1 COMMENT='Tipos envase Conf.';     

CREATE TABLE confmedi (
  codmedid smallint(3) unsigned NOT NULL default '0',
  nommedid varchar(25) NOT NULL default '0',
  PRIMARY KEY  (codmedid)
) ENGINE=InnoDB DEFAULT CHARSET=latin1 COMMENT='Medidas Conf.';     

CREATE TABLE confpale (
  codpalet smallint(3) unsigned NOT NULL default '0',
  nompalet varchar(25) NOT NULL default '0',
  pesopale decimal(4,2) default NULL,
  PRIMARY KEY  (codpalet)
) ENGINE=InnoDB DEFAULT CHARSET=latin1 COMMENT='Tipo paletización Conf.';     

CREATE TABLE confpale_envases (
  codpalet smallint(3) unsigned NOT NULL,
  numlinea smallint(2) unsigned NOT NULL,
  codartic varchar(16) NOT NULL COMMENT 'Cod. Articulo',
  cantidad decimal(8,4) unsigned NOT NULL COMMENT 'Cantidad',
  PRIMARY KEY  (codpalet,numlinea),
  KEY FK_confpale_envases (codartic),
  CONSTRAINT confpale_envases_ibfk_1 FOREIGN KEY (codpalet) REFERENCES confpale (codpalet),
  CONSTRAINT confpale_envases_ibfk_2 FOREIGN KEY (codartic) REFERENCES sartic (codartic) ON UPDATE CASCADE
) ENGINE=InnoDB DEFAULT CHARSET=latin1 COMMENT='Lineas de Confeccion de palet';     

CREATE TABLE confpres (
  codprese smallint(3) unsigned NOT NULL default '0',
  nomprese varchar(25) NOT NULL default '0',
  PRIMARY KEY  (codprese)
) ENGINE=InnoDB DEFAULT CHARSET=latin1 COMMENT='Tipos presentación Conf.';     

CREATE TABLE conftipo (
  codtipco smallint(3) unsigned NOT NULL default '0',
  nomtipco varchar(25) NOT NULL default '0',
  PRIMARY KEY  (codtipco)
) ENGINE=InnoDB DEFAULT CHARSET=latin1 COMMENT='Tipos Confeccion';     

CREATE TABLE ctacoste (
  codcoste smallint(2) NOT NULL COMMENT 'Cod.Coste Confección',
  numlinea smallint(2) NOT NULL,
  codmacta varchar(10) NOT NULL,
  PRIMARY KEY  (codcoste,numlinea),
  CONSTRAINT ctacoste_ibfk_1 FOREIGN KEY (codcoste) REFERENCES nombcoste (codcoste) ON UPDATE CASCADE
) ENGINE=InnoDB DEFAULT CHARSET=latin1 ROW_FORMAT=DYNAMIC;     

CREATE TABLE destinos (
  codclien int(6) unsigned NOT NULL default '0',
  coddesti smallint(3) unsigned NOT NULL default '0',
  nomdesti varchar(40) NOT NULL default '0',
  domdesti varchar(35) default '0',
  codpobla varchar(6) default '0',
  pobdesti varchar(30) default '0',
  prodesti varchar(30) default '0',
  codpaise smallint(3) unsigned NOT NULL default '0',
  codtimer smallint(3) unsigned NOT NULL default '0',
  teldesti varchar(10) default '0',
  faxdesti varchar(10) default '0',
  movdesti varchar(10) default '0',
  maidesti varchar(40) default '0',
  perdesti varchar(35) default '0',
  codcajas varchar(10) default NULL,
  codpalet varchar(10) default NULL,
  codcaden smallint(3) unsigned NOT NULL,
  codigoedi varchar(17) default NULL,
  PRIMARY KEY  (codclien,coddesti),
  KEY FK_destinos (codpaise),
  KEY FK_destinos1 (codcaden),
  KEY FK_destinos2 (codclien),
  CONSTRAINT destinos_ibfk_1 FOREIGN KEY (codpaise) REFERENCES paises (codpaise),
  CONSTRAINT destinos_ibfk_2 FOREIGN KEY (codcaden) REFERENCES cadenas (codcaden),
  CONSTRAINT destinos_ibfk_3 FOREIGN KEY (codclien) REFERENCES clientes (codclien)
) ENGINE=InnoDB DEFAULT CHARSET=latin1 COMMENT='Destinos clientes';     

CREATE TABLE empresas (
  codempre tinyint(3) unsigned NOT NULL default '0',
  nomempre char(40) NOT NULL default '',
  domempre char(35) NOT NULL default '',
  codpobla char(6) NOT NULL default '0',
  pobempre char(30) NOT NULL default '',
  proempre char(30) NOT NULL default '',
  cifempre char(9) NOT NULL default '0',
  telempre char(10) default NULL,
  faxempre char(10) default NULL,
  wwwempre char(40) default NULL,
  maiempre char(40) default NULL,
  fechaini date NOT NULL COMMENT 'Fecha inicio campaña',
  fechafin date NOT NULL COMMENT 'fecha final campaña',
  percontacto varchar(40) default NULL,
  PRIMARY KEY  (codempre)
) ENGINE=InnoDB DEFAULT CHARSET=latin1;     

CREATE TABLE facturas (
  codtipom varchar(3) NOT NULL,
  numfactu int(7) unsigned NOT NULL,
  fecfactu date NOT NULL,
  codclien int(6) unsigned NOT NULL,
  codforpa smallint(3) unsigned NOT NULL,
  tipoivac tinyint(1) NOT NULL COMMENT '0=Normal 1=Exento',
  dtocom1 decimal(4,2) default NULL,
  dtocom2 decimal(4,2) default NULL,
  impdtoc decimal(8,2) default NULL,
  observac varchar(200) default NULL,
  baseimp1 decimal(10,2) default NULL,
  baseimp2 decimal(10,2) default NULL,
  baseimp3 decimal(10,2) default NULL,
  impoiva1 decimal(10,2) default NULL,
  impoiva2 decimal(10,2) default NULL,
  impoiva3 decimal(10,2) default NULL,
  imporec1 decimal(10,2) default NULL,
  imporec2 decimal(10,2) default NULL,
  imporec3 decimal(10,2) default NULL,
  codiiva1 smallint(2) default NULL,
  codiiva2 smallint(2) default NULL,
  codiiva3 smallint(2) default NULL,
  porciva1 decimal(4,2) default NULL,
  porciva2 decimal(4,2) default NULL,
  porciva3 decimal(4,2) default NULL,
  porcrec1 decimal(4,2) default NULL,
  porcrec2 decimal(4,2) default NULL,
  porcrec3 decimal(4,2) default NULL,
  brutofac decimal(10,2) default NULL,
  impordto decimal(10,2) default NULL,
  totalfac decimal(10,2) default NULL,
  intconta tinyint(1) NOT NULL,
  pasaridoc tinyint(1) NOT NULL,
  pasedicom tinyint(1) NOT NULL,
  enfacturae tinyint(1) unsigned NOT NULL,
  codvarie int(6) unsigned default NULL,
  codtimer smallint(3) unsigned default NULL,
  PRIMARY KEY  (codtipom,numfactu,fecfactu)
) ENGINE=InnoDB DEFAULT CHARSET=latin1;     

CREATE TABLE facturas_acuenta (
  codtipom varchar(3) NOT NULL,
  numfactu int(7) unsigned NOT NULL,
  fecfactu date NOT NULL,
  codtipomcta varchar(3) NOT NULL,
  numfactucta int(7) unsigned NOT NULL,
  fecfactucta date NOT NULL,
  totalfaccta decimal(11,2) NOT NULL,
  PRIMARY KEY  (codtipom,numfactu,fecfactu,codtipomcta,numfactucta,fecfactucta),
  KEY facturas_acuenta_ibfk_2 (codtipomcta,numfactucta,fecfactucta),
  CONSTRAINT facturas_acuenta_ibfk_1 FOREIGN KEY (codtipom, numfactu, fecfactu) REFERENCES facturas (codtipom, numfactu, fecfactu) ON UPDATE CASCADE,
  CONSTRAINT facturas_acuenta_ibfk_2 FOREIGN KEY (codtipomcta, numfactucta, fecfactucta) REFERENCES facturas (codtipom, numfactu, fecfactu) ON UPDATE CASCADE
) ENGINE=InnoDB DEFAULT CHARSET=latin1;     

CREATE TABLE facturas_calibre (
  codtipom varchar(3) NOT NULL,
  numfactu int(7) unsigned NOT NULL,
  fecfactu date NOT NULL,
  numlinea smallint(3) NOT NULL,
  numline1 smallint(3) NOT NULL,
  numalbar int(6) unsigned NOT NULL,
  numlinealbar smallint(2) unsigned NOT NULL,
  numline1albar smallint(2) unsigned NOT NULL,
  cantreal int(6) NOT NULL,
  cantfact int(6) NOT NULL,
  precibru decimal(10,4) NOT NULL,
  precinet decimal(10,4) NOT NULL,
  dtocom1 decimal(4,2) default NULL,
  dtocom2 decimal(4,2) default NULL,
  imporbru decimal(10,2) NOT NULL,
  impornet decimal(10,2) NOT NULL,
  codigiva smallint(2) NOT NULL,
  unidades int(4) default NULL,
  PRIMARY KEY  (codtipom,numfactu,fecfactu,numlinea,numline1),
  KEY numalbar (numalbar,numlinealbar),
  KEY facturas_calibre_ibfk_2 (numalbar,numlinealbar,numline1),
  KEY FK_facturas_calibre (numalbar,numlinealbar,numline1albar),
  CONSTRAINT facturas_calibre_ibfk_1 FOREIGN KEY (codtipom, numfactu, fecfactu, numlinea) REFERENCES facturas_variedad (codtipom, numfactu, fecfactu, numlinea) ON UPDATE CASCADE,
  CONSTRAINT facturas_calibre_ibfk_2 FOREIGN KEY (numalbar, numlinealbar, numline1albar) REFERENCES albaran_calibre (numalbar, numlinea, numline1) ON UPDATE CASCADE
) ENGINE=InnoDB DEFAULT CHARSET=latin1;     

CREATE TABLE facturas_envases (
  codtipom varchar(3) NOT NULL,
  numfactu int(7) unsigned NOT NULL,
  fecfactu date NOT NULL,
  numlinea smallint(3) NOT NULL,
  codalmac smallint(3) unsigned NOT NULL,
  codartic varchar(16) NOT NULL,
  cantidad decimal(8,2) NOT NULL,
  precioar decimal(10,4) NOT NULL,
  dtolinea decimal(4,2) default NULL,
  importel decimal(10,2) NOT NULL,
  ampliaci varchar(500) default NULL,
  codigiva smallint(2) NOT NULL,
  numalbar int(6) unsigned NOT NULL,
  numlinealbar smallint(2) unsigned NOT NULL,
  fecalbar date default NULL,
  PRIMARY KEY  (codtipom,numfactu,fecfactu,numlinea),
  KEY FK_facturas_envases (codalmac),
  KEY FK_facturas_envases1 (codartic,codalmac),
  CONSTRAINT facturas_envases_ibfk_1 FOREIGN KEY (codartic, codalmac) REFERENCES salmac (codartic, codalmac) ON UPDATE CASCADE,
  CONSTRAINT facturas_envases_ibfk_2 FOREIGN KEY (codtipom, numfactu, fecfactu) REFERENCES facturas (codtipom, numfactu, fecfactu) ON UPDATE CASCADE
) ENGINE=InnoDB DEFAULT CHARSET=latin1;     

CREATE TABLE facturas_variedad (
  codtipom varchar(3) NOT NULL,
  numfactu int(7) unsigned NOT NULL,
  fecfactu date NOT NULL,
  numlinea smallint(3) NOT NULL,
  numalbar int(6) unsigned NOT NULL,
  numlinealbar smallint(2) unsigned NOT NULL,
  cantreal int(6) NOT NULL,
  cantfact int(6) NOT NULL,
  precibru decimal(10,4) NOT NULL,
  precinet decimal(10,4) NOT NULL,
  dtocom1 decimal(4,2) default NULL,
  dtocom2 decimal(4,2) default NULL,
  imporbru decimal(10,2) NOT NULL,
  impornet decimal(10,2) NOT NULL,
  codigiva smallint(2) NOT NULL,
  unidades int(4) default NULL,
  PRIMARY KEY  (codtipom,numfactu,fecfactu,numlinea),
  KEY numalbar (numalbar,numlinealbar),
  CONSTRAINT facturas_variedad_ibfk_1 FOREIGN KEY (codtipom, numfactu, fecfactu) REFERENCES facturas (codtipom, numfactu, fecfactu) ON UPDATE CASCADE,
  CONSTRAINT facturas_variedad_ibfk_2 FOREIGN KEY (numalbar, numlinealbar) REFERENCES albaran_variedad (numalbar, numlinea) ON UPDATE CASCADE
) ENGINE=InnoDB DEFAULT CHARSET=latin1;     

CREATE TABLE facturassocio (
  codtipom varchar(3) NOT NULL,
  numfactu int(7) unsigned NOT NULL,
  fecfactu date NOT NULL,
  codsocio int(6) unsigned NOT NULL,
  codforpa smallint(3) unsigned NOT NULL,
  tipoivac tinyint(1) NOT NULL COMMENT '0=Normal 1=Exento',
  dtocom1 decimal(4,2) default NULL,
  dtocom2 decimal(4,2) default NULL,
  impdtoc decimal(8,2) default NULL,
  observac varchar(200) default NULL,
  baseimp1 decimal(10,2) default NULL,
  baseimp2 decimal(10,2) default NULL,
  baseimp3 decimal(10,2) default NULL,
  impoiva1 decimal(10,2) default NULL,
  impoiva2 decimal(10,2) default NULL,
  impoiva3 decimal(10,2) default NULL,
  imporec1 decimal(10,2) default NULL,
  imporec2 decimal(10,2) default NULL,
  imporec3 decimal(10,2) default NULL,
  codiiva1 smallint(2) default NULL,
  codiiva2 smallint(2) default NULL,
  codiiva3 smallint(2) default NULL,
  porciva1 decimal(4,2) default NULL,
  porciva2 decimal(4,2) default NULL,
  porciva3 decimal(4,2) default NULL,
  porcrec1 decimal(4,2) default NULL,
  porcrec2 decimal(4,2) default NULL,
  porcrec3 decimal(4,2) default NULL,
  brutofac decimal(10,2) default NULL,
  impordto decimal(10,2) default NULL,
  totalfac decimal(10,2) default NULL,
  intconta tinyint(1) NOT NULL,
  pasaridoc tinyint(1) NOT NULL,
  pasedicom tinyint(1) NOT NULL,
  PRIMARY KEY  (codtipom,numfactu,fecfactu)
) ENGINE=InnoDB DEFAULT CHARSET=latin1;     

CREATE TABLE facturassocio_envases (
  codtipom varchar(3) NOT NULL,
  numfactu int(7) unsigned NOT NULL,
  fecfactu date NOT NULL,
  numlinea smallint(3) NOT NULL,
  codalmac smallint(3) unsigned NOT NULL,
  codartic varchar(16) NOT NULL,
  cantidad decimal(8,2) NOT NULL,
  precioar decimal(10,4) NOT NULL,
  dtolinea decimal(4,2) default NULL,
  importel decimal(10,2) NOT NULL,
  ampliaci varchar(60) default NULL,
  codigiva smallint(2) NOT NULL,
  PRIMARY KEY  (codtipom,numfactu,fecfactu,numlinea),
  KEY FK_facturassocio_envases (codalmac),
  KEY FK_facturassocio_envases1 (codartic,codalmac),
  CONSTRAINT facturassocio_envases_ibfk_1 FOREIGN KEY (codartic, codalmac) REFERENCES salmac (codartic, codalmac) ON UPDATE CASCADE,
  CONSTRAINT facturassocio_envases_ibfk_2 FOREIGN KEY (codtipom, numfactu, fecfactu) REFERENCES facturassocio (codtipom, numfactu, fecfactu) ON UPDATE CASCADE
) ENGINE=InnoDB DEFAULT CHARSET=latin1;     

CREATE TABLE facturassocio_variedad (
  codtipom varchar(3) NOT NULL,
  numfactu int(7) unsigned NOT NULL,
  fecfactu date NOT NULL,
  numlinea smallint(3) NOT NULL,
  numalbar int(6) unsigned NOT NULL,
  numlinealbar smallint(2) unsigned NOT NULL,
  cantreal int(6) NOT NULL,
  cantfact int(6) NOT NULL,
  precibru decimal(10,4) NOT NULL,
  precinet decimal(10,4) NOT NULL,
  dtocom1 decimal(4,2) default NULL,
  dtocom2 decimal(4,2) default NULL,
  imporbru decimal(10,2) NOT NULL,
  impornet decimal(10,2) NOT NULL,
  codigiva smallint(2) NOT NULL,
  unidades int(4) default NULL,
  PRIMARY KEY  (codtipom,numfactu,fecfactu,numlinea),
  KEY numalbar (numalbar,numlinealbar),
  CONSTRAINT facturassocio_variedad_ibfk_1 FOREIGN KEY (codtipom, numfactu, fecfactu) REFERENCES facturassocio (codtipom, numfactu, fecfactu) ON UPDATE CASCADE,
  CONSTRAINT facturassocio_variedad_ibfk_2 FOREIGN KEY (numalbar, numlinealbar) REFERENCES albaran_variedad (numalbar, numlinea) ON UPDATE CASCADE
) ENGINE=InnoDB DEFAULT CHARSET=latin1;     

CREATE TABLE forfaits (
  codforfait varchar(16) NOT NULL,
  nomconfe varchar(40) NOT NULL COMMENT 'Nombre Confeccion',
  observac varchar(40) default NULL COMMENT 'Observaciones',
  cajakilo tinyint(1) NOT NULL COMMENT '0 = Caja / 1= Kilo',
  facturar tinyint(1) NOT NULL COMMENT '0 = Unidad / 1= Kilo',
  kiloscaj decimal(5,2) unsigned default NULL COMMENT 'Kilos/caja',
  kilosuni decimal(5,2) unsigned default NULL COMMENT 'Kilos/unidad',
  codvarie int(6) unsigned default NULL COMMENT 'Cod. Variedad',
  codtipen smallint(3) unsigned NOT NULL COMMENT 'Cod. Tipo Envase',
  codcapac smallint(3) unsigned NOT NULL COMMENT 'Cod. Capacidad',
  codmedid smallint(3) unsigned NOT NULL COMMENT 'Cod. Medida',
  codtipco smallint(3) unsigned NOT NULL COMMENT 'Cod. Confecc.',
  codprese smallint(3) unsigned NOT NULL COMMENT 'Cod. Presentacion',
  codmarca smallint(3) unsigned default NULL COMMENT 'Cod. Marcas',
  codpalet smallint(3) unsigned NOT NULL COMMENT 'Cod. Paletizacion',
  pesocaja decimal(4,2) default NULL COMMENT 'Peso Caja',
  cajaspalet int(6) default NULL,
  preciokilonom decimal(8,4) default NULL,
  PRIMARY KEY  (codforfait),
  KEY FK_forfaits (codvarie),
  KEY FK_forfaits1 (codtipen),
  KEY FK_forfaits2 (codcapac),
  KEY FK_forfaits3 (codmedid),
  KEY FK_forfaits4 (codtipco),
  KEY FK_forfaits5 (codprese),
  KEY FK_forfaits6 (codmarca),
  KEY FK_forfaits7 (codpalet),
  CONSTRAINT forfaits_ibfk_10 FOREIGN KEY (codvarie) REFERENCES variedades (codvarie),
  CONSTRAINT forfaits_ibfk_11 FOREIGN KEY (codtipen) REFERENCES confenva (codtipen),
  CONSTRAINT forfaits_ibfk_12 FOREIGN KEY (codcapac) REFERENCES capacida (codcapac),
  CONSTRAINT forfaits_ibfk_13 FOREIGN KEY (codmedid) REFERENCES confmedi (codmedid),
  CONSTRAINT forfaits_ibfk_14 FOREIGN KEY (codtipco) REFERENCES conftipo (codtipco),
  CONSTRAINT forfaits_ibfk_15 FOREIGN KEY (codprese) REFERENCES confpres (codprese),
  CONSTRAINT forfaits_ibfk_16 FOREIGN KEY (codmarca) REFERENCES marcas (codmarca),
  CONSTRAINT forfaits_ibfk_17 FOREIGN KEY (codpalet) REFERENCES confpale (codpalet)
) ENGINE=InnoDB DEFAULT CHARSET=latin1 COMMENT='Forfaits';     

CREATE TABLE forfaits_costes (
  codforfait varchar(16) NOT NULL COMMENT 'Cod. Forfait',
  codcoste smallint(2) NOT NULL COMMENT 'Cod. Coste',
  importes decimal(8,4) default '0.0000' COMMENT 'Importe coste',
  PRIMARY KEY  (codforfait,codcoste),
  KEY FK_costeconfe1 (codcoste),
  CONSTRAINT forfaits_costes_ibfk_2 FOREIGN KEY (codcoste) REFERENCES nombcoste (codcoste),
  CONSTRAINT forfaits_costes_ibfk_3 FOREIGN KEY (codforfait) REFERENCES forfaits (codforfait)
) ENGINE=InnoDB DEFAULT CHARSET=latin1 COMMENT='Costes por confeccion';     

CREATE TABLE forfaits_envases (
  codforfait varchar(16) NOT NULL COMMENT 'Cod. Forfait',
  numlinea smallint(2) unsigned NOT NULL,
  codartic varchar(16) NOT NULL COMMENT 'Cod. Articulo',
  cantidad decimal(8,4) unsigned NOT NULL COMMENT 'Cantidad',
  PRIMARY KEY  (codforfait,numlinea),
  CONSTRAINT forfaits_envases_ibfk_1 FOREIGN KEY (codforfait) REFERENCES forfaits (codforfait)
) ENGINE=InnoDB DEFAULT CHARSET=latin1 COMMENT='Lineas de forfaits';     

CREATE TABLE forpago (
  codforpa smallint(3) unsigned NOT NULL default '0',
  nomforpa varchar(30) NOT NULL default '0',
  tipoforp tinyint(1) unsigned NOT NULL default '0',
  numerove tinyint(2) unsigned NOT NULL default '0',
  primerve tinyint(2) unsigned NOT NULL default '0',
  restoven tinyint(2) unsigned NOT NULL default '0',
  PRIMARY KEY  (codforpa)
) ENGINE=InnoDB DEFAULT CHARSET=latin1 COMMENT='Formas de Pago';     

CREATE TABLE fvarcabfact (
  codsecci smallint(3) unsigned NOT NULL,
  codtipom varchar(3) NOT NULL,
  numfactu int(7) unsigned NOT NULL,
  fecfactu date NOT NULL,
  codsocio int(6) unsigned default NULL,
  codclien int(6) unsigned default NULL,
  observac varchar(250) default NULL,
  intconta tinyint(4) NOT NULL,
  baseiva1 decimal(8,2) default NULL,
  baseiva2 decimal(8,2) default NULL,
  baseiva3 decimal(8,2) default NULL,
  impoiva1 decimal(8,2) default NULL,
  impoiva2 decimal(8,2) default NULL,
  impoiva3 decimal(8,2) default NULL,
  imporec1 decimal(8,2) default NULL,
  imporec2 decimal(8,2) default NULL,
  imporec3 decimal(8,2) default NULL,
  totalfac decimal(8,2) default NULL,
  tipoiva1 smallint(2) default NULL,
  tipoiva2 smallint(2) default NULL,
  tipoiva3 smallint(2) default NULL,
  porciva1 decimal(4,2) default NULL,
  porciva2 decimal(4,2) default NULL,
  porciva3 decimal(4,2) default NULL,
  codforpa smallint(6) NOT NULL,
  porcrec1 decimal(4,2) default NULL,
  porcrec2 decimal(4,2) default NULL,
  porcrec3 decimal(4,2) default NULL,
  retfaccl decimal(6,2) default NULL,
  trefaccl decimal(12,2) default NULL,
  cuereten char(10) default NULL,
  enliquidacion tinyint(1) unsigned NOT NULL default '0' COMMENT '0=no descuenta/1=liq/2=anticipo',
  intliqui tinyint(1) unsigned NOT NULL default '0',
  envtacampo tinyint(1) unsigned NOT NULL default '0',
  PRIMARY KEY  (codtipom,numfactu,fecfactu),
  KEY FK_fvarcabfact (codsocio),
  KEY FK_fvarcabfact1 (codclien),
  KEY fvarcabfact_ibfk_1 (codsecci),
  CONSTRAINT fvarcabfact_ibfk_1 FOREIGN KEY (codsecci) REFERENCES rseccion (codsecci),
  CONSTRAINT fvarcabfact_ibfk_2 FOREIGN KEY (codsocio) REFERENCES rsocios (codsocio) ON UPDATE CASCADE,
  CONSTRAINT fvarcabfact_ibfk_3 FOREIGN KEY (codclien) REFERENCES clientes (codclien) ON UPDATE CASCADE
) ENGINE=InnoDB DEFAULT CHARSET=latin1;     

CREATE TABLE fvarcabfactpro (
  codsecci smallint(3) unsigned NOT NULL,
  codtipom varchar(3) NOT NULL,
  numfactu int(7) unsigned NOT NULL,
  fecfactu date NOT NULL,
  codsocio int(6) unsigned default NULL,
  observac varchar(250) default NULL,
  intconta tinyint(4) NOT NULL,
  baseiva1 decimal(8,2) default NULL,
  baseiva2 decimal(8,2) default NULL,
  baseiva3 decimal(8,2) default NULL,
  impoiva1 decimal(8,2) default NULL,
  impoiva2 decimal(8,2) default NULL,
  impoiva3 decimal(8,2) default NULL,
  imporec1 decimal(8,2) default NULL,
  imporec2 decimal(8,2) default NULL,
  imporec3 decimal(8,2) default NULL,
  totalfac decimal(8,2) default NULL,
  tipoiva1 smallint(2) default NULL,
  tipoiva2 smallint(2) default NULL,
  tipoiva3 smallint(2) default NULL,
  porciva1 decimal(4,2) default NULL,
  porciva2 decimal(4,2) default NULL,
  porciva3 decimal(4,2) default NULL,
  codforpa smallint(6) NOT NULL,
  porcrec1 decimal(4,2) default NULL,
  porcrec2 decimal(4,2) default NULL,
  porcrec3 decimal(4,2) default NULL,
  retfaccl decimal(6,2) default NULL,
  trefaccl decimal(12,2) default NULL,
  cuereten char(10) default NULL,
  PRIMARY KEY  (codtipom,numfactu,fecfactu),
  KEY FK_fvarcabfactpro (codsocio),
  KEY fvarcabfactpro_ibfk_1 (codsecci),
  CONSTRAINT fvarcabfactpro_ibfk_1 FOREIGN KEY (codsecci) REFERENCES rseccion (codsecci),
  CONSTRAINT fvarcabfactpro_ibfk_2 FOREIGN KEY (codsocio) REFERENCES rsocios (codsocio) ON UPDATE CASCADE
) ENGINE=InnoDB DEFAULT CHARSET=latin1;     

CREATE TABLE fvarconce (
  codconce smallint(3) unsigned NOT NULL,
  nomconce varchar(30) NOT NULL,
  codmacta varchar(10) NOT NULL,
  tipoiva smallint(2) NOT NULL,
  codsecci smallint(2) unsigned NOT NULL,
  codccost char(4) default NULL,
  codmacpr varchar(10) NOT NULL,
  PRIMARY KEY  (codconce),
  KEY FK_fvarconce (codsecci),
  CONSTRAINT fvarconce_ibfk_1 FOREIGN KEY (codsecci) REFERENCES rseccion (codsecci) ON UPDATE CASCADE
) ENGINE=InnoDB DEFAULT CHARSET=latin1;     

CREATE TABLE fvarlinfact (
  codtipom varchar(3) NOT NULL,
  numfactu int(7) unsigned NOT NULL,
  fecfactu date NOT NULL,
  numlinea smallint(2) NOT NULL,
  codconce smallint(3) unsigned NOT NULL,
  ampliaci varchar(50) default NULL,
  precio decimal(10,4) default NULL,
  cantidad decimal(8,2) default NULL,
  importe decimal(8,2) NOT NULL,
  tipoiva smallint(2) NOT NULL,
  PRIMARY KEY  (codtipom,numfactu,fecfactu,numlinea),
  KEY FK_linfact (codconce),
  CONSTRAINT fvarlinfact_ibfk_1 FOREIGN KEY (codconce) REFERENCES fvarconce (codconce),
  CONSTRAINT fvarlinfact_ibfk_2 FOREIGN KEY (codtipom, numfactu, fecfactu) REFERENCES fvarcabfact (codtipom, numfactu, fecfactu) ON UPDATE CASCADE
) ENGINE=InnoDB DEFAULT CHARSET=latin1;     

CREATE TABLE fvarlinfactpro (
  codtipom varchar(3) NOT NULL,
  numfactu int(7) unsigned NOT NULL,
  fecfactu date NOT NULL,
  numlinea smallint(2) NOT NULL,
  codconce smallint(3) unsigned NOT NULL,
  ampliaci varchar(50) default NULL,
  precio decimal(10,4) default NULL,
  cantidad decimal(8,2) default NULL,
  importe decimal(8,2) NOT NULL,
  tipoiva smallint(2) NOT NULL,
  PRIMARY KEY  (codtipom,numfactu,fecfactu,numlinea),
  KEY FK_linfactpro (codconce),
  CONSTRAINT fvarlinfactpro_ibfk_1 FOREIGN KEY (codconce) REFERENCES fvarconce (codconce),
  CONSTRAINT fvarlinfactpro_ibfk_2 FOREIGN KEY (codtipom, numfactu, fecfactu) REFERENCES fvarcabfactpro (codtipom, numfactu, fecfactu) ON UPDATE CASCADE
) ENGINE=InnoDB DEFAULT CHARSET=latin1;     

CREATE TABLE grupopro (
  codgrupo smallint(3) unsigned NOT NULL default '0',
  nomgrupo varchar(15) NOT NULL default '0',
  codatria varchar(3) default NULL,
  PRIMARY KEY  (codgrupo)
) ENGINE=InnoDB DEFAULT CHARSET=latin1 COMMENT='Grupos Productos';     

CREATE TABLE horas (
  codtraba int(6) NOT NULL,
  fechahora date NOT NULL,
  horasdia decimal(5,2) NOT NULL,
  horasproduc decimal(5,2) NOT NULL,
  compleme decimal(8,2) default NULL,
  horasini datetime default NULL,
  horasfin datetime default NULL,
  anticipo decimal(8,2) default NULL,
  horasext decimal(5,2) default NULL,
  fecharec date default NULL,
  intconta tinyint(4) unsigned NOT NULL,
  pasaridoc tinyint(4) unsigned NOT NULL,
  codalmac smallint(3) unsigned NOT NULL,
  nroparte int(7) unsigned default NULL,
  codvarie int(6) NOT NULL default '0',
  codforfait varchar(16) NOT NULL default '',
  numcajon int(6) default NULL,
  kilos int(6) default NULL,
  importe decimal(8,2) default NULL,
  codcapat smallint(4) unsigned default NULL,
  penaliza decimal(8,2) default NULL,
  kilostiron int(6) default NULL,
  PRIMARY KEY  (codtraba,fechahora,codalmac,codvarie,codforfait),
  KEY FK_horas (codalmac),
  KEY FK_horas1 (nroparte),
  KEY FK_horas2 (codcapat),
  CONSTRAINT horas_ibfk_1 FOREIGN KEY (codtraba) REFERENCES straba (codtraba) ON UPDATE CASCADE,
  CONSTRAINT horas_ibfk_2 FOREIGN KEY (codalmac) REFERENCES salmpr (codalmac) ON UPDATE CASCADE,
  CONSTRAINT horas_ibfk_3 FOREIGN KEY (nroparte) REFERENCES rpartes (nroparte) ON UPDATE CASCADE,
  CONSTRAINT horas_ibfk_4 FOREIGN KEY (codcapat) REFERENCES rcapataz (codcapat) ON UPDATE CASCADE
) ENGINE=InnoDB DEFAULT CHARSET=latin1;     

CREATE TABLE horasanticipos (
  codtraba int(6) NOT NULL,
  fecharec date NOT NULL,
  importe decimal(10,2) NOT NULL,
  fechapago date default NULL,
  concepto varchar(30) default NULL,
  descontado tinyint(1) NOT NULL default '0',
  fechahora date default NULL,
  idcontador int(7) default NULL,
  PRIMARY KEY  (codtraba,fecharec),
  CONSTRAINT horasanticipos_ibfk_1 FOREIGN KEY (codtraba) REFERENCES straba (codtraba) ON UPDATE CASCADE
) ENGINE=InnoDB DEFAULT CHARSET=latin1;     

CREATE TABLE horasdestajo (
  codtraba int(6) NOT NULL,
  fechahora date NOT NULL,
  codvarie int(6) unsigned NOT NULL,
  codforfait varchar(16) NOT NULL,
  numcajon decimal(6,2) NOT NULL,
  kilos int(6) NOT NULL,
  importe decimal(10,2) NOT NULL,
  horas decimal(5,2) NOT NULL,
  PRIMARY KEY  (codtraba,fechahora,codvarie,codforfait),
  KEY FK_horasdestajo (codvarie),
  KEY FK_horasdestajo1 (codforfait),
  KEY FK_horasdestajo2 (codtraba),
  CONSTRAINT horasdestajo_ibfk_1 FOREIGN KEY (codvarie) REFERENCES variedades (codvarie) ON UPDATE CASCADE,
  CONSTRAINT horasdestajo_ibfk_2 FOREIGN KEY (codforfait) REFERENCES forfaits (codforfait) ON UPDATE CASCADE,
  CONSTRAINT horasdestajo_ibfk_3 FOREIGN KEY (codtraba) REFERENCES straba (codtraba) ON UPDATE CASCADE
) ENGINE=InnoDB DEFAULT CHARSET=latin1;     

CREATE TABLE horasett (
  fechahora date NOT NULL,
  codvarie int(6) unsigned NOT NULL,
  codigoett smallint(4) NOT NULL,
  codcapat smallint(4) unsigned NOT NULL,
  complemento decimal(10,2) NOT NULL default '0.00',
  codcateg smallint(2) NOT NULL default '0',
  importe decimal(10,2) default NULL,
  penaliza decimal(10,2) default NULL,
  complcapataz decimal(10,2) default NULL,
  kilosalicatados int(6) NOT NULL default '0',
  kilostiron int(6) NOT NULL default '0',
  fecharec date default NULL,
  intconta smallint(4) unsigned NOT NULL default '0',
  pasaridoc smallint(4) unsigned NOT NULL default '0',
  PRIMARY KEY  (fechahora,codvarie,codigoett,codcapat),
  KEY FK_horasett (codvarie),
  KEY FK_horasett1 (codcapat),
  CONSTRAINT horasett_ibfk_1 FOREIGN KEY (codvarie) REFERENCES variedades (codvarie) ON UPDATE CASCADE,
  CONSTRAINT horasett_ibfk_2 FOREIGN KEY (codcapat) REFERENCES rcapataz (codcapat) ON UPDATE CASCADE
) ENGINE=InnoDB DEFAULT CHARSET=latin1;     

CREATE TABLE inciden (
  codincid smallint(3) NOT NULL default '0',
  nomincid varchar(30) default '0',
  PRIMARY KEY  (codincid)
) ENGINE=InnoDB DEFAULT CHARSET=latin1 COMMENT='Incidencias';     

CREATE TABLE lincostreal (
  codcoste smallint(2) NOT NULL,
  mescoste smallint(2) NOT NULL,
  anocoste int(4) NOT NULL,
  codvarie int(6) unsigned NOT NULL,
  pesoneto int(6) NOT NULL,
  costekg decimal(10,4) NOT NULL,
  impcoste decimal(10,2) NOT NULL,
  PRIMARY KEY  (codcoste,mescoste,anocoste,codvarie),
  KEY FK_lincostreal (codvarie),
  CONSTRAINT lincostreal_ibfk_1 FOREIGN KEY (codcoste, mescoste, anocoste) REFERENCES cabcostreal (codcoste, mescoste, anocoste) ON UPDATE CASCADE,
  CONSTRAINT lincostreal_ibfk_2 FOREIGN KEY (codvarie) REFERENCES variedades (codvarie) ON UPDATE CASCADE
) ENGINE=InnoDB DEFAULT CHARSET=latin1;     

CREATE TABLE marcas (
  codmarca smallint(3) unsigned NOT NULL default '0',
  nommarca varchar(25) NOT NULL default '0',
  tipmarca tinyint(1) NOT NULL default '0' COMMENT '0 = Propia / 1 = Ajena',
  PRIMARY KEY  (codmarca)
) ENGINE=InnoDB DEFAULT CHARSET=latin1 COMMENT='Marcas comerciales';     

CREATE TABLE nombcoste (
  codcoste smallint(2) NOT NULL COMMENT 'Cod.Coste Confección',
  denominacion varchar(40) default NULL,
  PRIMARY KEY  (codcoste)
) ENGINE=InnoDB DEFAULT CHARSET=latin1 ROW_FORMAT=DYNAMIC;     

CREATE TABLE paises (
  codpaise smallint(3) unsigned NOT NULL default '0',
  nompaise varchar(30) NOT NULL default '0',
  intracom tinyint(1) NOT NULL default '0',
  restituc tinyint(1) NOT NULL default '0',
  nommoned varchar(5) default '0',
  simmoned char(3) default '0',
  letraspais char(2) NOT NULL,
  PRIMARY KEY  (codpaise)
) ENGINE=InnoDB DEFAULT CHARSET=latin1 COMMENT='Maestro de Paises';     

CREATE TABLE palets (
  numpalet int(6) unsigned NOT NULL,
  fechaini date NOT NULL,
  horaini datetime NOT NULL,
  fechafin date default NULL,
  horafin datetime default NULL,
  codpalet smallint(3) unsigned NOT NULL,
  linconfe smallint(2) unsigned NOT NULL,
  tipmercan tinyint(1) NOT NULL COMMENT '0=cooperativa 1=terceros 2=mezclado 3=otros',
  observac varchar(100) default NULL,
  numpedid int(6) default NULL,
  fechaconf date NOT NULL,
  horaiconf datetime NOT NULL,
  horafconf datetime NOT NULL,
  codlinconf smallint(2) unsigned NOT NULL,
  intorden tinyint(1) unsigned NOT NULL default '0',
  linentrada smallint(2) NOT NULL default '0',
  linsalida smallint(2) NOT NULL default '0',
  PRIMARY KEY  (numpalet),
  KEY FK_palets2 (codpalet),
  KEY FK_palets (linconfe),
  KEY FK_palets5 (codlinconf),
  CONSTRAINT palets_ibfk_3 FOREIGN KEY (codpalet) REFERENCES confpale (codpalet),
  CONSTRAINT palets_ibfk_4 FOREIGN KEY (linconfe) REFERENCES cclinconf (codlinconf) ON UPDATE CASCADE,
  CONSTRAINT palets_ibfk_5 FOREIGN KEY (codlinconf) REFERENCES cclinconf (codlinconf) ON UPDATE CASCADE
) ENGINE=InnoDB DEFAULT CHARSET=latin1;     

CREATE TABLE palets_calibre (
  numpalet int(6) unsigned NOT NULL,
  numlinea smallint(2) unsigned NOT NULL,
  numline1 smallint(2) unsigned NOT NULL,
  codvarie int(6) unsigned NOT NULL,
  codcalib smallint(2) NOT NULL,
  numcajas int(4) NOT NULL,
  PRIMARY KEY  (numpalet,numlinea,numline1),
  KEY FK_palets_lineas (codvarie),
  CONSTRAINT palets_calibre_ibfk_1 FOREIGN KEY (numpalet) REFERENCES palets (numpalet),
  CONSTRAINT palets_calibre_ibfk_2 FOREIGN KEY (codvarie) REFERENCES variedades (codvarie),
  CONSTRAINT palets_calibre_ibfk_3 FOREIGN KEY (numpalet, numlinea) REFERENCES palets_variedad (numpalet, numlinea)
) ENGINE=InnoDB DEFAULT CHARSET=latin1;     

CREATE TABLE palets_variedad (
  numpalet int(6) unsigned NOT NULL,
  numlinea smallint(2) unsigned NOT NULL,
  codvarie int(6) unsigned NOT NULL,
  codvarco int(6) unsigned NOT NULL,
  codmarca smallint(3) unsigned NOT NULL,
  codforfait varchar(16) NOT NULL,
  categori varchar(3) default NULL,
  pesobrut int(6) default NULL,
  pesoneto int(6) NOT NULL,
  numcajas int(4) NOT NULL default '0',
  nrolote varchar(15) default NULL,
  PRIMARY KEY  (numpalet,numlinea),
  KEY FK_palets_variedad (codvarie),
  KEY FK_palets_variedad1 (codvarco),
  KEY FK_palets_variedad2 (codmarca),
  KEY FK_palets_variedad3 (codforfait),
  CONSTRAINT palets_variedad_ibfk_1 FOREIGN KEY (numpalet) REFERENCES palets (numpalet),
  CONSTRAINT palets_variedad_ibfk_2 FOREIGN KEY (codvarie) REFERENCES variedades (codvarie),
  CONSTRAINT palets_variedad_ibfk_3 FOREIGN KEY (codvarco) REFERENCES variedades (codvarie),
  CONSTRAINT palets_variedad_ibfk_4 FOREIGN KEY (codmarca) REFERENCES marcas (codmarca),
  CONSTRAINT palets_variedad_ibfk_5 FOREIGN KEY (codforfait) REFERENCES forfaits (codforfait)
) ENGINE=InnoDB DEFAULT CHARSET=latin1;     

CREATE TABLE pedidos (
  numpedid int(6) unsigned NOT NULL,
  fechaped date NOT NULL,
  fechacar date NOT NULL,
  situacio tinyint(1) NOT NULL COMMENT '0=Original 1=Modificado 2=Anulado',
  codclien int(6) unsigned NOT NULL,
  coddesti smallint(3) unsigned NOT NULL,
  codtrans smallint(3) unsigned NOT NULL,
  matriveh varchar(12) default NULL,
  matrirem varchar(12) default NULL,
  refclien varchar(12) default NULL,
  codtimer smallint(3) unsigned NOT NULL,
  totpalet int(3) default NULL,
  nrocontra varchar(15) default NULL,
  nroactas smallint(4) default NULL,
  numalbar int(6) default NULL,
  fechaalb date default NULL,
  observac varchar(200) default NULL,
  impresor tinyint(1) NOT NULL COMMENT 'Impresa orden de confeccion?',
  codalmac smallint(3) unsigned NOT NULL,
  codpalet smallint(3) unsigned NOT NULL,
  PRIMARY KEY  (numpedid),
  KEY FK_pedidos (codclien,coddesti),
  KEY FK_pedidos1 (codtrans),
  KEY FK_pedidos2 (codtimer),
  KEY FK_pedidos3 (codalmac),
  KEY FK_pedidos4 (codpalet),
  CONSTRAINT pedidos_ibfk_1 FOREIGN KEY (codclien, coddesti) REFERENCES destinos (codclien, coddesti) ON UPDATE CASCADE,
  CONSTRAINT pedidos_ibfk_2 FOREIGN KEY (codtrans) REFERENCES agencias (codtrans) ON UPDATE CASCADE,
  CONSTRAINT pedidos_ibfk_3 FOREIGN KEY (codtimer) REFERENCES tipomer (codtimer) ON UPDATE CASCADE,
  CONSTRAINT pedidos_ibfk_4 FOREIGN KEY (codalmac) REFERENCES salmpr (codalmac) ON UPDATE CASCADE,
  CONSTRAINT pedidos_ibfk_5 FOREIGN KEY (codpalet) REFERENCES confpale (codpalet) ON UPDATE CASCADE
) ENGINE=InnoDB DEFAULT CHARSET=latin1;     

CREATE TABLE pedidos_calibre (
  numpedid int(6) unsigned NOT NULL,
  numlinea smallint(2) unsigned NOT NULL,
  numline1 smallint(2) unsigned NOT NULL,
  codvarie int(6) unsigned NOT NULL,
  codcalib smallint(2) unsigned NOT NULL,
  numcajas int(4) default NULL,
  pesoneto int(6) NOT NULL,
  unidades int(4) default NULL,
  PRIMARY KEY  (numpedid,numlinea,numline1),
  KEY FK_pedidos_calibre (codvarie,codcalib),
  CONSTRAINT pedidos_calibre_ibfk_1 FOREIGN KEY (codvarie, codcalib) REFERENCES calibres (codvarie, codcalib),
  CONSTRAINT pedidos_calibre_ibfk_2 FOREIGN KEY (numpedid, numlinea) REFERENCES pedidos_variedad (numpedid, numlinea)
) ENGINE=InnoDB DEFAULT CHARSET=latin1;     

CREATE TABLE pedidos_variedad (
  numpedid int(6) unsigned NOT NULL,
  numlinea smallint(2) unsigned NOT NULL,
  codvarie int(6) unsigned NOT NULL,
  codvarco int(6) unsigned NOT NULL,
  codforfait varchar(16) NOT NULL,
  codmarca smallint(3) unsigned NOT NULL,
  categori varchar(3) default NULL,
  totpalet int(3) default NULL,
  numcajas int(4) default NULL,
  pesobrut int(6) default NULL,
  pesoneto int(6) default NULL,
  preciopro decimal(6,4) default NULL,
  unidades int(4) default NULL,
  codpalet smallint(3) unsigned default NULL,
  codprove int(6) default NULL,
  transporte varchar(200) default NULL,
  origen varchar(50) default NULL,
  penetromia varchar(20) default NULL,
  brix varchar(20) default NULL,
  madurez varchar(20) default NULL,
  zumo varchar(20) default NULL,
  altmaxpalet varchar(10) default NULL,
  stickers varchar(10) default NULL,
  preenfriado varchar(20) default NULL,
  etiquetado varchar(500) default NULL,
  cajasxpalet varchar(10) default NULL,
  horacarga varchar(20) default NULL,
  direccarga varchar(200) default NULL,
  obsproveedor varchar(500) default NULL,
  feccarga date default NULL,
  PRIMARY KEY  (numpedid,numlinea),
  KEY FK_pedidos_lineas1 (codvarie),
  KEY FK_pedidos_lineas (codvarco),
  KEY FK_pedidos_lineas4 (codforfait),
  KEY FK_pedidos_lineas5 (codmarca),
  KEY FK_pedidos_variedad (codpalet),
  CONSTRAINT pedidos_variedad_ibfk_1 FOREIGN KEY (numpedid) REFERENCES pedidos (numpedid),
  CONSTRAINT pedidos_variedad_ibfk_2 FOREIGN KEY (codvarie) REFERENCES variedades (codvarie),
  CONSTRAINT pedidos_variedad_ibfk_3 FOREIGN KEY (codvarco) REFERENCES variedades (codvarie),
  CONSTRAINT pedidos_variedad_ibfk_4 FOREIGN KEY (codforfait) REFERENCES forfaits (codforfait),
  CONSTRAINT pedidos_variedad_ibfk_5 FOREIGN KEY (codmarca) REFERENCES marcas (codmarca),
  CONSTRAINT pedidos_variedad_ibfk_6 FOREIGN KEY (codpalet) REFERENCES confpale (codpalet) ON UPDATE CASCADE
) ENGINE=InnoDB DEFAULT CHARSET=latin1;     

CREATE TABLE productos (
  codprodu smallint(3) unsigned NOT NULL default '0',
  nomprodu varchar(15) NOT NULL default '0',
  codgrupo smallint(3) unsigned NOT NULL default '0',
  codsigpa smallint(3) unsigned NOT NULL default '0',
  gruporeten smallint(3) unsigned NOT NULL default '0',
  porcepigrafe decimal(5,2) NOT NULL default '0.00',
  precioarroba tinyint(1) unsigned NOT NULL default '1' COMMENT 'en AlzFactSocio.rpt',
  PRIMARY KEY  (codprodu),
  KEY codgrupo (codgrupo),
  CONSTRAINT productos_ibfk_1 FOREIGN KEY (codgrupo) REFERENCES grupopro (codgrupo)
) ENGINE=InnoDB DEFAULT CHARSET=latin1 COMMENT='Productos';     

CREATE TABLE proveedor (
  codprove int(6) unsigned NOT NULL default '0',
  nomprove varchar(40) NOT NULL default '',
  nomcomer varchar(30) NOT NULL default '',
  domprove varchar(35) default NULL,
  codpobla varchar(6) NOT NULL default '',
  pobprove varchar(30) NOT NULL default '',
  proprove varchar(30) NOT NULL default '',
  tipprove tinyint(1) NOT NULL default '0',
  nifprove varchar(15) NOT NULL default '',
  telprov1 varchar(15) default NULL,
  faxprov1 varchar(15) default NULL,
  perprov1 varchar(40) default NULL,
  maiprov1 varchar(40) default NULL,
  telprov2 varchar(15) default NULL,
  faxprov2 varchar(15) default NULL,
  perprov2 varchar(40) default NULL,
  maiprov2 varchar(40) default NULL,
  wwwprove varchar(40) default NULL,
  fecprove date NOT NULL default '0000-00-00',
  provario tinyint(1) unsigned NOT NULL default '0',
  codmacta varchar(10) default NULL,
  codforpa smallint(3) unsigned NOT NULL default '0',
  tipodtos tinyint(1) unsigned NOT NULL default '0',
  dtoppago decimal(4,2) default NULL,
  dtognral decimal(4,2) default NULL,
  fechamov date default '0000-00-00',
  iban varchar(4) default NULL,
  codbanpr smallint(5) unsigned NOT NULL default '0',
  codbanco smallint(5) unsigned default NULL,
  codsucur smallint(5) unsigned default NULL,
  digcontr char(2) default NULL,
  cuentaba varchar(10) default NULL,
  observac varchar(200) default NULL,
  PRIMARY KEY  (codprove),
  KEY FK_proveedor (codbanpr),
  KEY FK_proveedor1 (codforpa),
  CONSTRAINT proveedor_ibfk_1 FOREIGN KEY (codbanpr) REFERENCES banpropi (codbanpr),
  CONSTRAINT proveedor_ibfk_2 FOREIGN KEY (codforpa) REFERENCES forpago (codforpa)
) ENGINE=InnoDB DEFAULT CHARSET=latin1 COMMENT='Proveedores';     

CREATE TABLE raporhco (
  numaport int(7) unsigned NOT NULL,
  codsocio int(6) unsigned NOT NULL,
  codcampo int(8) unsigned NOT NULL,
  poligono smallint(3) NOT NULL,
  parcela int(6) NOT NULL,
  codparti smallint(4) unsigned NOT NULL,
  codvarie int(6) unsigned NOT NULL,
  impaport decimal(10,2) NOT NULL,
  fecaport date NOT NULL,
  anoplant smallint(4) default NULL,
  observac varchar(250) default NULL,
  supcoope decimal(8,4) NOT NULL,
  ejercicio smallint(4) NOT NULL,
  intconta tinyint(1) unsigned NOT NULL default '0',
  PRIMARY KEY  (numaport),
  KEY FK_raporhco (codsocio),
  KEY FK_raporhco1 (codvarie),
  KEY FK_raporhco2 (codparti),
  CONSTRAINT raporhco_ibfk_1 FOREIGN KEY (codsocio) REFERENCES rsocios (codsocio) ON UPDATE CASCADE,
  CONSTRAINT raporhco_ibfk_2 FOREIGN KEY (codvarie) REFERENCES variedades (codvarie) ON UPDATE CASCADE,
  CONSTRAINT raporhco_ibfk_3 FOREIGN KEY (codparti) REFERENCES rpartida (codparti) ON UPDATE CASCADE
) ENGINE=InnoDB DEFAULT CHARSET=latin1;     

CREATE TABLE raporreparto (
  codsocio int(6) unsigned NOT NULL,
  tipoentr tinyint(1) unsigned NOT NULL COMMENT '0=resto entradas 1=venta campo',
  kilosnet int(6) NOT NULL,
  importe decimal(10,2) NOT NULL,
  precio decimal(10,6) NOT NULL,
  PRIMARY KEY  (codsocio,tipoentr),
  KEY FK_raporeparto (codsocio),
  CONSTRAINT raporeparto_ibfk_1 FOREIGN KEY (codsocio) REFERENCES rsocios (codsocio) ON UPDATE CASCADE
) ENGINE=InnoDB DEFAULT CHARSET=latin1;     

CREATE TABLE raportacion (
  codsocio int(6) unsigned NOT NULL,
  fecaport date NOT NULL,
  codaport smallint(3) unsigned NOT NULL,
  descripcion varchar(30) NOT NULL,
  campanya varchar(9) NOT NULL,
  kilos int(7) NOT NULL,
  importe decimal(10,2) NOT NULL,
  codtipom varchar(3) default NULL,
  numfactu int(7) NOT NULL default '0',
  intconta tinyint(1) NOT NULL default '0',
  porcaport decimal(5,2) default NULL,
  PRIMARY KEY  (codsocio,fecaport,codaport,numfactu),
  KEY FK_raportacion (codaport),
  CONSTRAINT raportacion_ibfk_1 FOREIGN KEY (codaport) REFERENCES rtipoapor (codaport) ON UPDATE CASCADE,
  CONSTRAINT raportacion_ibfk_2 FOREIGN KEY (codsocio) REFERENCES rsocios (codsocio) ON UPDATE CASCADE
) ENGINE=InnoDB DEFAULT CHARSET=latin1;     

CREATE TABLE rapotraspaso (
  codsocio int(6) unsigned NOT NULL,
  codsocdest int(6) unsigned NOT NULL,
  fecaport date default NULL,
  codaport smallint(3) unsigned default NULL,
  descripcion varchar(30) default NULL,
  campanya varchar(9) default NULL,
  kilos int(7) default NULL,
  importe decimal(10,2) default NULL,
  porcentaje decimal(5,2) NOT NULL,
  PRIMARY KEY  (codsocio,codsocdest)
) ENGINE=InnoDB DEFAULT CHARSET=latin1;     

CREATE TABLE rbodalbaran (
  numalbar int(7) unsigned NOT NULL default '0',
  fechaalb date NOT NULL default '0000-00-00',
  codsocio int(6) unsigned NOT NULL default '0',
  observac varchar(200) default NULL,
  PRIMARY KEY  (numalbar),
  KEY fkCodSocio (codsocio),
  KEY numalbar (numalbar),
  CONSTRAINT rbodalbaran_ibfk_1 FOREIGN KEY (codsocio) REFERENCES rsocios (codsocio)
) ENGINE=InnoDB DEFAULT CHARSET=latin1 COMMENT='Cabecera de Albaranes Retirada Bodega';     

CREATE TABLE rbodalbaran_variedad (
  numalbar int(7) unsigned NOT NULL default '0',
  numlinea smallint(5) unsigned NOT NULL default '0',
  codvarie int(6) unsigned NOT NULL default '0',
  unidades decimal(12,2) NOT NULL default '0.00',
  cantidad decimal(12,2) NOT NULL default '0.00',
  precioar decimal(10,4) NOT NULL default '0.0000',
  dtolinea decimal(4,2) NOT NULL default '0.00',
  importel decimal(12,2) NOT NULL default '0.00',
  ampliaci varchar(60) default NULL,
  codigiva smallint(2) NOT NULL,
  PRIMARY KEY  (numalbar,numlinea),
  KEY fkNumAlb (numalbar),
  KEY rbodalbaran_variedad_ibfk_1 (codvarie),
  CONSTRAINT rbodalbaran_variedad_ibfk_1 FOREIGN KEY (codvarie) REFERENCES variedades (codvarie),
  CONSTRAINT rbodalbaran_variedad_ibfk_2 FOREIGN KEY (numalbar) REFERENCES rbodalbaran (numalbar) ON UPDATE CASCADE
) ENGINE=InnoDB DEFAULT CHARSET=latin1 COMMENT='Lineas de Albaranes de Retirada de Bodega';     

CREATE TABLE rbodalbaran_variedad_copy (
  numalbar int(7) unsigned NOT NULL default '0',
  numlinea smallint(5) unsigned NOT NULL default '0',
  codvarie int(6) unsigned NOT NULL default '0',
  unidades decimal(12,2) NOT NULL default '0.00',
  cantidad decimal(12,2) NOT NULL default '0.00',
  precioar decimal(10,4) NOT NULL default '0.0000',
  dtolinea decimal(4,2) NOT NULL default '0.00',
  importel decimal(12,2) NOT NULL default '0.00',
  ampliaci varchar(60) default NULL,
  codigiva smallint(2) NOT NULL,
  PRIMARY KEY  (numalbar,numlinea),
  KEY fkNumAlb (numalbar),
  KEY rbodalbaran_variedad_ibfk_1 (codvarie)
) ENGINE=InnoDB DEFAULT CHARSET=latin1;     

CREATE TABLE rbodfacturas (
  codtipom varchar(3) NOT NULL,
  numfactu int(7) unsigned NOT NULL,
  fecfactu date NOT NULL,
  codsocio int(6) unsigned NOT NULL,
  nifsocio varchar(9) NOT NULL,
  nomsocio varchar(40) NOT NULL,
  telsoci1 varchar(10) default NULL,
  dirsocio varchar(35) default NULL,
  pobsocio varchar(30) default NULL,
  prosocio varchar(30) default NULL,
  codpostal varchar(6) default NULL,
  codforpa smallint(3) unsigned NOT NULL,
  observac varchar(200) default NULL,
  baseimp1 decimal(10,2) default NULL,
  baseimp2 decimal(10,2) default NULL,
  baseimp3 decimal(10,2) default NULL,
  impoiva1 decimal(10,2) default NULL,
  impoiva2 decimal(10,2) default NULL,
  impoiva3 decimal(10,2) default NULL,
  imporec1 decimal(10,2) default NULL,
  imporec2 decimal(10,2) default NULL,
  imporec3 decimal(10,2) default NULL,
  codiiva1 smallint(2) default NULL,
  codiiva2 smallint(2) default NULL,
  codiiva3 smallint(2) default NULL,
  porciva1 decimal(4,2) default NULL,
  porciva2 decimal(4,2) default NULL,
  porciva3 decimal(4,2) default NULL,
  porcrec1 decimal(4,2) default NULL,
  porcrec2 decimal(4,2) default NULL,
  porcrec3 decimal(4,2) default NULL,
  brutofac decimal(10,2) default NULL,
  totalfac decimal(10,2) default NULL,
  impreso tinyint(1) NOT NULL,
  intconta tinyint(1) NOT NULL,
  pasaridoc tinyint(1) NOT NULL,
  PRIMARY KEY  (codtipom,numfactu,fecfactu),
  KEY FK_rbodfacturas (codsocio),
  CONSTRAINT rbodfacturas_ibfk_1 FOREIGN KEY (codsocio) REFERENCES rsocios (codsocio) ON UPDATE CASCADE
) ENGINE=InnoDB DEFAULT CHARSET=latin1;     

CREATE TABLE rbodfacturas_alb (
  codtipom varchar(3) NOT NULL,
  numfactu int(7) unsigned NOT NULL,
  fecfactu date NOT NULL,
  numalbar int(7) unsigned NOT NULL default '0',
  fechaalb date NOT NULL default '0000-00-00',
  observac varchar(200) default NULL,
  PRIMARY KEY  (codtipom,numfactu,fecfactu,numalbar,fechaalb),
  KEY FK_rbodfacturas_alb (numalbar),
  CONSTRAINT rbodfacturas_alb_ibfk_1 FOREIGN KEY (codtipom, numfactu, fecfactu) REFERENCES rbodfacturas (codtipom, numfactu, fecfactu) ON UPDATE CASCADE,
  CONSTRAINT rbodfacturas_alb_ibfk_2 FOREIGN KEY (numalbar) REFERENCES rbodalbaran (numalbar) ON UPDATE CASCADE
) ENGINE=InnoDB DEFAULT CHARSET=latin1;     

CREATE TABLE rbodfacturas_alb_copy (
  codtipom varchar(3) NOT NULL,
  numfactu int(7) unsigned NOT NULL,
  fecfactu date NOT NULL,
  numalbar int(7) unsigned NOT NULL default '0',
  fechaalb date NOT NULL default '0000-00-00',
  observac varchar(200) default NULL
) ENGINE=InnoDB DEFAULT CHARSET=latin1;     

CREATE TABLE rbodfacturas_copy (
  codtipom varchar(3) NOT NULL,
  numfactu int(7) unsigned NOT NULL,
  fecfactu date NOT NULL,
  codsocio - 1000 bigint(12) unsigned NOT NULL default '0',
  nifsocio varchar(9) NOT NULL,
  nomsocio varchar(40) NOT NULL,
  telsoci1 varchar(10) default NULL,
  dirsocio varchar(35) default NULL,
  pobsocio varchar(30) default NULL,
  prosocio varchar(30) default NULL,
  codpostal varchar(6) default NULL,
  codforpa smallint(3) unsigned NOT NULL,
  observac varchar(200) default NULL,
  baseimp1 decimal(10,2) default NULL,
  baseimp2 decimal(10,2) default NULL,
  baseimp3 decimal(10,2) default NULL,
  impoiva1 decimal(10,2) default NULL,
  impoiva2 decimal(10,2) default NULL,
  impoiva3 decimal(10,2) default NULL,
  imporec1 decimal(10,2) default NULL,
  imporec2 decimal(10,2) default NULL,
  imporec3 decimal(10,2) default NULL,
  codiiva1 smallint(2) default NULL,
  codiiva2 smallint(2) default NULL,
  codiiva3 smallint(2) default NULL,
  porciva1 decimal(4,2) default NULL,
  porciva2 decimal(4,2) default NULL,
  porciva3 decimal(4,2) default NULL,
  porcrec1 decimal(4,2) default NULL,
  porcrec2 decimal(4,2) default NULL,
  porcrec3 decimal(4,2) default NULL,
  brutofac decimal(10,2) default NULL,
  totalfac decimal(10,2) default NULL,
  impreso tinyint(1) NOT NULL,
  intconta tinyint(1) NOT NULL,
  pasaridoc tinyint(1) NOT NULL
) ENGINE=InnoDB DEFAULT CHARSET=latin1;     

CREATE TABLE rbodfacturas_lineas (
  codtipom varchar(3) NOT NULL,
  numfactu int(7) unsigned NOT NULL,
  fecfactu date NOT NULL,
  numalbar int(7) unsigned NOT NULL default '0',
  numlinea smallint(5) unsigned NOT NULL default '0',
  codvarie int(6) unsigned NOT NULL,
  unidades decimal(12,2) NOT NULL,
  cantidad decimal(12,2) NOT NULL,
  precioar decimal(10,4) NOT NULL,
  dtolinea decimal(4,2) default NULL,
  importel decimal(12,2) NOT NULL,
  ampliaci varchar(60) default NULL,
  codigiva smallint(2) NOT NULL,
  PRIMARY KEY  (codtipom,numfactu,fecfactu,numalbar,numlinea),
  KEY FK_rbodfacturas_lineas (numalbar,numlinea),
  CONSTRAINT rbodfacturas_lineas_ibfk_1 FOREIGN KEY (codtipom, numfactu, fecfactu, numalbar) REFERENCES rbodfacturas_alb (codtipom, numfactu, fecfactu, numalbar) ON UPDATE CASCADE,
  CONSTRAINT rbodfacturas_lineas_ibfk_2 FOREIGN KEY (numalbar, numlinea) REFERENCES rbodalbaran_variedad (numalbar, numlinea) ON UPDATE CASCADE
) ENGINE=InnoDB DEFAULT CHARSET=latin1;     

CREATE TABLE rbodfacturas_lineas_copy (
  codtipom varchar(3) NOT NULL,
  numfactu int(7) unsigned NOT NULL,
  fecfactu date NOT NULL,
  numalbar int(7) unsigned NOT NULL default '0',
  numlinea smallint(5) unsigned NOT NULL default '0',
  codvarie int(6) unsigned NOT NULL,
  unidades decimal(12,2) NOT NULL,
  cantidad decimal(12,2) NOT NULL,
  precioar decimal(10,4) NOT NULL,
  dtolinea decimal(4,2) default NULL,
  importel decimal(12,2) NOT NULL,
  ampliaci varchar(60) default NULL,
  codigiva smallint(2) NOT NULL
) ENGINE=InnoDB DEFAULT CHARSET=latin1;     

CREATE TABLE rbonifentradas (
  codvarie int(6) unsigned NOT NULL,
  fechaent date NOT NULL,
  porcbonif decimal(6,2) NOT NULL,
  PRIMARY KEY  (codvarie,fechaent),
  CONSTRAINT rbonifentradas_ibfk_1 FOREIGN KEY (codvarie) REFERENCES variedades (codvarie) ON UPDATE CASCADE
) ENGINE=InnoDB DEFAULT CHARSET=latin1;     

CREATE TABLE rbonifica (
  codvarie int(6) unsigned NOT NULL,
  PRIMARY KEY  (codvarie),
  CONSTRAINT rbonifica_ibfk_1 FOREIGN KEY (codvarie) REFERENCES variedades (codvarie) ON UPDATE CASCADE
) ENGINE=InnoDB DEFAULT CHARSET=latin1;     

CREATE TABLE rbonifica_lineas (
  codvarie int(6) unsigned NOT NULL,
  numlinea smallint(3) unsigned NOT NULL,
  desdegrado decimal(10,4) default NULL,
  hastagrado decimal(10,4) default NULL,
  porcentaje decimal(5,2) default NULL,
  PRIMARY KEY  (codvarie,numlinea),
  KEY FK_bonifica_lineas (codvarie,numlinea),
  CONSTRAINT rbonifica_lineas_ibfk_1 FOREIGN KEY (codvarie) REFERENCES rbonifica (codvarie) ON UPDATE CASCADE
) ENGINE=InnoDB DEFAULT CHARSET=latin1;     

CREATE TABLE rcabfactalmz (
  tipofichero tinyint(1) unsigned NOT NULL COMMENT '0=aceitec 1=aceitunc 2=stockc',
  numfactu int(7) unsigned NOT NULL,
  fecfactu date NOT NULL,
  codsocio int(6) unsigned NOT NULL,
  baseimpo decimal(8,2) NOT NULL,
  tipoiva smallint(2) NOT NULL,
  porc_iva decimal(4,2) NOT NULL,
  imporiva decimal(8,2) NOT NULL,
  tipoirpf tinyint(1) NOT NULL,
  basereten decimal(8,2) default NULL,
  porc_ret decimal(4,2) default NULL,
  impreten decimal(8,2) default NULL,
  totalfac decimal(8,2) default NULL,
  impreso tinyint(1) default NULL,
  contabilizado tinyint(1) default NULL,
  PRIMARY KEY  (tipofichero,numfactu,fecfactu,codsocio),
  KEY FK_rcabfactalmz (codsocio),
  CONSTRAINT rcabfactalmz_ibfk_1 FOREIGN KEY (codsocio) REFERENCES rsocios (codsocio) ON UPDATE CASCADE
) ENGINE=InnoDB DEFAULT CHARSET=latin1;     

CREATE TABLE rcafter (
  codsocio int(6) unsigned NOT NULL,
  numfactu varchar(10) NOT NULL,
  fecfactu date NOT NULL default '0000-00-00',
  fecrecep date NOT NULL default '0000-00-00',
  nomsocio varchar(40) NOT NULL,
  domsocio varchar(40) NOT NULL,
  codpobla varchar(6) NOT NULL default '',
  pobsocio varchar(30) NOT NULL,
  prosocio varchar(30) NOT NULL,
  nifsocio varchar(15) NOT NULL,
  telsocio varchar(15) NOT NULL,
  codforpa smallint(3) unsigned NOT NULL default '0',
  brutofac decimal(12,2) NOT NULL default '0.00',
  dtoppago decimal(4,2) NOT NULL default '0.00',
  dtognral decimal(4,2) NOT NULL default '0.00',
  impppago decimal(12,2) NOT NULL default '0.00',
  impgnral decimal(12,2) NOT NULL default '0.00',
  baseiva1 decimal(12,2) NOT NULL default '0.00',
  baseiva2 decimal(12,2) default NULL,
  baseiva3 decimal(12,2) default NULL,
  tipoiva1 tinyint(1) unsigned default NULL,
  tipoiva2 tinyint(1) unsigned default NULL,
  tipoiva3 tinyint(1) unsigned default NULL,
  porciva1 decimal(4,2) default NULL,
  porciva2 decimal(4,2) default NULL,
  porciva3 decimal(4,2) default NULL,
  porcrec1 decimal(4,2) NOT NULL default '0.00',
  porcrec2 decimal(4,2) NOT NULL default '0.00',
  porcrec3 decimal(4,2) NOT NULL default '0.00',
  impoiva1 decimal(12,2) NOT NULL default '0.00',
  impoiva2 decimal(12,2) default NULL,
  impoiva3 decimal(12,2) default NULL,
  imporec1 decimal(12,2) NOT NULL default '0.00',
  imporec2 decimal(12,2) NOT NULL default '0.00',
  imporec3 decimal(12,2) NOT NULL default '0.00',
  retfacpr decimal(6,2) default NULL,
  basereten decimal(12,2) default NULL,
  trefacpr decimal(12,2) default NULL,
  totalfac decimal(12,2) NOT NULL default '0.00',
  intconta tinyint(1) unsigned NOT NULL default '0',
  intracom tinyint(1) unsigned NOT NULL default '0',
  esanticipo tinyint(1) unsigned NOT NULL default '0',
  porccorredor decimal(4,2) NOT NULL default '0.00',
  concepcargo smallint(3) unsigned default NULL,
  impcargo decimal(12,2) default NULL,
  PRIMARY KEY  (codsocio,numfactu,fecfactu),
  KEY FK_rcafter (codforpa),
  KEY FK_rcafter3 (concepcargo),
  CONSTRAINT rcafter_ibfk_1 FOREIGN KEY (concepcargo) REFERENCES fvarconce (codconce) ON UPDATE CASCADE,
  CONSTRAINT tcafter_ibfk_1 FOREIGN KEY (codsocio) REFERENCES rsocios (codsocio),
  CONSTRAINT tcafter_ibfk_2 FOREIGN KEY (codforpa) REFERENCES forpago (codforpa)
) ENGINE=InnoDB DEFAULT CHARSET=latin1;     

CREATE TABLE rcalidad (
  codvarie int(6) unsigned NOT NULL default '0',
  codcalid smallint(2) unsigned NOT NULL,
  nomcalid varchar(12) NOT NULL,
  nomcalab varchar(3) NOT NULL,
  tipcalid tinyint(1) NOT NULL default '0' COMMENT '0=Normal 1=Destrio (solo una) 2= Venta campo 3=Merma  4=Pequeño',
  tipcalid1 tinyint(1) NOT NULL default '0' COMMENT '0=Comercial 1=No comercial 2=Retirada',
  nomcalibrador1 varchar(30) NOT NULL,
  nomcalibrador2 varchar(30) default NULL,
  gastosrec tinyint(1) NOT NULL default '0' COMMENT '0=no 1=si',
  eurrecsoc decimal(5,4) default NULL,
  eurreccoop decimal(5,4) default NULL,
  PRIMARY KEY  (codvarie,codcalid),
  CONSTRAINT rcalidad_ibfk_1 FOREIGN KEY (codvarie) REFERENCES variedades (codvarie)
) ENGINE=InnoDB DEFAULT CHARSET=latin1;     

CREATE TABLE rcalidad_calibrador (
  codvarie int(6) unsigned NOT NULL,
  codcalid smallint(2) unsigned NOT NULL,
  numlinea smallint(2) unsigned NOT NULL,
  nomcalibrador1 varchar(30) NOT NULL,
  nomcalibrador2 varchar(30) NOT NULL,
  nomcalibrador3 varchar(30) default NULL,
  PRIMARY KEY  (codvarie,codcalid,numlinea),
  CONSTRAINT rcalidad_calibrador_ibfk_1 FOREIGN KEY (codvarie, codcalid) REFERENCES rcalidad (codvarie, codcalid) ON UPDATE CASCADE
) ENGINE=InnoDB DEFAULT CHARSET=latin1;     

CREATE TABLE rcampos (
  codcampo int(8) unsigned NOT NULL,
  codsocio int(6) unsigned NOT NULL,
  codpropiet int(6) unsigned NOT NULL,
  codvarie int(6) unsigned NOT NULL,
  codparti smallint(4) unsigned NOT NULL,
  fecaltas date NOT NULL,
  fecbajas date default NULL,
  anoplant smallint(4) default NULL,
  nroarbol smallint(4) default NULL,
  supsigpa decimal(8,4) NOT NULL,
  supcoope decimal(8,4) NOT NULL,
  supcatas decimal(8,4) NOT NULL,
  canaforo int(6) default NULL,
  codsitua smallint(2) unsigned NOT NULL,
  poligono smallint(3) NOT NULL,
  parcela int(6) NOT NULL,
  subparce varchar(2) default NULL,
  asegurado tinyint(1) NOT NULL COMMENT '0=No 1=si',
  kilosase int(6) default NULL,
  tipoparc tinyint(1) NOT NULL COMMENT '0=Rustica 1=Urbana',
  recintos smallint(3) NOT NULL,
  numeroid int(8) default NULL,
  latitud decimal(8,6) default NULL,
  longitud decimal(8,6) default NULL,
  observac varchar(250) default NULL,
  nrocampo int(7) NOT NULL COMMENT 'Codcampo MB',
  recolect tinyint(4) NOT NULL COMMENT '0=Coop 1=Socio',
  codtierra smallint(2) unsigned default NULL,
  codplanta smallint(2) unsigned default NULL,
  coddesa smallint(2) unsigned default NULL,
  codriego smallint(2) unsigned default NULL,
  codcapat smallint(4) unsigned default NULL,
  pagounico tinyint(1) unsigned NOT NULL default '0',
  entregafichaculti tinyint(1) unsigned NOT NULL default '0',
  codproce smallint(2) unsigned default NULL,
  codpatron smallint(2) unsigned default NULL,
  codseguro varchar(2) default NULL,
  conpoda tinyint(1) NOT NULL default '0' COMMENT '0=No 1=Si',
  conresiduos tinyint(1) NOT NULL default '0' COMMENT '0=No 1=Si',
  nrollave int(7) default NULL,
  costeseguro decimal(10,2) default NULL,
  supculti decimal(8,4) NOT NULL,
  tipocampo tinyint(1) default '0' COMMENT '0=Normal 1=Comercio',
  codseguroant varchar(2) default NULL,
  aseguradoant tinyint(1) NOT NULL default '0',
  kilosaseant int(6) default NULL,
  costeseguroant decimal(10,2) default NULL,
  codzonas smallint(4) unsigned NOT NULL,
  codigoggap varchar(4) default NULL,
  codclien int(6) unsigned default NULL,
  dtoprecio decimal(5,2) default NULL,
  refercatas varchar(20) default NULL,
  esnaturane tinyint(1) default '0',
  acabadorecol tinyint(1) default '0',
  fecrevision date default NULL,
  fecaltapropera date default NULL COMMENT 'Fecha Alta Programa Operativo',
  PRIMARY KEY  (codcampo),
  KEY FK_rcampos (codsocio),
  KEY FK_rcampos1 (codpropiet),
  KEY FK_rcampos2 (codvarie),
  KEY FK_rcampos4 (codparti),
  KEY FK_rcampos5 (codsitua),
  KEY FK_rcampos3 (codtierra),
  KEY FK_rcampos6 (codplanta),
  KEY FK_rcampos8 (coddesa),
  KEY FK_rcampos9 (codriego),
  KEY FK_rcampos10 (codcapat),
  KEY FK_rcampos11 (codproce),
  KEY FK_rcampos12 (codpatron),
  KEY FK_rcampos13 (codseguro),
  KEY FK_rcampos14 (codzonas),
  KEY FK_rcampos15 (entregafichaculti),
  KEY FK_rcampos16 (codigoggap),
  CONSTRAINT rcampos_ibfk_1 FOREIGN KEY (codsocio) REFERENCES rsocios (codsocio) ON UPDATE CASCADE,
  CONSTRAINT rcampos_ibfk_10 FOREIGN KEY (codcapat) REFERENCES rcapataz (codcapat) ON UPDATE CASCADE,
  CONSTRAINT rcampos_ibfk_11 FOREIGN KEY (codproce) REFERENCES rproceriego (codproce) ON UPDATE CASCADE,
  CONSTRAINT rcampos_ibfk_12 FOREIGN KEY (codpatron) REFERENCES rpatronpie (codpatron) ON UPDATE CASCADE,
  CONSTRAINT rcampos_ibfk_13 FOREIGN KEY (codseguro) REFERENCES rseguroopcion (codseguro) ON UPDATE CASCADE,
  CONSTRAINT rcampos_ibfk_14 FOREIGN KEY (codzonas) REFERENCES rzonas (codzonas) ON UPDATE CASCADE,
  CONSTRAINT rcampos_ibfk_15 FOREIGN KEY (entregafichaculti) REFERENCES rfichculti (codtipo) ON UPDATE CASCADE,
  CONSTRAINT rcampos_ibfk_16 FOREIGN KEY (codigoggap) REFERENCES rglobalgap (codigo) ON UPDATE CASCADE,
  CONSTRAINT rcampos_ibfk_2 FOREIGN KEY (codpropiet) REFERENCES rsocios (codsocio) ON UPDATE CASCADE,
  CONSTRAINT rcampos_ibfk_3 FOREIGN KEY (codvarie) REFERENCES variedades (codvarie) ON UPDATE CASCADE,
  CONSTRAINT rcampos_ibfk_4 FOREIGN KEY (codparti) REFERENCES rpartida (codparti) ON UPDATE CASCADE,
  CONSTRAINT rcampos_ibfk_5 FOREIGN KEY (codsitua) REFERENCES rsituacioncampo (codsitua) ON UPDATE CASCADE,
  CONSTRAINT rcampos_ibfk_6 FOREIGN KEY (codtierra) REFERENCES rtierra (codtierra) ON UPDATE CASCADE,
  CONSTRAINT rcampos_ibfk_7 FOREIGN KEY (codplanta) REFERENCES rplantacion (codplanta) ON UPDATE CASCADE,
  CONSTRAINT rcampos_ibfk_8 FOREIGN KEY (coddesa) REFERENCES rdesarrollo (coddesa) ON UPDATE CASCADE,
  CONSTRAINT rcampos_ibfk_9 FOREIGN KEY (codriego) REFERENCES rriego (codriego) ON UPDATE CASCADE
) ENGINE=InnoDB DEFAULT CHARSET=latin1 ROW_FORMAT=DYNAMIC COMMENT='InnoDB free: 8192 kB';     

CREATE TABLE rcampos_clasif (
  codcampo int(8) unsigned NOT NULL,
  codvarie int(6) unsigned NOT NULL,
  codcalid smallint(2) unsigned NOT NULL,
  muestra decimal(5,2) NOT NULL,
  PRIMARY KEY  (codcampo,codcalid),
  KEY FK_rcampos_clasif (codvarie,codcalid),
  CONSTRAINT rcampos_clasif_ibfk_1 FOREIGN KEY (codcampo) REFERENCES rcampos (codcampo) ON UPDATE CASCADE,
  CONSTRAINT rcampos_clasif_ibfk_2 FOREIGN KEY (codvarie, codcalid) REFERENCES rcalidad (codvarie, codcalid) ON UPDATE CASCADE
) ENGINE=InnoDB DEFAULT CHARSET=latin1;     

CREATE TABLE rcampos_cooprop (
  codcampo int(8) unsigned NOT NULL,
  numlinea smallint(3) unsigned NOT NULL,
  codsocio int(6) unsigned NOT NULL,
  porcentaje decimal(5,2) NOT NULL,
  PRIMARY KEY  (codcampo,numlinea),
  CONSTRAINT rcampos_cooprop_ibfk_1 FOREIGN KEY (codcampo) REFERENCES rcampos (codcampo) ON UPDATE CASCADE
) ENGINE=InnoDB DEFAULT CHARSET=latin1;     

CREATE TABLE rcampos_gastos (
  codcampo int(8) unsigned NOT NULL,
  numlinea int(6) unsigned NOT NULL,
  codgasto smallint(2) unsigned NOT NULL,
  fecha date NOT NULL,
  importe decimal(12,2) NOT NULL,
  contabilizado tinyint(1) NOT NULL default '0',
  PRIMARY KEY  (codcampo,numlinea),
  KEY FK_rcampos_gastos1 (codgasto),
  CONSTRAINT rcampos_gastos_ibfk_1 FOREIGN KEY (codcampo) REFERENCES rcampos (codcampo) ON UPDATE CASCADE,
  CONSTRAINT rcampos_gastos_ibfk_2 FOREIGN KEY (codgasto) REFERENCES rconcepgasto (codgasto) ON UPDATE CASCADE
) ENGINE=InnoDB DEFAULT CHARSET=latin1;     

CREATE TABLE rcampos_hco (
  codcampo int(8) unsigned NOT NULL,
  numlinea smallint(3) unsigned NOT NULL,
  codsocio int(6) unsigned NOT NULL,
  fechaalta date NOT NULL,
  fechabaja date default NULL,
  codincid smallint(4) unsigned NOT NULL,
  PRIMARY KEY  (codcampo,numlinea),
  KEY FK_rcampos_hco1 (codincid),
  KEY FK_rcampos_hco2 (codcampo),
  KEY FK_rcampos_hco3 (codsocio),
  CONSTRAINT rcampos_hco_ibfk_1 FOREIGN KEY (codincid) REFERENCES rincidencia (codincid) ON UPDATE CASCADE,
  CONSTRAINT rcampos_hco_ibfk_2 FOREIGN KEY (codcampo) REFERENCES rcampos (codcampo) ON UPDATE CASCADE,
  CONSTRAINT rcampos_hco_ibfk_3 FOREIGN KEY (codsocio) REFERENCES rsocios (codsocio) ON UPDATE CASCADE
) ENGINE=InnoDB DEFAULT CHARSET=latin1;     

CREATE TABLE rcampos_parcelas (
  codcampo int(8) unsigned NOT NULL,
  numlinea smallint(4) unsigned NOT NULL,
  poligono smallint(3) NOT NULL,
  parcela int(6) NOT NULL,
  subparce varchar(2) default NULL,
  recintos smallint(3) NOT NULL,
  codsigpa int(6) default NULL,
  supsigpa decimal(8,4) NOT NULL,
  supcultsigpa decimal(8,4) NOT NULL,
  supcatas decimal(8,4) NOT NULL,
  supcultcatas decimal(8,4) NOT NULL,
  PRIMARY KEY  (codcampo,numlinea),
  CONSTRAINT rcampos_parcelas_ibfk_1 FOREIGN KEY (codcampo) REFERENCES rcampos (codcampo) ON UPDATE CASCADE
) ENGINE=InnoDB DEFAULT CHARSET=latin1;     

CREATE TABLE rcampos_revision (
  codcampo int(8) unsigned NOT NULL,
  numlinea int(11) NOT NULL,
  fecha date NOT NULL,
  tecnico varchar(50) default NULL,
  observac text,
  PRIMARY KEY  (codcampo,numlinea)
) ENGINE=InnoDB DEFAULT CHARSET=latin1;     

CREATE TABLE rcampos_seguros (
  codcampo int(8) unsigned NOT NULL,
  numlinea smallint(3) unsigned NOT NULL,
  fecha date NOT NULL,
  codincid smallint(4) unsigned NOT NULL,
  kilos int(6) default NULL,
  importe decimal(5,2) default NULL,
  fechapago date default NULL,
  essiniestro tinyint(1) NOT NULL default '0',
  PRIMARY KEY  (codcampo,numlinea),
  KEY FK_rcampos_seguros (codincid),
  CONSTRAINT rcampos_seguros_ibfk_1 FOREIGN KEY (codincid) REFERENCES rincidencia (codincid) ON UPDATE CASCADE,
  CONSTRAINT rcampos_serguros_ibfk_1 FOREIGN KEY (codcampo) REFERENCES rcampos (codcampo) ON UPDATE CASCADE
) ENGINE=InnoDB DEFAULT CHARSET=latin1;     

CREATE TABLE rcapataz (
  codcapat smallint(4) unsigned NOT NULL,
  nomcapat varchar(30) NOT NULL,
  codigoett smallint(4) default NULL,
  codtraba int(6) default NULL,
  PRIMARY KEY  (codcapat)
) ENGINE=InnoDB DEFAULT CHARSET=latin1;     

CREATE TABLE rclasifauto (
  numnotac int(7) unsigned NOT NULL default '0',
  codsocio int(6) default NULL,
  codcampo int(8) NOT NULL,
  codvarie int(6) default NULL,
  fechacla datetime default NULL,
  kilosnet int(6) NOT NULL default '0',
  kilosdes int(6) default NULL,
  kilospod int(6) default NULL,
  kilospeq int(6) default NULL,
  observac varchar(100) default NULL,
  situacion tinyint(1) NOT NULL default '0',
  porcdest decimal(5,2) default NULL,
  ordinal int(7) default NULL
) ENGINE=InnoDB DEFAULT CHARSET=latin1;     

CREATE TABLE rclasifauto_clasif (
  numnotac int(7) unsigned NOT NULL,
  codvarie int(6) NOT NULL,
  codcalid smallint(2) NOT NULL,
  kiloscal decimal(6,2) NOT NULL,
  codcampo int(8) default NULL,
  codsocio int(6) default NULL,
  fechacla date default NULL,
  ordinal int(7) default NULL
) ENGINE=InnoDB DEFAULT CHARSET=latin1;     

CREATE TABLE rclasifauto_plagas (
  numnotac int(7) NOT NULL,
  codvarie int(6) NOT NULL,
  codsocio int(6) NOT NULL,
  codcampo int(8) NOT NULL,
  fechacla date NOT NULL,
  codplaga smallint(4) NOT NULL,
  ordinal int(7) default NULL
) ENGINE=InnoDB DEFAULT CHARSET=latin1;     

CREATE TABLE rclasifica (
  numnotac int(7) unsigned NOT NULL,
  fechaent date NOT NULL,
  horaentr datetime NOT NULL,
  codvarie int(6) unsigned NOT NULL,
  codsocio int(6) unsigned NOT NULL,
  codcampo int(8) unsigned NOT NULL,
  tipoentr tinyint(1) NOT NULL COMMENT '0=Normal 1=V.Campo 2=P.Integrado 3=Industria Directo',
  recolect tinyint(4) NOT NULL COMMENT '0=Coop. 1=Socio',
  codtrans varchar(10) default NULL,
  codcapat smallint(4) unsigned default NULL,
  codtarif smallint(2) unsigned default NULL,
  kilosbru int(6) NOT NULL,
  numcajon int(6) NOT NULL,
  kilosnet int(6) NOT NULL,
  observac varchar(250) default NULL,
  imptrans decimal(6,2) default NULL,
  impacarr decimal(6,2) default NULL,
  imprecol decimal(6,2) default NULL,
  imppenal decimal(6,2) default NULL,
  tiporecol tinyint(1) NOT NULL COMMENT '0=Horas 1=Destajo',
  horastra decimal(6,2) default NULL,
  numtraba smallint(2) default NULL,
  numalbar int(7) default NULL,
  fecalbar date default NULL,
  impreso tinyint(1) NOT NULL,
  prestimado decimal(10,4) default NULL,
  transportadopor tinyint(1) NOT NULL default '0' COMMENT '0=Coop. 1=Socio',
  kilostra int(6) NOT NULL default '0',
  PRIMARY KEY  (numnotac),
  KEY FK_rclasifica (codsocio),
  KEY FK_rclasifica1 (codvarie),
  KEY FK_rclasifica2 (codcampo),
  KEY FK_rclasifica4 (codcapat),
  KEY FK_rclasifica5 (codtrans),
  KEY FK_rclasifica6 (codtarif),
  CONSTRAINT rclasifica_ibfk_1 FOREIGN KEY (codsocio) REFERENCES rsocios (codsocio) ON UPDATE CASCADE,
  CONSTRAINT rclasifica_ibfk_2 FOREIGN KEY (codvarie) REFERENCES variedades (codvarie) ON DELETE NO ACTION ON UPDATE CASCADE,
  CONSTRAINT rclasifica_ibfk_3 FOREIGN KEY (codcampo) REFERENCES rcampos (codcampo) ON UPDATE CASCADE,
  CONSTRAINT rclasifica_ibfk_4 FOREIGN KEY (codcapat) REFERENCES rcapataz (codcapat) ON UPDATE CASCADE,
  CONSTRAINT rclasifica_ibfk_5 FOREIGN KEY (codtrans) REFERENCES rtransporte (codtrans) ON UPDATE CASCADE,
  CONSTRAINT rclasifica_ibfk_6 FOREIGN KEY (codtarif) REFERENCES rtarifatra (codtarif) ON UPDATE CASCADE
) ENGINE=InnoDB DEFAULT CHARSET=latin1;     

CREATE TABLE rclasifica_clasif (
  numnotac int(7) unsigned NOT NULL,
  codvarie int(6) unsigned NOT NULL,
  codcalid smallint(2) unsigned NOT NULL,
  muestra decimal(8,2) default NULL,
  kilosnet int(6) default NULL,
  PRIMARY KEY  (numnotac,codvarie,codcalid),
  KEY FK_rcampos_clasif (codvarie,codcalid),
  CONSTRAINT rclasifica_clasif_ibfk_1 FOREIGN KEY (numnotac) REFERENCES rclasifica (numnotac),
  CONSTRAINT rclasifica_clasif_ibfk_2 FOREIGN KEY (codvarie) REFERENCES variedades (codvarie),
  CONSTRAINT rclasifica_clasif_ibfk_3 FOREIGN KEY (codvarie, codcalid) REFERENCES rcalidad (codvarie, codcalid) ON UPDATE CASCADE
) ENGINE=InnoDB DEFAULT CHARSET=latin1;     

CREATE TABLE rclasifica_imp (
  numnotac int(7) unsigned NOT NULL,
  fechaent date NOT NULL,
  codvarie int(6) unsigned default NULL,
  codsocio int(6) unsigned default NULL,
  codcampo int(8) unsigned default NULL,
  numcajon int(6) NOT NULL,
  kilosnet int(6) NOT NULL,
  procesado tinyint(1) NOT NULL default '0',
  PRIMARY KEY  (numnotac)
) ENGINE=InnoDB DEFAULT CHARSET=latin1;     

CREATE TABLE rclasifica_incidencia (
  numnotac int(7) unsigned NOT NULL,
  codincid smallint(4) unsigned NOT NULL,
  PRIMARY KEY  (numnotac,codincid),
  KEY FK_rclasifica_incidencia (codincid),
  CONSTRAINT rclasifica_incidencia_ibfk_1 FOREIGN KEY (codincid) REFERENCES rincidencia (codincid) ON UPDATE CASCADE,
  CONSTRAINT rclasifica_incidencia_ibfk_2 FOREIGN KEY (numnotac) REFERENCES rclasifica (numnotac) ON UPDATE CASCADE
) ENGINE=InnoDB DEFAULT CHARSET=latin1;     

CREATE TABLE rconcepgasto (
  codgasto smallint(2) unsigned NOT NULL,
  nomgasto varchar(40) default NULL,
  tipogasto tinyint(1) unsigned NOT NULL default '0' COMMENT '0=Gasto de Entrada 1=Gasto de Factura',
  codmacta varchar(10) default NULL,
  codmacgto varchar(10) default NULL,
  PRIMARY KEY  (codgasto)
) ENGINE=InnoDB DEFAULT CHARSET=latin1;     

CREATE TABLE rconcepgastonom (
  codgasto smallint(2) unsigned NOT NULL,
  nomgasto varchar(40) default NULL,
  PRIMARY KEY  (codgasto)
) ENGINE=InnoDB DEFAULT CHARSET=latin1;     

CREATE TABLE rcontrol (
  codvarie int(6) unsigned NOT NULL,
  fechacla datetime NOT NULL,
  codsocio int(6) unsigned NOT NULL,
  codcampo int(8) NOT NULL,
  nroclasif int(6) NOT NULL,
  ordinal int(6) NOT NULL,
  kilosman int(6) default NULL,
  porcdest decimal(6,2) default NULL,
  PRIMARY KEY  (codvarie,fechacla,codsocio,codcampo,nroclasif,ordinal),
  KEY FK_rcontroldestrio1 (codsocio),
  CONSTRAINT rcontrol_ibfk_1 FOREIGN KEY (codvarie) REFERENCES variedades (codvarie) ON UPDATE CASCADE,
  CONSTRAINT rcontrol_ibfk_2 FOREIGN KEY (codsocio) REFERENCES rsocios (codsocio) ON UPDATE CASCADE
) ENGINE=InnoDB DEFAULT CHARSET=latin1;     

CREATE TABLE rcontrol_plagas (
  codvarie int(6) unsigned NOT NULL,
  fechacla datetime NOT NULL,
  codsocio int(6) unsigned NOT NULL,
  codcampo int(8) NOT NULL,
  nroclasif int(6) NOT NULL,
  ordinal int(6) NOT NULL,
  idplaga smallint(3) NOT NULL,
  kilosplaga1 int(7) default NULL,
  kilosplaga2 int(7) default NULL,
  kilosplaga3 int(7) default NULL,
  kilosplaga4 int(7) default NULL,
  kilosplaga5 int(7) default NULL,
  kilosplaga6 int(7) default NULL,
  kilosplaga7 int(7) default NULL,
  kilosplaga8 int(7) default NULL,
  kilosplaga9 int(7) default NULL,
  kilosplaga10 int(7) default NULL,
  kilosplaga11 int(7) default NULL,
  PRIMARY KEY  (codvarie,fechacla,codsocio,codcampo,nroclasif,ordinal,idplaga),
  CONSTRAINT rcontrol_plagas_ibfk_1 FOREIGN KEY (codvarie, fechacla, codsocio, codcampo, nroclasif, ordinal) REFERENCES rcontrol (codvarie, fechacla, codsocio, codcampo, nroclasif, ordinal) ON UPDATE CASCADE
) ENGINE=InnoDB DEFAULT CHARSET=latin1;     

CREATE TABLE rcoope (
  codcoope smallint(2) unsigned NOT NULL,
  nomcoope varchar(40) NOT NULL,
  domcoope varchar(35) NOT NULL,
  codposta varchar(6) NOT NULL,
  pobcoope varchar(30) NOT NULL,
  procoope varchar(30) NOT NULL,
  cifcoope varchar(9) NOT NULL,
  telcoope varchar(10) default NULL,
  faxcoope varchar(10) default NULL,
  maicoope varchar(40) default NULL,
  wwwcoope varchar(30) default NULL,
  codtipomant varchar(3) NOT NULL,
  codtipomliq varchar(3) NOT NULL,
  codtipomantvc varchar(3) NOT NULL,
  codtipomliqvc varchar(3) NOT NULL,
  porcgast decimal(4,2) default NULL,
  codtipomantalmz varchar(3) NOT NULL,
  codtipomliqalmz varchar(3) NOT NULL,
  codtipomfacalmz varchar(3) NOT NULL,
  codtipomfacbod varchar(3) NOT NULL,
  codtipomantbod varchar(3) NOT NULL,
  codtipomliqbod varchar(3) NOT NULL,
  PRIMARY KEY  (codcoope)
) ENGINE=InnoDB DEFAULT CHARSET=latin1;     

CREATE TABLE rcopropiedad (
  codpropiedad int(7) NOT NULL,
  numlinea int(7) NOT NULL,
  codcampo int(8) unsigned NOT NULL,
  porcentaje decimal(5,2) NOT NULL,
  PRIMARY KEY  (codpropiedad,numlinea),
  KEY FK_rcopropiedad (codcampo),
  CONSTRAINT rcopropiedad_ibfk_1 FOREIGN KEY (codcampo) REFERENCES rcampos (codcampo) ON UPDATE CASCADE
) ENGINE=InnoDB DEFAULT CHARSET=latin1;     

CREATE TABLE rcuadrilla (
  codcuadrilla int(6) unsigned NOT NULL,
  codcapat smallint(4) unsigned NOT NULL,
  tipocuadrilla tinyint(1) unsigned NOT NULL default '0' COMMENT '0=de recoleccion 1=de adv',
  PRIMARY KEY  (codcuadrilla),
  KEY FK_rcuadrilla (codcapat),
  CONSTRAINT rcuadrilla_ibfk_1 FOREIGN KEY (codcapat) REFERENCES rcapataz (codcapat) ON UPDATE CASCADE
) ENGINE=InnoDB DEFAULT CHARSET=latin1;     

CREATE TABLE rcuadrilla_trabajador (
  codcuadrilla int(6) unsigned NOT NULL,
  numlinea int(6) NOT NULL,
  codtraba int(6) NOT NULL,
  PRIMARY KEY  (codcuadrilla,numlinea),
  KEY FK_rcuadrilla_trabajador (codtraba),
  CONSTRAINT rcuadrilla_trabajador_ibfk_1 FOREIGN KEY (codcuadrilla) REFERENCES rcuadrilla (codcuadrilla) ON UPDATE CASCADE,
  CONSTRAINT rcuadrilla_trabajador_ibfk_2 FOREIGN KEY (codtraba) REFERENCES straba (codtraba) ON UPDATE CASCADE
) ENGINE=InnoDB DEFAULT CHARSET=latin1;     

CREATE TABLE rdeposito (
  coddeposito smallint(4) unsigned NOT NULL,
  nomdeposito varchar(30) NOT NULL,
  PRIMARY KEY  (coddeposito)
) ENGINE=InnoDB DEFAULT CHARSET=latin1;     

CREATE TABLE rdesarrollo (
  coddesa smallint(2) unsigned NOT NULL,
  nomdesa varchar(30) NOT NULL,
  PRIMARY KEY  (coddesa)
) ENGINE=InnoDB DEFAULT CHARSET=latin1;     

CREATE TABLE rentradas (
  numnotac int(7) unsigned NOT NULL,
  fechaent date NOT NULL,
  horaentr datetime NOT NULL,
  codvarie int(6) NOT NULL,
  codsocio int(6) NOT NULL,
  codcampo int(8) NOT NULL,
  tipoentr tinyint(1) NOT NULL COMMENT '0=Normal 1=V.Campo 2=P.Integrado 3=Industria Directo 4=Retirada 5=Vta Comercio',
  recolect tinyint(4) NOT NULL COMMENT '0=Coop. 1=Socio',
  codtrans varchar(10) default NULL,
  codcapat smallint(4) default NULL,
  codtarif smallint(2) default NULL,
  kilosbru int(6) NOT NULL,
  numcajo1 smallint(3) default NULL,
  numcajo2 smallint(3) default NULL,
  numcajo3 smallint(3) default NULL,
  numcajo4 smallint(3) default NULL,
  numcajo5 smallint(3) default NULL,
  taracaja1 int(6) default NULL,
  taracaja2 int(6) default NULL,
  taracaja3 int(6) default NULL,
  taracaja4 int(6) default NULL,
  taracaja5 int(6) default NULL,
  taravehi int(6) default NULL,
  kilosnet int(6) NOT NULL,
  nropesada int(7) default NULL,
  numlinea int(6) default NULL,
  transportadopor tinyint(1) NOT NULL default '0' COMMENT '0=Coop. 1=Socio',
  kilostra int(6) NOT NULL default '0',
  otrastaras int(6) default NULL,
  numcajosa1 smallint(3) default NULL,
  numcajosa2 smallint(3) default NULL,
  numcajosa3 smallint(3) default NULL,
  numcajosa4 smallint(3) default NULL,
  numcajosa5 smallint(3) default NULL,
  taracajasa1 int(6) default NULL,
  taracajasa2 int(6) default NULL,
  taracajasa3 int(6) default NULL,
  taracajasa4 int(6) default NULL,
  taracajasa5 int(6) default NULL,
  taravehisa int(6) default NULL,
  otrastarasa int(6) default NULL,
  zona int(10) default NULL,
  altura smallint(3) default NULL,
  ausenciaplagas tinyint(1) NOT NULL default '1',
  tipocajo1 smallint(3) default NULL,
  tipocajo2 smallint(3) default NULL,
  tipocajo3 smallint(3) default NULL,
  tipocajo4 smallint(3) default NULL,
  tipocajo5 smallint(3) default NULL,
  PRIMARY KEY  (numnotac)
) ENGINE=InnoDB DEFAULT CHARSET=latin1;     

CREATE TABLE rfactsoc (
  codtipom char(3) NOT NULL COMMENT '0=A 1=L 2=R 3=Su 4=Si 5=I 6=Tra',
  numfactu int(7) unsigned NOT NULL,
  fecfactu date NOT NULL,
  codsocio int(6) unsigned NOT NULL,
  baseimpo decimal(8,2) NOT NULL,
  tipoiva smallint(2) NOT NULL,
  porc_iva decimal(4,2) NOT NULL,
  imporiva decimal(8,2) NOT NULL,
  tipoirpf tinyint(1) NOT NULL COMMENT 'Como rsocios',
  basereten decimal(8,2) default NULL,
  porc_ret decimal(4,2) default NULL,
  impreten decimal(8,2) default NULL,
  baseaport decimal(8,2) default NULL,
  porc_apo decimal(4,2) default NULL,
  impapor decimal(8,2) default NULL,
  totalfac decimal(8,2) NOT NULL,
  impreso tinyint(1) NOT NULL default '0',
  contabilizado tinyint(1) NOT NULL default '0',
  pasaridoc tinyint(1) NOT NULL default '0' COMMENT 'Descontado en liquidaciÃ³n',
  esanticipogasto tinyint(1) NOT NULL default '0' COMMENT 'Es Anticipo Gasto Recoleccion',
  rectif_codtipom char(3) default NULL,
  rectif_numfactu int(7) default NULL,
  rectif_fecfactu date default NULL,
  rectif_motivo varchar(100) default NULL,
  esretirada tinyint(1) NOT NULL default '0',
  pdtenrofact tinyint(1) NOT NULL default '0',
  numfacrec varchar(10) default NULL,
  esliqcomplem tinyint(1) NOT NULL default '0',
  enfacturae tinyint(1) unsigned NOT NULL default '0',
  codforpa smallint(3) unsigned default NULL,
  porccorredor decimal(4,2) default NULL,
  tipoprecio tinyint(1) unsigned NOT NULL default '0' COMMENT '0=normal /1 =con iva c/ret / 2=con iva s/ret',
  PRIMARY KEY  (codtipom,numfactu,fecfactu)
) ENGINE=InnoDB DEFAULT CHARSET=latin1;     

CREATE TABLE rfactsoc_albaran (
  codtipom char(3) NOT NULL COMMENT '0=A 1=L 2=R 3=Su 4=Si 5=I 6=Tra',
  numfactu int(7) unsigned NOT NULL,
  fecfactu date NOT NULL,
  numalbar int(7) NOT NULL,
  fecalbar date NOT NULL,
  codvarie int(6) NOT NULL,
  codcampo int(8) unsigned NOT NULL,
  kilosbru int(6) NOT NULL,
  kilosnet int(6) NOT NULL,
  grado decimal(10,4) NOT NULL,
  precio decimal(6,4) NOT NULL,
  importe decimal(8,2) NOT NULL,
  imporgasto decimal(8,2) NOT NULL default '0.00',
  prretirada decimal(8,4) default NULL,
  prmoltura decimal(8,4) default NULL,
  prenvasado decimal(8,4) default NULL,
  imppenal decimal(8,2) NOT NULL default '0.00',
  PRIMARY KEY  (codtipom,numfactu,fecfactu,numalbar),
  CONSTRAINT rfactsoc_albaran_ibfk_1 FOREIGN KEY (codtipom, numfactu, fecfactu) REFERENCES rfactsoc (codtipom, numfactu, fecfactu) ON UPDATE CASCADE
) ENGINE=InnoDB DEFAULT CHARSET=latin1;     

CREATE TABLE rfactsoc_albaran_copy (
  codtipom char(3) NOT NULL COMMENT '0=A 1=L 2=R 3=Su 4=Si 5=I 6=Tra',
  numfactu int(7) unsigned NOT NULL,
  fecfactu date NOT NULL,
  numalbar int(7) NOT NULL,
  fecalbar date NOT NULL,
  codvarie int(6) NOT NULL,
  codcampo int(8) unsigned NOT NULL,
  kilosbru int(6) NOT NULL,
  kilosnet int(6) NOT NULL,
  grado decimal(10,4) NOT NULL,
  precio decimal(6,4) NOT NULL,
  importe decimal(8,2) NOT NULL,
  imporgasto decimal(8,2) NOT NULL default '0.00',
  prretirada decimal(8,4) default NULL,
  prmoltura decimal(8,4) default NULL,
  prenvasado decimal(8,4) default NULL,
  PRIMARY KEY  (codtipom,numfactu,fecfactu,numalbar)
) ENGINE=InnoDB DEFAULT CHARSET=latin1;     

CREATE TABLE rfactsoc_anticipos (
  codtipom char(3) NOT NULL,
  numfactu int(7) unsigned NOT NULL,
  fecfactu date NOT NULL,
  codtipomanti char(3) NOT NULL,
  numfactuanti int(7) unsigned NOT NULL,
  fecfactuanti date NOT NULL,
  codvarieanti int(6) unsigned NOT NULL,
  codcampoanti int(8) unsigned NOT NULL,
  baseimpo decimal(8,2) NOT NULL,
  PRIMARY KEY  (codtipom,numfactu,fecfactu,codtipomanti,numfactuanti,fecfactuanti,codvarieanti,codcampoanti),
  KEY FK_rfactsoc_anticipos (codtipomanti,numfactuanti,fecfactuanti,codvarieanti,codcampoanti),
  CONSTRAINT rfactsoc_anticipos_ibfk_2 FOREIGN KEY (codtipom, numfactu, fecfactu) REFERENCES rfactsoc (codtipom, numfactu, fecfactu) ON UPDATE CASCADE,
  CONSTRAINT rfactsoc_anticipos_ibfk_3 FOREIGN KEY (codtipomanti, numfactuanti, fecfactuanti, codvarieanti, codcampoanti) REFERENCES rfactsoc_variedad (codtipom, numfactu, fecfactu, codvarie, codcampo) ON UPDATE CASCADE
) ENGINE=InnoDB DEFAULT CHARSET=latin1;     

CREATE TABLE rfactsoc_calidad (
  codtipom char(3) NOT NULL COMMENT '0=A 1=L 2=R 3=Su 4=Si 5=I 6=Tra',
  numfactu int(7) unsigned NOT NULL,
  fecfactu date NOT NULL,
  codvarie int(6) unsigned NOT NULL,
  codcampo int(8) unsigned NOT NULL,
  codcalid smallint(2) NOT NULL,
  kilosnet int(6) NOT NULL,
  precio decimal(6,4) NOT NULL,
  imporcal decimal(8,2) NOT NULL,
  preciocalidad decimal(6,4) NOT NULL default '0.0000',
  imporcalidad decimal(8,2) NOT NULL default '0.00',
  PRIMARY KEY  (codtipom,numfactu,fecfactu,codvarie,codcampo,codcalid),
  CONSTRAINT rfactsoc_calidad_ibfk_1 FOREIGN KEY (codtipom, numfactu, fecfactu, codvarie, codcampo) REFERENCES rfactsoc_variedad (codtipom, numfactu, fecfactu, codvarie, codcampo) ON UPDATE CASCADE
) ENGINE=InnoDB DEFAULT CHARSET=latin1;     

CREATE TABLE rfactsoc_copy (
  codtipom char(3) NOT NULL COMMENT '0=A 1=L 2=R 3=Su 4=Si 5=I 6=Tra',
  numfactu int(7) unsigned NOT NULL,
  fecfactu date NOT NULL,
  codsocio int(6) unsigned NOT NULL,
  baseimpo decimal(8,2) NOT NULL,
  tipoiva smallint(2) NOT NULL,
  porc_iva decimal(4,2) NOT NULL,
  imporiva decimal(8,2) NOT NULL,
  tipoirpf tinyint(1) NOT NULL COMMENT 'Como rsocios',
  basereten decimal(8,2) default NULL,
  porc_ret decimal(4,2) default NULL,
  impreten decimal(8,2) default NULL,
  baseaport decimal(8,2) default NULL,
  porc_apo decimal(4,2) default NULL,
  impapor decimal(8,2) default NULL,
  totalfac decimal(8,2) NOT NULL,
  impreso tinyint(1) NOT NULL default '0',
  contabilizado tinyint(1) NOT NULL default '0',
  pasaridoc tinyint(1) NOT NULL default '0' COMMENT 'Descontado en liquidaciÃ³n',
  esanticipogasto tinyint(1) NOT NULL default '0' COMMENT 'Es Anticipo Gasto Recoleccion',
  rectif_codtipom char(3) default NULL,
  rectif_numfactu int(7) default NULL,
  rectif_fecfactu date default NULL,
  rectif_motivo varchar(100) default NULL,
  esretirada tinyint(1) NOT NULL default '0',
  pdtenrofact tinyint(1) NOT NULL default '0',
  numfacrec varchar(10) default NULL,
  esliqcomplem tinyint(1) NOT NULL default '0',
  PRIMARY KEY  (codtipom,numfactu,fecfactu)
) ENGINE=InnoDB DEFAULT CHARSET=latin1;     

CREATE TABLE rfactsoc_fvarias (
  codtipom char(3) NOT NULL,
  numfactu int(7) unsigned NOT NULL,
  fecfactu date NOT NULL,
  codtipomfvar char(3) NOT NULL,
  numfactufvar int(7) unsigned NOT NULL,
  fecfactufvar date NOT NULL,
  codsecci smallint(3) unsigned NOT NULL,
  PRIMARY KEY  (codtipom,numfactu,fecfactu,codtipomfvar,numfactufvar,fecfactufvar),
  KEY FK_rfactsoc_fvarias (codsecci),
  CONSTRAINT rfactsoc_fvarias_ibfk_1 FOREIGN KEY (codtipom, numfactu, fecfactu) REFERENCES rfactsoc (codtipom, numfactu, fecfactu) ON UPDATE CASCADE,
  CONSTRAINT rfactsoc_fvarias_ibfk_2 FOREIGN KEY (codsecci) REFERENCES rseccion (codsecci) ON UPDATE CASCADE
) ENGINE=InnoDB DEFAULT CHARSET=latin1;     

CREATE TABLE rfactsoc_gastos (
  codtipom char(3) NOT NULL,
  numfactu int(7) unsigned NOT NULL,
  fecfactu date NOT NULL,
  numlinea smallint(2) NOT NULL,
  codgasto smallint(2) unsigned NOT NULL,
  importe decimal(8,2) NOT NULL,
  PRIMARY KEY  (codtipom,numfactu,fecfactu,numlinea),
  KEY rfactsoc_gastos_ibfk_2 (codgasto),
  CONSTRAINT rfactsoc_gastos_ibfk_1 FOREIGN KEY (codtipom, numfactu, fecfactu) REFERENCES rfactsoc (codtipom, numfactu, fecfactu) ON UPDATE CASCADE,
  CONSTRAINT rfactsoc_gastos_ibfk_2 FOREIGN KEY (codgasto) REFERENCES rconcepgasto (codgasto) ON UPDATE CASCADE
) ENGINE=InnoDB DEFAULT CHARSET=latin1;     

CREATE TABLE rfactsoc_retirada (
  codtipom char(3) NOT NULL,
  numfactu int(7) unsigned NOT NULL,
  fecfactu date NOT NULL,
  codtipomanti char(3) NOT NULL,
  numfactuanti int(7) unsigned NOT NULL,
  fecfactuanti date NOT NULL,
  codvarieanti int(6) unsigned NOT NULL,
  codcampoanti int(8) unsigned NOT NULL,
  kilosret int(8) unsigned NOT NULL,
  imporret decimal(8,2) NOT NULL,
  PRIMARY KEY  (codtipom,numfactu,fecfactu,codtipomanti,numfactuanti,fecfactuanti,codvarieanti,codcampoanti),
  KEY FK_rfactsoc_retirada (codtipomanti,numfactuanti,fecfactuanti,codvarieanti,codcampoanti),
  CONSTRAINT rfactsoc_retirada_ibfk_2 FOREIGN KEY (codtipom, numfactu, fecfactu) REFERENCES rfactsoc (codtipom, numfactu, fecfactu) ON UPDATE CASCADE,
  CONSTRAINT rfactsoc_retirada_ibfk_3 FOREIGN KEY (codtipomanti, numfactuanti, fecfactuanti, codvarieanti, codcampoanti) REFERENCES rfactsoc_variedad (codtipom, numfactu, fecfactu, codvarie, codcampo) ON UPDATE CASCADE
) ENGINE=InnoDB DEFAULT CHARSET=latin1;     

CREATE TABLE rfactsoc_variedad (
  codtipom char(3) NOT NULL COMMENT '0=A 1=L 2=R 3=Su 4=Si 5=I 6=Tra',
  numfactu int(7) unsigned NOT NULL,
  fecfactu date NOT NULL,
  codvarie int(6) unsigned NOT NULL,
  codcampo int(8) unsigned NOT NULL,
  kilosnet int(6) NOT NULL,
  preciomed decimal(6,4) NOT NULL,
  imporvar decimal(8,2) NOT NULL,
  descontado tinyint(1) NOT NULL default '0',
  imporgasto decimal(8,2) NOT NULL default '0.00',
  kilogrado decimal(10,2) default NULL,
  preciorea decimal(6,4) NOT NULL default '0.0000',
  PRIMARY KEY  (codtipom,numfactu,fecfactu,codvarie,codcampo),
  KEY FK_rfactsoc_variedad (codcampo),
  KEY FK_rfactsoc_variedad1 (codvarie),
  CONSTRAINT rfactsoc_variedad_ibfk_1 FOREIGN KEY (codtipom, numfactu, fecfactu) REFERENCES rfactsoc (codtipom, numfactu, fecfactu) ON UPDATE CASCADE,
  CONSTRAINT rfactsoc_variedad_ibfk_2 FOREIGN KEY (codcampo) REFERENCES rcampos (codcampo) ON UPDATE CASCADE,
  CONSTRAINT rfactsoc_variedad_ibfk_3 FOREIGN KEY (codvarie) REFERENCES variedades (codvarie) ON UPDATE CASCADE
) ENGINE=InnoDB DEFAULT CHARSET=latin1;     

CREATE TABLE rfactsoc_variedad_copy (
  codtipom char(3) NOT NULL COMMENT '0=A 1=L 2=R 3=Su 4=Si 5=I 6=Tra',
  numfactu int(7) unsigned NOT NULL,
  fecfactu date NOT NULL,
  codvarie int(6) unsigned NOT NULL,
  codcampo int(8) unsigned NOT NULL,
  kilosnet int(6) NOT NULL,
  preciomed decimal(6,4) NOT NULL,
  imporvar decimal(8,2) NOT NULL,
  descontado tinyint(1) NOT NULL default '0',
  imporgasto decimal(8,2) NOT NULL default '0.00',
  kilogrado decimal(10,2) default NULL,
  PRIMARY KEY  (codtipom,numfactu,fecfactu,codvarie,codcampo),
  KEY FK_rfactsoc_variedad (codcampo),
  KEY FK_rfactsoc_variedad1 (codvarie)
) ENGINE=InnoDB DEFAULT CHARSET=latin1;     

CREATE TABLE rfacttra (
  codtipom char(3) NOT NULL COMMENT '0=A 1=L 2=R 3=Su 4=Si 5=I 6=Tra',
  numfactu int(7) unsigned NOT NULL,
  fecfactu date NOT NULL,
  codtrans varchar(10) NOT NULL,
  baseimpo decimal(8,2) NOT NULL,
  tipoiva smallint(2) NOT NULL,
  porc_iva decimal(4,2) NOT NULL,
  imporiva decimal(8,2) NOT NULL,
  tipoirpf tinyint(1) NOT NULL COMMENT 'Como rsocios',
  basereten decimal(8,2) default NULL,
  porc_ret decimal(4,2) default NULL,
  impreten decimal(8,2) default NULL,
  baseaport decimal(8,2) default NULL,
  porc_apo decimal(4,2) default NULL,
  impapor decimal(8,2) default NULL,
  totalfac decimal(8,2) NOT NULL,
  impreso tinyint(1) NOT NULL default '0',
  contabilizado tinyint(1) NOT NULL default '0',
  pasaridoc tinyint(1) NOT NULL default '0' COMMENT 'Descontado en liquidación',
  rectif_codtipom char(3) default NULL,
  rectif_numfactu int(7) default NULL,
  rectif_fecfactu date default NULL,
  rectif_motivo varchar(100) default NULL,
  PRIMARY KEY  (codtipom,numfactu,fecfactu,codtrans),
  KEY FK_rfacttra (codtrans),
  CONSTRAINT rfacttra_ibfk_1 FOREIGN KEY (codtrans) REFERENCES rtransporte (codtrans) ON UPDATE CASCADE
) ENGINE=InnoDB DEFAULT CHARSET=latin1;     

CREATE TABLE rfacttra_albaran (
  codtipom char(3) NOT NULL COMMENT '0=A 1=L 2=R 3=Su 4=Si 5=I 6=Tra',
  numfactu int(7) unsigned NOT NULL,
  fecfactu date NOT NULL,
  codtrans varchar(10) NOT NULL,
  numalbar int(7) NOT NULL,
  fecalbar date NOT NULL,
  codvarie int(6) NOT NULL,
  codcampo int(8) unsigned NOT NULL,
  numnotac int(7) NOT NULL default '0',
  kilosnet int(6) NOT NULL,
  importe decimal(8,2) NOT NULL,
  fechaent date NOT NULL,
  PRIMARY KEY  (codtipom,numfactu,fecfactu,codtrans,numalbar,numnotac),
  CONSTRAINT rfacttra_albaran_ibfk_1 FOREIGN KEY (codtipom, numfactu, fecfactu, codtrans) REFERENCES rfacttra (codtipom, numfactu, fecfactu, codtrans) ON UPDATE CASCADE
) ENGINE=InnoDB DEFAULT CHARSET=latin1;     

CREATE TABLE rfichculti (
  codtipo tinyint(1) unsigned NOT NULL,
  descripcion varchar(30) NOT NULL,
  PRIMARY KEY  (codtipo)
) ENGINE=InnoDB DEFAULT CHARSET=latin1;     

CREATE TABLE rfichdocs (
  codigo int(11) NOT NULL,
  campo longblob NOT NULL,
  codsocio int(6) NOT NULL,
  descripfich varchar(40) NOT NULL,
  orden smallint(6) NOT NULL,
  docum varchar(250) NOT NULL default '0',
  PRIMARY KEY  (codigo),
  KEY codsocio (codsocio)
) ENGINE=InnoDB DEFAULT CHARSET=latin1;     

CREATE TABLE rglobalgap (
  codigo varchar(4) NOT NULL,
  descripcion varchar(40) NOT NULL,
  numeroggn varchar(14) default NULL,
  PRIMARY KEY  (codigo)
) ENGINE=InnoDB DEFAULT CHARSET=latin1;     

CREATE TABLE rhisfruta (
  numalbar int(7) unsigned NOT NULL,
  fecalbar date NOT NULL,
  codvarie int(6) unsigned NOT NULL,
  codsocio int(6) unsigned NOT NULL,
  codcampo int(8) unsigned default NULL,
  tipoentr tinyint(1) NOT NULL COMMENT '0=Normal 1=V.Campo 2=P.Integrado 3=Industria Directo',
  recolect tinyint(4) NOT NULL COMMENT '0=Coop. 1=Socio',
  kilosbru int(6) NOT NULL,
  numcajon int(6) NOT NULL,
  kilosnet int(6) NOT NULL,
  imptrans decimal(6,2) default NULL,
  impacarr decimal(6,2) default NULL,
  imprecol decimal(6,2) default NULL,
  imppenal decimal(6,2) default NULL,
  impreso tinyint(1) NOT NULL,
  impentrada decimal(10,2) NOT NULL default '0.00',
  cobradosn tinyint(1) NOT NULL default '0',
  prestimado decimal(10,4) default NULL,
  coddeposito smallint(4) unsigned default NULL,
  codpobla varchar(6) default NULL,
  transportadopor tinyint(1) NOT NULL default '0',
  albarorigen int(7) unsigned default NULL COMMENT 'Nro albaran origen cuando es de cooprop',
  kilostra int(6) NOT NULL default '0',
  kgradobonif decimal(10,4) default NULL,
  esbonifespecial tinyint(1) NOT NULL default '0',
  prliquidalmz decimal(10,4) default NULL COMMENT 'Precio liq.almz Castelduc',
  tarabodega int(6) default NULL,
  codtraba int(6) default NULL,
  tolva smallint(1) default NULL,
  nromuestraalmz int(7) unsigned default NULL,
  estarepcooprop tinyint(4) NOT NULL,
  kilosfactu int(6) NOT NULL default '0',
  PRIMARY KEY  (numalbar),
  KEY FK_rhisfruta (codcampo),
  KEY FK_rhisfruta1 (codsocio),
  KEY FK_rhisfruta2 (codvarie),
  KEY FK_rhisfruta4 (codpobla),
  KEY FK_rhisfruta5 (coddeposito),
  CONSTRAINT rhisfruta_ibfk_1 FOREIGN KEY (codcampo) REFERENCES rcampos (codcampo) ON UPDATE CASCADE,
  CONSTRAINT rhisfruta_ibfk_2 FOREIGN KEY (codsocio) REFERENCES rsocios (codsocio) ON UPDATE CASCADE,
  CONSTRAINT rhisfruta_ibfk_3 FOREIGN KEY (codvarie) REFERENCES variedades (codvarie) ON UPDATE CASCADE,
  CONSTRAINT rhisfruta_ibfk_5 FOREIGN KEY (codpobla) REFERENCES rpueblos (codpobla) ON UPDATE CASCADE,
  CONSTRAINT rhisfruta_ibfk_6 FOREIGN KEY (coddeposito) REFERENCES rdeposito (coddeposito) ON UPDATE CASCADE
) ENGINE=InnoDB DEFAULT CHARSET=latin1;     

CREATE TABLE rhisfruta_clasif (
  numalbar int(7) unsigned NOT NULL,
  codvarie int(6) unsigned NOT NULL,
  codcalid smallint(2) unsigned NOT NULL,
  kilosnet int(6) default NULL,
  precio decimal(10,4) unsigned NOT NULL default '0.0000',
  importe decimal(10,2) NOT NULL default '0.00',
  PRIMARY KEY  (numalbar,codvarie,codcalid),
  KEY FK_rcampos_clasif (codvarie,codcalid),
  CONSTRAINT rhisfruta_clasif_ibfk_1 FOREIGN KEY (codvarie, codcalid) REFERENCES rcalidad (codvarie, codcalid) ON UPDATE CASCADE,
  CONSTRAINT rhisfruta_clasif_ibfk_2 FOREIGN KEY (numalbar) REFERENCES rhisfruta (numalbar) ON UPDATE CASCADE
) ENGINE=InnoDB DEFAULT CHARSET=latin1;     

CREATE TABLE rhisfruta_entradas (
  numalbar int(7) unsigned NOT NULL,
  numnotac int(7) unsigned NOT NULL,
  fechaent date NOT NULL,
  horaentr datetime NOT NULL,
  kilosbru int(6) NOT NULL,
  numcajon int(6) NOT NULL,
  kilosnet int(6) NOT NULL,
  observac varchar(250) default NULL,
  imptrans decimal(6,2) default NULL,
  impacarr decimal(6,2) default NULL,
  imprecol decimal(6,2) default NULL,
  imppenal decimal(6,2) default NULL,
  prestimado decimal(10,4) default NULL,
  codtrans varchar(10) default NULL,
  codtarif smallint(2) unsigned default NULL,
  codcapat smallint(4) unsigned default NULL,
  kilostra int(6) NOT NULL default '0',
  tiporecol tinyint(1) NOT NULL,
  horastra decimal(6,2) default NULL,
  numtraba smallint(2) default NULL,
  PRIMARY KEY  (numalbar,numnotac),
  KEY FK_rhisfruta_entradas (codtrans),
  KEY FK_rhisfruta_entradas1 (codtarif),
  KEY FK_rhisfruta_entradas3 (codcapat),
  CONSTRAINT rhisfruta_entradas_ibfk_1 FOREIGN KEY (numalbar) REFERENCES rhisfruta (numalbar) ON UPDATE CASCADE,
  CONSTRAINT rhisfruta_entradas_ibfk_2 FOREIGN KEY (codtrans) REFERENCES rtransporte (codtrans) ON UPDATE CASCADE,
  CONSTRAINT rhisfruta_entradas_ibfk_3 FOREIGN KEY (codtarif) REFERENCES rtarifatra (codtarif) ON UPDATE CASCADE,
  CONSTRAINT rhisfruta_entradas_ibfk_4 FOREIGN KEY (codcapat) REFERENCES rcapataz (codcapat) ON UPDATE CASCADE
) ENGINE=InnoDB DEFAULT CHARSET=latin1;     

CREATE TABLE rhisfruta_gastos (
  numalbar int(7) unsigned NOT NULL,
  numlinea int(6) unsigned NOT NULL,
  codgasto smallint(2) unsigned NOT NULL,
  importe decimal(10,2) default NULL,
  PRIMARY KEY  (numalbar,numlinea),
  KEY rhisfruta_gastos_ibfk_1 (codgasto),
  CONSTRAINT rhisfruta_gastos_ibfk_1 FOREIGN KEY (codgasto) REFERENCES rconcepgasto (codgasto) ON UPDATE CASCADE,
  CONSTRAINT rhisfruta_gastos_ibfk_2 FOREIGN KEY (numalbar) REFERENCES rhisfruta (numalbar) ON UPDATE CASCADE
) ENGINE=InnoDB DEFAULT CHARSET=latin1;     

CREATE TABLE rhisfruta_incidencia (
  numalbar int(7) unsigned NOT NULL,
  numnotac int(7) unsigned NOT NULL,
  codincid smallint(4) unsigned NOT NULL,
  PRIMARY KEY  (numalbar,numnotac,codincid),
  KEY FK_rclasifica_incidencia (codincid),
  CONSTRAINT rhisfruta_incidencia_ibfk_1 FOREIGN KEY (numalbar, numnotac) REFERENCES rhisfruta_entradas (numalbar, numnotac) ON UPDATE CASCADE,
  CONSTRAINT rhisfruta_incidencia_ibfk_2 FOREIGN KEY (codincid) REFERENCES rincidencia (codincid) ON UPDATE CASCADE
) ENGINE=InnoDB DEFAULT CHARSET=latin1;     

CREATE TABLE rhisfrutasin (
  numalbar int(7) unsigned NOT NULL,
  fecalbar date NOT NULL,
  codvarie int(6) unsigned NOT NULL,
  codsocio int(6) unsigned NOT NULL,
  codcampo int(8) unsigned default NULL,
  tipoentr tinyint(1) NOT NULL COMMENT '0=Normal 1=V.Campo 2=P.Integrado 3=Industria Directo',
  recolect tinyint(4) NOT NULL COMMENT '0=Coop. 1=Socio',
  kilosbru int(6) NOT NULL,
  numcajon int(6) NOT NULL,
  kilosnet int(6) NOT NULL,
  imptrans decimal(6,2) default NULL,
  impacarr decimal(6,2) default NULL,
  imprecol decimal(6,2) default NULL,
  imppenal decimal(6,2) default NULL,
  impreso tinyint(1) NOT NULL,
  impentrada decimal(10,2) NOT NULL default '0.00',
  cobradosn tinyint(1) NOT NULL default '0',
  prestimado decimal(10,4) default NULL,
  coddeposito smallint(4) unsigned default NULL,
  codpobla varchar(6) default NULL,
  transportadopor tinyint(1) NOT NULL default '0',
  albarorigen int(7) unsigned default NULL COMMENT 'Nro albaran origen cuando es de cooprop',
  kilostra int(6) NOT NULL default '0',
  kgradobonif decimal(10,4) default NULL,
  esbonifespecial tinyint(1) NOT NULL default '0',
  prliquidalmz decimal(10,4) default NULL COMMENT 'Precio liq.almz Castelduc',
  tarabodega int(6) default NULL,
  codtraba int(6) default NULL,
  tolva smallint(1) default NULL,
  nromuestraalmz int(7) unsigned default NULL,
  estarepcooprop tinyint(4) NOT NULL,
  PRIMARY KEY  (numalbar),
  KEY FK_rhisfrutasin (codcampo),
  KEY FK_rhisfrutasin1 (codsocio),
  KEY FK_rhisfrutasin2 (codvarie),
  KEY FK_rhisfrutasin3 (coddeposito),
  KEY FK_rhisfrutasin4 (codpobla),
  KEY FK_rhisfrutasin5 (codtraba),
  CONSTRAINT rhisfrutasin_ibfk_1 FOREIGN KEY (codcampo) REFERENCES rcampos (codcampo) ON UPDATE CASCADE,
  CONSTRAINT rhisfrutasin_ibfk_2 FOREIGN KEY (codsocio) REFERENCES rsocios (codsocio) ON UPDATE CASCADE,
  CONSTRAINT rhisfrutasin_ibfk_3 FOREIGN KEY (codvarie) REFERENCES variedades (codvarie) ON UPDATE CASCADE,
  CONSTRAINT rhisfrutasin_ibfk_5 FOREIGN KEY (codpobla) REFERENCES rpueblos (codpobla) ON UPDATE CASCADE,
  CONSTRAINT rhisfrutasin_ibfk_6 FOREIGN KEY (coddeposito) REFERENCES rdeposito (coddeposito) ON UPDATE CASCADE,
  CONSTRAINT rhisfrutasin_ibfk_7 FOREIGN KEY (codtraba) REFERENCES straba (codtraba) ON UPDATE CASCADE
) ENGINE=InnoDB DEFAULT CHARSET=latin1;     

CREATE TABLE rhisfrutasin_clasif (
  numalbar int(7) unsigned NOT NULL,
  codvarie int(6) unsigned NOT NULL,
  codcalid smallint(2) unsigned NOT NULL,
  kilosnet int(6) default NULL,
  PRIMARY KEY  (numalbar,codvarie,codcalid),
  KEY FK_rhisfrutasin_clasif (codvarie,codcalid),
  CONSTRAINT rhisfrutasin_clasif_ibfk_1 FOREIGN KEY (codvarie, codcalid) REFERENCES rcalidad (codvarie, codcalid) ON UPDATE CASCADE,
  CONSTRAINT rhisfrutasin_clasif_ibfk_2 FOREIGN KEY (numalbar) REFERENCES rhisfrutasin (numalbar) ON UPDATE CASCADE
) ENGINE=InnoDB DEFAULT CHARSET=latin1;     

CREATE TABLE rhisfrutasin_entradas (
  numalbar int(7) unsigned NOT NULL,
  numnotac int(7) unsigned NOT NULL,
  fechaent date NOT NULL,
  horaentr datetime NOT NULL,
  kilosbru int(6) NOT NULL,
  numcajon int(6) NOT NULL,
  kilosnet int(6) NOT NULL,
  observac varchar(250) default NULL,
  imptrans decimal(6,2) default NULL,
  impacarr decimal(6,2) default NULL,
  imprecol decimal(6,2) default NULL,
  imppenal decimal(6,2) default NULL,
  prestimado decimal(10,4) default NULL,
  codtrans varchar(10) default NULL,
  codtarif smallint(2) unsigned default NULL,
  codcapat smallint(4) unsigned default NULL,
  kilostra int(6) NOT NULL default '0',
  tiporecol tinyint(1) NOT NULL,
  horastra decimal(6,2) default NULL,
  numtraba smallint(2) default NULL,
  PRIMARY KEY  (numalbar,numnotac),
  KEY FK_rhisfrutasin_entradas (codtrans),
  KEY FK_rhisfrutasin_entradas1 (codtarif),
  KEY FK_rhisfrutasin_entradas3 (codcapat),
  CONSTRAINT rhisfrutasin_entradas_ibfk_1 FOREIGN KEY (numalbar) REFERENCES rhisfrutasin (numalbar) ON UPDATE CASCADE,
  CONSTRAINT rhisfrutasin_entradas_ibfk_2 FOREIGN KEY (codtrans) REFERENCES rtransporte (codtrans) ON UPDATE CASCADE,
  CONSTRAINT rhisfrutasin_entradas_ibfk_3 FOREIGN KEY (codtarif) REFERENCES rtarifatra (codtarif) ON UPDATE CASCADE,
  CONSTRAINT rhisfrutasin_entradas_ibfk_4 FOREIGN KEY (codcapat) REFERENCES rcapataz (codcapat) ON UPDATE CASCADE
) ENGINE=InnoDB DEFAULT CHARSET=latin1;     

CREATE TABLE rhisfrutasin_gastos (
  numalbar int(7) unsigned NOT NULL,
  numlinea int(6) unsigned NOT NULL,
  codgasto smallint(2) unsigned NOT NULL,
  importe decimal(10,2) default NULL,
  PRIMARY KEY  (numalbar,numlinea),
  KEY rhisfrutasin_gastos_ibfk_1 (codgasto),
  CONSTRAINT rhisfrutasin_gastos_ibfk_1 FOREIGN KEY (codgasto) REFERENCES rconcepgasto (codgasto) ON UPDATE CASCADE,
  CONSTRAINT rhisfrutasin_gastos_ibfk_2 FOREIGN KEY (numalbar) REFERENCES rhisfruta (numalbar) ON UPDATE CASCADE
) ENGINE=InnoDB DEFAULT CHARSET=latin1;     

CREATE TABLE rhisfrutasin_incidencia (
  numalbar int(7) unsigned NOT NULL,
  numnotac int(7) unsigned NOT NULL,
  codincid smallint(4) unsigned NOT NULL,
  PRIMARY KEY  (numalbar,numnotac,codincid),
  KEY FK_rhisfrutasin_incidencia (codincid),
  CONSTRAINT rhisfrutasin_incidencia_ibfk_1 FOREIGN KEY (numalbar, numnotac) REFERENCES rhisfrutasin_entradas (numalbar, numnotac) ON UPDATE CASCADE,
  CONSTRAINT rhisfrutasin_incidencia_ibfk_2 FOREIGN KEY (codincid) REFERENCES rincidencia (codincid) ON UPDATE CASCADE
) ENGINE=InnoDB DEFAULT CHARSET=latin1;     

CREATE TABLE rhistrans (
  codtrans varchar(10) NOT NULL,
  fechaent date default NULL,
  numnotac int(7) default NULL,
  codvarie int(6) default NULL,
  codsocio int(6) default NULL,
  codcampo int(8) default NULL,
  codtarif smallint(2) default NULL,
  kilosnet int(6) default NULL,
  facturado tinyint(1) default NULL,
  PRIMARY KEY  (codtrans)
) ENGINE=InnoDB DEFAULT CHARSET=latin1;     

CREATE TABLE rincidencia (
  codincid smallint(4) unsigned NOT NULL,
  nomincid varchar(25) NOT NULL,
  tipincid tinyint(1) NOT NULL COMMENT '0=Baja 1=Media 2=Alta',
  PRIMARY KEY  (codincid)
) ENGINE=InnoDB DEFAULT CHARSET=latin1;     

CREATE TABLE ringresos (
  codsocio int(6) unsigned NOT NULL,
  codvarie int(6) unsigned NOT NULL,
  concepto varchar(80) NOT NULL,
  importe decimal(10,2) NOT NULL default '0.00',
  PRIMARY KEY  (codsocio,codvarie,concepto),
  KEY FK_ringresos (codvarie),
  CONSTRAINT ringresos_ibfk_2 FOREIGN KEY (codvarie) REFERENCES variedades (codvarie) ON UPDATE CASCADE,
  CONSTRAINT ringresos_ibfk_1 FOREIGN KEY (codsocio) REFERENCES rsocios (codsocio) ON UPDATE CASCADE
) ENGINE=InnoDB DEFAULT CHARSET=latin1;     

CREATE TABLE rliantifter (
  codsocio int(6) unsigned NOT NULL,
  numfactu varchar(10) NOT NULL,
  fecfactu date NOT NULL,
  codsocioanti int(6) unsigned NOT NULL,
  numfactuanti varchar(10) NOT NULL,
  fecfactuanti date NOT NULL,
  PRIMARY KEY  (codsocio,numfactu,fecfactu,codsocioanti,numfactuanti,fecfactuanti),
  KEY rliantifter_ibfk_2 (codsocioanti,numfactuanti,fecfactuanti),
  CONSTRAINT rliantifter_ibfk_1 FOREIGN KEY (codsocio, numfactu, fecfactu) REFERENCES rcafter (codsocio, numfactu, fecfactu) ON UPDATE CASCADE,
  CONSTRAINT rliantifter_ibfk_2 FOREIGN KEY (codsocioanti, numfactuanti, fecfactuanti) REFERENCES rcafter (codsocio, numfactu, fecfactu) ON UPDATE CASCADE
) ENGINE=InnoDB DEFAULT CHARSET=latin1;     

CREATE TABLE rlifter (
  codsocio int(6) unsigned NOT NULL,
  numfactu varchar(10) NOT NULL,
  fecfactu date NOT NULL,
  numalbar int(6) NOT NULL,
  fechaalb date NOT NULL default '0000-00-00',
  codvarie int(6) unsigned NOT NULL,
  kilosnet int(6) NOT NULL,
  importel decimal(10,2) NOT NULL,
  observa1 varchar(200) default NULL,
  observa2 varchar(80) default NULL,
  observa3 varchar(80) default NULL,
  observa4 varchar(80) default NULL,
  observa5 varchar(80) default NULL,
  prestimado decimal(10,4) default NULL,
  descontado tinyint(1) unsigned NOT NULL default '0',
  PRIMARY KEY  (codsocio,numfactu,fecfactu,numalbar),
  KEY FK_rlifter (codvarie),
  CONSTRAINT rlifter_ibfk_1 FOREIGN KEY (codsocio) REFERENCES rsocios (codsocio),
  CONSTRAINT rlifter_ibfk_2 FOREIGN KEY (codsocio, numfactu, fecfactu) REFERENCES rcafter (codsocio, numfactu, fecfactu) ON UPDATE CASCADE,
  CONSTRAINT rlifter_ibfk_3 FOREIGN KEY (codvarie) REFERENCES variedades (codvarie) ON UPDATE CASCADE
) ENGINE=InnoDB DEFAULT CHARSET=latin1;     

CREATE TABLE rlinfactalmz (
  tipofichero tinyint(1) unsigned NOT NULL,
  numfactu int(7) unsigned NOT NULL,
  fecfactu date NOT NULL,
  codsocio int(6) unsigned NOT NULL,
  numlinea smallint(4) unsigned NOT NULL,
  concepto varchar(40) NOT NULL,
  cantidad int(7) NOT NULL,
  precioar decimal(8,4) NOT NULL,
  importel decimal(8,2) NOT NULL,
  PRIMARY KEY  (tipofichero,numfactu,fecfactu,codsocio,numlinea),
  CONSTRAINT rlinfactalmz_ibfk_1 FOREIGN KEY (tipofichero, numfactu, fecfactu, codsocio) REFERENCES rcabfactalmz (tipofichero, numfactu, fecfactu, codsocio) ON UPDATE CASCADE
) ENGINE=InnoDB DEFAULT CHARSET=latin1;     

CREATE TABLE rordrecogida (
  nroorden int(6) NOT NULL,
  fecimpre date NOT NULL,
  nrocampo int(7) unsigned NOT NULL,
  codvarie int(6) unsigned NOT NULL,
  tijeralimp tinyint(1) unsigned NOT NULL default '0',
  tijeradesinf tinyint(1) unsigned NOT NULL default '0',
  capazolimp tinyint(1) unsigned NOT NULL default '0',
  capazodesinf tinyint(1) unsigned NOT NULL default '0',
  PRIMARY KEY  (nroorden)
) ENGINE=InnoDB DEFAULT CHARSET=latin1;     

CREATE TABLE rordrecogida_incid (
  nroorden int(6) NOT NULL,
  idplaga smallint(3) NOT NULL,
  nivel tinyint(1) unsigned NOT NULL default '0',
  PRIMARY KEY  (nroorden,idplaga),
  KEY FK_rordrecogida_incid (idplaga),
  CONSTRAINT rordrecogida_incid_ibfk_1 FOREIGN KEY (idplaga) REFERENCES rplagasaux (idplaga) ON UPDATE CASCADE
) ENGINE=InnoDB DEFAULT CHARSET=latin1;     

CREATE TABLE rparam (
  codparam tinyint(1) unsigned NOT NULL default '0',
  diremail varchar(50) default NULL,
  smtphost varchar(50) default NULL,
  smtpuser varchar(50) default NULL,
  smtppass varchar(50) default NULL,
  websoporte varchar(100) default NULL,
  serconta varchar(30) default NULL,
  usuconta varchar(20) default NULL,
  pasconta varchar(20) default NULL,
  numconta tinyint(2) unsigned default NULL,
  hayaridoc tinyint(1) unsigned NOT NULL default '0',
  codcarpetaanti smallint(3) unsigned NOT NULL default '0',
  codcarpetaliqu smallint(3) unsigned NOT NULL default '0',
  codcarpetaadv smallint(3) unsigned NOT NULL default '0',
  codcarpetaalmz smallint(3) unsigned NOT NULL default '0',
  codcarpetabode smallint(3) unsigned NOT NULL default '0',
  codcarpetareccamp smallint(3) unsigned NOT NULL default '0',
  codcarpetarecalm smallint(3) unsigned NOT NULL default '0',
  codcarpetatran smallint(3) unsigned NOT NULL default '0',
  c1antiaridoc tinyint(1) unsigned NOT NULL default '0',
  c2antiaridoc tinyint(1) unsigned NOT NULL default '0',
  c3antiaridoc tinyint(1) unsigned NOT NULL default '0',
  c4antiaridoc tinyint(1) unsigned NOT NULL default '0',
  c1liquaridoc tinyint(1) unsigned NOT NULL default '0',
  c2liquaridoc tinyint(1) unsigned NOT NULL default '0',
  c3liquaridoc tinyint(1) unsigned NOT NULL default '0',
  c4liquaridoc tinyint(1) unsigned NOT NULL default '0',
  c1advaridoc tinyint(1) unsigned NOT NULL default '0',
  c2advaridoc tinyint(1) unsigned NOT NULL default '0',
  c3advaridoc tinyint(1) unsigned NOT NULL default '0',
  c4advaridoc tinyint(1) unsigned NOT NULL default '0',
  c1almzaridoc tinyint(1) unsigned NOT NULL default '0',
  c2almzaridoc tinyint(1) unsigned NOT NULL default '0',
  c3almzaridoc tinyint(1) unsigned NOT NULL default '0',
  c4almzaridoc tinyint(1) unsigned NOT NULL default '0',
  c1bodearidoc tinyint(1) unsigned NOT NULL default '0',
  c2bodearidoc tinyint(1) unsigned NOT NULL default '0',
  c3bodearidoc tinyint(1) unsigned NOT NULL default '0',
  c4bodearidoc tinyint(1) unsigned NOT NULL default '0',
  c1recaridoc tinyint(1) unsigned NOT NULL default '0',
  c2recaridoc tinyint(1) unsigned NOT NULL default '0',
  c3recaridoc tinyint(1) unsigned NOT NULL default '0',
  c4recaridoc tinyint(1) unsigned NOT NULL default '0',
  c1tranaridoc tinyint(1) unsigned NOT NULL default '0',
  c2tranaridoc tinyint(1) unsigned NOT NULL default '0',
  c3tranaridoc tinyint(1) unsigned NOT NULL default '0',
  c4tranaridoc tinyint(1) unsigned NOT NULL default '0',
  codextension smallint(3) unsigned NOT NULL default '0',
  tipocaja1 varchar(20) default NULL,
  tipocaja2 varchar(20) default NULL,
  tipocaja3 varchar(20) default NULL,
  tipocaja4 varchar(20) default NULL,
  tipocaja5 varchar(20) default NULL,
  pesocaja1 decimal(5,2) default NULL,
  pesocaja2 decimal(5,2) default NULL,
  pesocaja3 decimal(5,2) default NULL,
  pesocaja4 decimal(5,2) default NULL,
  pesocaja5 decimal(5,2) default NULL,
  escaja1 tinyint(1) default NULL,
  escaja2 tinyint(1) default NULL,
  escaja3 tinyint(1) default NULL,
  escaja4 tinyint(1) default NULL,
  escaja5 tinyint(1) default NULL,
  setaratractor tinyint(1) unsigned NOT NULL default '0',
  haytraza tinyint(1) unsigned NOT NULL default '0',
  cajasporpalet int(7) NOT NULL default '0',
  costehora decimal(5,4) default '0.0000',
  costesegso decimal(5,4) default '0.0000',
  seccionhorto smallint(3) unsigned default NULL COMMENT 'Seccion Hortofruticola',
  seccionalmaz smallint(3) unsigned default NULL,
  seccionadv smallint(3) unsigned default NULL,
  seccionpozos smallint(3) unsigned default NULL,
  porcretenfacsoc decimal(5,2) NOT NULL default '0.00',
  primfactant int(7) default NULL,
  ultfactant int(7) default NULL,
  primfactantvc int(7) default NULL,
  ultfactantvc int(7) default NULL,
  primfactliq int(7) default NULL,
  ultfactliq int(7) default NULL,
  primfactliqvc int(7) default NULL,
  ultfactliqvc int(7) default NULL,
  impresoraentradas varchar(50) NOT NULL,
  porcenafo decimal(5,2) NOT NULL default '0.00',
  texttomadatos varchar(1000) default NULL,
  pietomadatos varchar(1000) default NULL,
  cooperativa tinyint(1) default '0' COMMENT '0=Catadau / 1=Valsur / 2=Picassent / 3=Mogente / 4=Alzira / 5=Castelduc  / 6=Macastre / 7=Quatretonda / 8=UTXERA (pozos) / 9 = Natural / 10 = Escalona / 11 = Belgida / 12 = Montifrut / 14 = Bolbaite',
  codivaintracom tinyint(1) unsigned NOT NULL,
  directoriotraza varchar(250) default NULL,
  ctaterreten varchar(10) default NULL,
  ctaretensoc varchar(10) default NULL,
  ctaaportasoc varchar(10) default NULL,
  codforpaposi smallint(6) default NULL,
  codforpanega smallint(6) default NULL,
  ctabanco varchar(10) default NULL COMMENT 'Cta Banco Prevista',
  ctaretenalmz varchar(10) default NULL,
  codforpaposalmz smallint(6) default NULL,
  codforpanegalmz smallint(6) default NULL,
  ctabancoalmz varchar(10) default NULL,
  ctaventasalmz varchar(10) default NULL,
  ctagastosalmz varchar(10) default NULL,
  letraseriealmz varchar(1) default NULL,
  codalmacadv smallint(3) unsigned NOT NULL,
  ctabancobod varchar(10) default NULL,
  ctabancoadv varchar(10) default NULL,
  seccionsumi smallint(3) unsigned default NULL,
  bdariges varchar(10) default NULL,
  seccionbodega smallint(3) unsigned default NULL,
  agruparnotas tinyint(1) unsigned NOT NULL default '0',
  kiloscajamin int(6) unsigned NOT NULL default '0',
  kiloscajamax int(6) unsigned NOT NULL default '0',
  pesocajallena decimal(5,2) default NULL,
  serespetanota tinyint(1) NOT NULL default '0',
  albretiradabodman tinyint(1) NOT NULL default '0',
  ctaventasbod varchar(10) default NULL,
  letraserietel varchar(1) default NULL,
  ctaventastel varchar(10) default NULL,
  codalmacnomi smallint(3) unsigned NOT NULL,
  bodporcenmant decimal(5,2) NOT NULL default '0.00',
  codgastobod smallint(2) unsigned default NULL,
  codgastoalmz smallint(2) unsigned default NULL,
  primfactantalmz int(7) default NULL,
  ultfactantalmz int(7) default NULL,
  primfactliqalmz int(7) default NULL,
  ultfactliqalmz int(7) default NULL,
  primfactantbod int(7) default NULL,
  ultfactantbod int(7) default NULL,
  primfactliqbod int(7) default NULL,
  ultfactliqbod int(7) default NULL,
  sigpac varchar(250) default NULL,
  goolzoom varchar(250) default NULL,
  hastametcub1poz int(7) default NULL,
  hastametcub2poz int(7) default NULL,
  precio1poz decimal(6,2) default NULL,
  precio2poz decimal(6,2) default NULL,
  codivapoz tinyint(1) default NULL,
  imporcuotapoz decimal(10,2) default NULL,
  imporderramapoz decimal(10,2) default NULL,
  tratipoportes tinyint(1) unsigned NOT NULL default '0' COMMENT '0=portes por poblacion / 1=tarifa de transporte',
  tracodtarif smallint(2) unsigned default NULL,
  tracodtarif2 smallint(2) unsigned default NULL,
  tracodgasto smallint(2) unsigned default NULL,
  eurostrabdia decimal(10,2) NOT NULL default '0.00',
  porcsegso1 decimal(5,2) default '0.00',
  porcsegso2 decimal(5,2) default '0.00',
  porcirpf decimal(5,2) default '0.00',
  porcjornada decimal(5,2) default '0.00',
  porcretenfactra decimal(5,2) NOT NULL default '0.00',
  pesocaja11 decimal(5,2) default NULL,
  pesocaja12 decimal(5,2) default NULL,
  pesocaja13 decimal(5,2) default NULL,
  pesocaja14 decimal(5,2) default NULL,
  pesocaja15 decimal(5,2) default NULL,
  nronotamanual tinyint(1) default '0',
  tratipocontador tinyint(1) NOT NULL default '0' COMMENT '0=contador global / 1=contador por transportista',
  nromaxjornadas smallint(4) default NULL,
  porcincreaforo decimal(5,2) NOT NULL default '0.00',
  faneca decimal(5,4) NOT NULL default '0.0833',
  preciotra decimal(8,4) default '0.0000',
  codivaexeadv tinyint(1) default NULL COMMENT 'Iva Exento fact.internas adv',
  gtomoltura decimal(8,4) default NULL COMMENT 'Gtos Molturacion Almz',
  gtoenvasado decimal(8,4) default NULL COMMENT 'Gtos Envasado',
  ctatrareten varchar(10) default NULL,
  cooproentradas tinyint(1) unsigned NOT NULL default '0' COMMENT '0=entradas desdobladas por cooprop en act.entr clasificadas 1=en entradas bascula',
  smsemail varchar(50) default NULL,
  smsclave varchar(50) default NULL,
  smsremitente varchar(11) default NULL,
  ctaventasconspoz varchar(10) default NULL,
  ctaventascuopoz varchar(10) default NULL,
  codccostpoz varchar(4) default NULL,
  esvtafruta1 tinyint(1) default NULL,
  esvtafruta2 tinyint(1) default NULL,
  esvtafruta3 tinyint(1) default NULL,
  esvtafruta4 tinyint(1) default NULL,
  esvtafruta5 tinyint(1) default NULL,
  enviodesdeoutlook tinyint(1) unsigned NOT NULL default '0',
  arigesmail varchar(30) default NULL,
  forpaconpoz smallint(6) default '1',
  forparecpoz smallint(6) default '1',
  porckilosbod decimal(5,2) default '0.00',
  cambioBD varchar(40) default NULL,
  tipolecturapoz tinyint(1) unsigned NOT NULL default '0' COMMENT '0=lectura_equipo 1=lectura_bd',
  liqdirecta tinyint(1) NOT NULL default '0',
  ctaventastalpoz varchar(10) default NULL,
  ctaventasmtopoz varchar(10) default NULL,
  codcartapoz smallint(3) unsigned default NULL,
  hayfactvarias tinyint(1) unsigned NOT NULL default '0',
  consumominpoz int(7) default '0',
  consumomaxpoz int(7) default '999999',
  nomzonapoz varchar(10) NOT NULL default 'Zona',
  codincidplaga smallint(4) unsigned default NULL,
  ctaventasmantapoz varchar(10) default NULL,
  PRIMARY KEY  (codparam),
  KEY FK_rparam (seccionadv),
  KEY FK_rparam1 (seccionalmaz),
  KEY FK_rparam2 (seccionhorto),
  CONSTRAINT rparam_ibfk_1 FOREIGN KEY (seccionadv) REFERENCES rseccion (codsecci) ON UPDATE CASCADE,
  CONSTRAINT rparam_ibfk_2 FOREIGN KEY (seccionalmaz) REFERENCES rseccion (codsecci) ON UPDATE CASCADE,
  CONSTRAINT rparam_ibfk_3 FOREIGN KEY (seccionhorto) REFERENCES rseccion (codsecci) ON UPDATE CASCADE
) ENGINE=InnoDB DEFAULT CHARSET=latin1;     

CREATE TABLE rpartes (
  nroparte int(7) unsigned NOT NULL,
  fechapar date NOT NULL,
  codcuadrilla int(6) unsigned NOT NULL,
  fecentrada date NOT NULL,
  tipoparte tinyint(1) NOT NULL COMMENT '0=destajo 1=horas',
  PRIMARY KEY  (nroparte)
) ENGINE=InnoDB DEFAULT CHARSET=latin1;     

CREATE TABLE rpartes_gastos (
  nroparte int(7) unsigned NOT NULL,
  numlinea smallint(3) unsigned NOT NULL,
  codgasto smallint(2) unsigned NOT NULL,
  importe decimal(12,2) NOT NULL,
  PRIMARY KEY  (nroparte,numlinea),
  KEY FK_rpartes_gastos (codgasto),
  CONSTRAINT rpartes_gastos_ibfk_1 FOREIGN KEY (nroparte) REFERENCES rpartes (nroparte) ON UPDATE CASCADE,
  CONSTRAINT rpartes_gastos_ibfk_2 FOREIGN KEY (codgasto) REFERENCES rconcepgastonom (codgasto) ON UPDATE CASCADE
) ENGINE=InnoDB DEFAULT CHARSET=latin1;     

CREATE TABLE rpartes_trabajador (
  nroparte int(7) unsigned NOT NULL,
  numlinea int(7) NOT NULL,
  codtraba int(6) NOT NULL,
  codgasto smallint(2) unsigned default NULL,
  codvarie int(6) unsigned default NULL,
  kilosrec int(6) NOT NULL default '0',
  importe decimal(12,2) NOT NULL,
  automatico tinyint(1) NOT NULL default '0',
  modificado tinyint(1) NOT NULL default '0',
  horastra decimal(6,2) NOT NULL default '0.00',
  PRIMARY KEY  (nroparte,numlinea),
  KEY FK_rpartes_trabajador (codtraba),
  KEY FK_rpartes_trabajador1 (codgasto),
  KEY FK_rpartes_trabajador2 (codvarie),
  CONSTRAINT rpartes_trabajador_ibfk_1 FOREIGN KEY (nroparte) REFERENCES rpartes (nroparte) ON UPDATE CASCADE,
  CONSTRAINT rpartes_trabajador_ibfk_2 FOREIGN KEY (codtraba) REFERENCES straba (codtraba) ON UPDATE CASCADE,
  CONSTRAINT rpartes_trabajador_ibfk_3 FOREIGN KEY (codgasto) REFERENCES rconcepgastonom (codgasto) ON UPDATE CASCADE,
  CONSTRAINT rpartes_trabajador_ibfk_4 FOREIGN KEY (codvarie) REFERENCES variedades (codvarie) ON UPDATE CASCADE
) ENGINE=InnoDB DEFAULT CHARSET=latin1;     

CREATE TABLE rpartes_variedad (
  nroparte int(7) unsigned NOT NULL,
  numlinea int(7) unsigned NOT NULL,
  numnotac int(7) unsigned NOT NULL,
  codvarie int(6) unsigned NOT NULL,
  kilosrec int(6) NOT NULL,
  horastra decimal(6,2) default NULL,
  PRIMARY KEY  (nroparte,numlinea),
  KEY FK_rpartes_variedad (codvarie),
  CONSTRAINT rpartes_variedad_ibfk_1 FOREIGN KEY (nroparte) REFERENCES rpartes (nroparte) ON UPDATE CASCADE,
  CONSTRAINT rpartes_variedad_ibfk_2 FOREIGN KEY (codvarie) REFERENCES variedades (codvarie) ON UPDATE CASCADE
) ENGINE=InnoDB DEFAULT CHARSET=latin1;     

CREATE TABLE rpartida (
  codparti smallint(4) unsigned NOT NULL,
  nomparti varchar(30) NOT NULL,
  codpobla varchar(6) NOT NULL,
  codzonas smallint(4) unsigned NOT NULL,
  PRIMARY KEY  (codparti),
  KEY FK_rpartida (codzonas),
  KEY FK_rpartida1 (codpobla),
  CONSTRAINT rpartida_ibfk_1 FOREIGN KEY (codzonas) REFERENCES rzonas (codzonas),
  CONSTRAINT rpartida_ibfk_2 FOREIGN KEY (codpobla) REFERENCES rpueblos (codpobla)
) ENGINE=InnoDB DEFAULT CHARSET=latin1;     

CREATE TABLE rpatronpie (
  codpatron smallint(2) unsigned NOT NULL,
  nompatron varchar(30) NOT NULL,
  PRIMARY KEY  (codpatron)
) ENGINE=InnoDB DEFAULT CHARSET=latin1;     

CREATE TABLE rpesadas (
  nropesada int(7) unsigned NOT NULL,
  fecpesada datetime default NULL,
  codtrans varchar(10) NOT NULL,
  kilosbrut int(6) default NULL,
  taracaja0 int(6) default NULL,
  cajonesrea smallint(3) default NULL,
  taracaja1 int(6) default NULL,
  numcajo1 smallint(3) default NULL,
  taracaja2 int(6) default NULL,
  numcajo2 smallint(3) default NULL,
  taracaja3 int(6) default NULL,
  numcajo3 smallint(3) default NULL,
  taracaja4 int(6) default NULL,
  numcajo4 smallint(3) default NULL,
  taracaja5 int(6) default NULL,
  numcajo5 smallint(3) default NULL,
  taravehi int(6) default NULL,
  otratara int(6) default NULL,
  kilosnet int(6) default NULL,
  kilostra int(6) NOT NULL default '0',
  PRIMARY KEY  (nropesada)
) ENGINE=InnoDB DEFAULT CHARSET=latin1;     

CREATE TABLE rplagas (
  codplaga smallint(4) NOT NULL,
  nomplaga varchar(20) NOT NULL,
  observac varchar(20) default NULL,
  PRIMARY KEY  (codplaga)
) ENGINE=InnoDB DEFAULT CHARSET=latin1;     

CREATE TABLE rplagasaux (
  idplaga smallint(3) NOT NULL,
  nomplaga varchar(50) NOT NULL,
  PRIMARY KEY  (idplaga)
) ENGINE=InnoDB DEFAULT CHARSET=latin1;     

CREATE TABLE rplantacion (
  codplanta smallint(2) unsigned NOT NULL,
  nomplanta varchar(30) NOT NULL,
  PRIMARY KEY  (codplanta)
) ENGINE=InnoDB DEFAULT CHARSET=latin1;     

CREATE TABLE rportespobla (
  codpobla varchar(6) NOT NULL,
  codprodu smallint(3) unsigned NOT NULL,
  imptrans decimal(5,4) NOT NULL,
  PRIMARY KEY  (codpobla,codprodu),
  KEY FK_rportespobla (codprodu),
  CONSTRAINT rportespobla_ibfk_1 FOREIGN KEY (codpobla) REFERENCES rpueblos (codpobla),
  CONSTRAINT rportespobla_ibfk_2 FOREIGN KEY (codprodu) REFERENCES productos (codprodu) ON UPDATE CASCADE
) ENGINE=InnoDB DEFAULT CHARSET=latin1;     

CREATE TABLE rpozauxmanta (
  codsocio int(6) unsigned NOT NULL,
  codcampo int(8) unsigned NOT NULL,
  codvarie int(6) unsigned NOT NULL,
  codparti smallint(4) unsigned NOT NULL,
  poligono smallint(3) NOT NULL,
  parcela int(6) NOT NULL,
  subparce varchar(2) default NULL,
  hanegadas decimal(10,2) NOT NULL,
  importe decimal(10,2) NOT NULL,
  nroimpresion smallint(4) NOT NULL
) ENGINE=InnoDB DEFAULT CHARSET=latin1;     

CREATE TABLE rpozos (
  hidrante varchar(10) NOT NULL,
  nroorden int(7) default NULL,
  codsocio int(6) unsigned NOT NULL,
  codparti smallint(4) unsigned NOT NULL,
  poligono varchar(10) default NULL,
  parcelas varchar(25) default NULL,
  hanegada decimal(8,4) default NULL,
  observac text,
  lect_ant int(7) default NULL,
  lect_act int(7) default NULL,
  fech_ant date default NULL,
  fech_act date default NULL,
  acumconsumo int(7) default NULL,
  acumcuota int(7) default NULL,
  digcontrol varchar(1) default NULL,
  codpozo smallint(3) unsigned NOT NULL,
  codcampo int(8) unsigned default NULL,
  calibre smallint(4) default NULL,
  nroacciones int(7) default NULL,
  fechaalta date NOT NULL,
  fechabaja date default NULL,
  consumo int(7) NOT NULL,
  cobrarcuota tinyint(1) NOT NULL default '1',
  PRIMARY KEY  (hidrante),
  KEY FK_rpozos (codsocio),
  KEY FK_rpozos1 (codparti),
  KEY FK_rpozos2 (codcampo),
  KEY FK_rpozos4 (codpozo),
  CONSTRAINT FK_rpozos1 FOREIGN KEY (codparti) REFERENCES rpartida (codparti),
  CONSTRAINT rpozos_ibfk_1 FOREIGN KEY (codsocio) REFERENCES rsocios (codsocio),
  CONSTRAINT rpozos_ibfk_2 FOREIGN KEY (codcampo) REFERENCES rcampos (codcampo) ON UPDATE CASCADE,
  CONSTRAINT rpozos_ibfk_3 FOREIGN KEY (codpozo) REFERENCES rtipopozos (codpozo) ON UPDATE CASCADE
) ENGINE=InnoDB DEFAULT CHARSET=latin1;     

CREATE TABLE rpozos_campos (
  hidrante varchar(10) NOT NULL,
  numlinea smallint(4) unsigned NOT NULL,
  codcampo int(8) unsigned NOT NULL,
  PRIMARY KEY  (hidrante,numlinea),
  KEY FK_rpozos_campos (codcampo),
  CONSTRAINT rpozos_campos_ibfk_1 FOREIGN KEY (hidrante) REFERENCES rpozos (hidrante) ON UPDATE CASCADE,
  CONSTRAINT rpozos_campos_ibfk_2 FOREIGN KEY (codcampo) REFERENCES rcampos (codcampo) ON UPDATE CASCADE
) ENGINE=InnoDB DEFAULT CHARSET=latin1;     

CREATE TABLE rpozos_cooprop (
  hidrante varchar(10) NOT NULL,
  numlinea smallint(3) unsigned NOT NULL,
  codsocio int(6) unsigned NOT NULL,
  porcentaje decimal(5,2) NOT NULL,
  PRIMARY KEY  (hidrante,numlinea),
  KEY FK_rpozos_cooprop (codsocio),
  CONSTRAINT rpozos_cooprop_ibfk_1 FOREIGN KEY (hidrante) REFERENCES rpozos (hidrante) ON UPDATE CASCADE,
  CONSTRAINT rpozos_cooprop_ibfk_2 FOREIGN KEY (codsocio) REFERENCES rsocios (codsocio) ON UPDATE CASCADE
) ENGINE=InnoDB DEFAULT CHARSET=latin1;     

CREATE TABLE rpozos_lectura (
  valvula varchar(255) default NULL,
  sector varchar(255) default NULL,
  lectura_equipo int(11) NOT NULL,
  lectura_bd int(11) NOT NULL,
  id int(11) NOT NULL auto_increment,
  hidrante varchar(255) default NULL,
  fecha_hora datetime NOT NULL,
  contador varchar(255) default NULL,
  cabezal varchar(255) default NULL,
  area int(11) NOT NULL,
  fecproceso date default NULL,
  PRIMARY KEY  (id)
) ENGINE=InnoDB DEFAULT CHARSET=latin1;     

CREATE TABLE rpozticketsmanta (
  numalbar int(7) unsigned NOT NULL,
  fecalbar date NOT NULL,
  codsocio int(6) unsigned NOT NULL,
  codcampo int(8) unsigned NOT NULL,
  hanegada decimal(8,4) default '0.0000',
  precio1 decimal(10,4) NOT NULL default '0.0000',
  importe decimal(8,2) NOT NULL,
  codzonas smallint(4) unsigned NOT NULL,
  poligono smallint(3) NOT NULL,
  parcela int(6) NOT NULL,
  subparce varchar(2) default NULL,
  fecriego date default NULL,
  fecpago date default NULL,
  concepto varchar(100) default NULL,
  PRIMARY KEY  (numalbar,fecalbar),
  KEY FK_rpozticketsmanta1 (codsocio),
  KEY FK_rpozticketsmanta2 (codcampo),
  KEY FK_rpozticketsmanta3 (codzonas),
  CONSTRAINT rpozticketsmanta_ibfk_1 FOREIGN KEY (codsocio) REFERENCES rsocios (codsocio) ON UPDATE CASCADE,
  CONSTRAINT rpozticketsmanta_ibfk_2 FOREIGN KEY (codcampo) REFERENCES rcampos (codcampo) ON UPDATE CASCADE,
  CONSTRAINT rpozticketsmanta_ibfk_3 FOREIGN KEY (codzonas) REFERENCES rzonas (codzonas) ON UPDATE CASCADE
) ENGINE=InnoDB DEFAULT CHARSET=latin1;     

CREATE TABLE rprecios (
  codvarie int(6) unsigned NOT NULL,
  tipofact tinyint(1) unsigned NOT NULL COMMENT '0=Anticipo 1=Liquidacion 2=Industria directa 3=Complementaria 4=Anticipo Genérico 5=Anticipo Retirada',
  contador smallint(3) unsigned NOT NULL,
  fechaini date NOT NULL,
  fechafin date NOT NULL,
  textoper varchar(30) NOT NULL,
  precioindustria decimal(6,4) default NULL,
  PRIMARY KEY  (codvarie,tipofact,contador),
  CONSTRAINT rprecios_ibfk_1 FOREIGN KEY (codvarie) REFERENCES variedades (codvarie) ON UPDATE CASCADE
) ENGINE=InnoDB DEFAULT CHARSET=latin1;     

CREATE TABLE rprecios_calidad (
  codvarie int(6) unsigned NOT NULL,
  tipofact tinyint(1) unsigned NOT NULL COMMENT '0=Anticipo 1=Liquidacion',
  contador smallint(3) unsigned NOT NULL,
  codcalid smallint(2) unsigned NOT NULL,
  precoop decimal(6,4) default NULL,
  presocio decimal(6,4) default NULL,
  PRIMARY KEY  (codvarie,tipofact,contador,codcalid),
  KEY FK_rprecios_calidad (codvarie,codcalid),
  CONSTRAINT rprecios_calidad_ibfk_1 FOREIGN KEY (codvarie, tipofact, contador) REFERENCES rprecios (codvarie, tipofact, contador) ON UPDATE CASCADE,
  CONSTRAINT rprecios_calidad_ibfk_2 FOREIGN KEY (codvarie, codcalid) REFERENCES rcalidad (codvarie, codcalid) ON UPDATE NO ACTION
) ENGINE=InnoDB DEFAULT CHARSET=latin1;     

CREATE TABLE rpretallapoz (
  codzonas smallint(4) unsigned NOT NULL,
  precio1 decimal(10,4) default NULL,
  precio2 decimal(10,4) default NULL,
  PRIMARY KEY  (codzonas),
  KEY FK_rpretallapoz (codzonas)
) ENGINE=InnoDB DEFAULT CHARSET=latin1;     

CREATE TABLE rproceriego (
  codproce smallint(2) unsigned NOT NULL,
  nomproce varchar(30) NOT NULL,
  PRIMARY KEY  (codproce)
) ENGINE=InnoDB DEFAULT CHARSET=latin1;     

CREATE TABLE rpueblos (
  codpobla varchar(6) NOT NULL,
  despobla varchar(30) NOT NULL,
  codsigpa int(6) NOT NULL,
  codigine smallint(3) NOT NULL,
  PRIMARY KEY  (codpobla)
) ENGINE=InnoDB DEFAULT CHARSET=latin1;     

CREATE TABLE rrecasesoria (
  codtraba int(6) NOT NULL,
  fechahora date NOT NULL,
  concepto varchar(30) default NULL,
  importe decimal(10,2) NOT NULL,
  numfactu int(7) NOT NULL,
  idconta tinyint(1) NOT NULL,
  PRIMARY KEY  (codtraba,fechahora),
  CONSTRAINT rrecasesoria_ibfk_1 FOREIGN KEY (codtraba) REFERENCES straba (codtraba) ON UPDATE CASCADE
) ENGINE=InnoDB DEFAULT CHARSET=latin1;     

CREATE TABLE rrecibosnomina (
  codtraba int(6) NOT NULL,
  fechahora date NOT NULL,
  importe decimal(10,2) NOT NULL,
  base34 decimal(10,2) NOT NULL,
  porcsegso1 decimal(5,2) default NULL,
  porcsegso2 decimal(5,2) default NULL,
  porcirpf decimal(5,2) default NULL,
  importesegso1 decimal(10,2) default NULL,
  importesegso2 decimal(10,2) default NULL,
  importeirpf decimal(10,2) default NULL,
  complemento decimal(10,2) default NULL,
  anticipo decimal(10,2) NOT NULL default '0.00',
  neto34 decimal(10,2) default NULL,
  idcontador int(7) NOT NULL,
  PRIMARY KEY  (codtraba,fechahora,idcontador)
) ENGINE=InnoDB DEFAULT CHARSET=latin1;     

CREATE TABLE rrecibpozos (
  codtipom char(3) NOT NULL,
  numfactu int(7) unsigned NOT NULL,
  fecfactu date NOT NULL,
  numlinea int(7) NOT NULL default '1',
  codsocio int(6) unsigned NOT NULL,
  hidrante varchar(10) default NULL,
  baseimpo decimal(8,2) NOT NULL,
  tipoiva smallint(2) default NULL,
  porc_iva decimal(4,2) default NULL,
  imporiva decimal(8,2) default NULL,
  totalfact decimal(8,2) NOT NULL,
  consumo int(7) default NULL,
  impcuota decimal(8,2) default NULL,
  lect_ant int(7) default NULL,
  fech_ant date default NULL,
  lect_act int(7) default NULL,
  fech_act date default NULL,
  consumo1 int(7) default '0',
  precio1 decimal(6,3) default NULL,
  consumo2 int(7) default NULL,
  precio2 decimal(6,3) default NULL,
  concepto varchar(100) default NULL,
  contabilizado tinyint(1) NOT NULL default '0',
  impreso tinyint(1) NOT NULL default '0',
  conceptomo varchar(100) default NULL,
  importemo decimal(8,2) default NULL,
  conceptoar1 varchar(100) default NULL,
  importear1 decimal(8,2) default NULL,
  conceptoar2 varchar(100) default NULL,
  importear2 decimal(8,2) default NULL,
  conceptoar3 varchar(100) default NULL,
  importear3 decimal(8,2) default NULL,
  conceptoar4 varchar(100) default NULL,
  importear4 decimal(8,2) default NULL,
  difdias int(7) default NULL,
  codparti smallint(4) unsigned default NULL,
  calibre smallint(4) default NULL,
  codpozo smallint(3) unsigned default NULL,
  porcdto decimal(4,2) default NULL,
  impdto decimal(8,2) default NULL,
  precio decimal(10,4) default NULL,
  pasaridoc tinyint(1) NOT NULL default '0',
  parcelas varchar(25) default NULL,
  poligono varchar(10) default NULL,
  nroorden int(7) default NULL,
  numalbar int(7) default NULL,
  fecalbar date default NULL,
  escontado tinyint(1) default '0',
  PRIMARY KEY  (codtipom,numfactu,fecfactu,numlinea),
  UNIQUE KEY codtipom (codtipom,numfactu,fecfactu,hidrante),
  KEY FK_rrecibpozos (hidrante),
  KEY FK_rrecibpozos1 (codsocio),
  KEY FK_rrecibpozos2 (codparti),
  KEY FK_rrecibpozos4 (codpozo),
  CONSTRAINT rrecibpozos_ibfk_1 FOREIGN KEY (hidrante) REFERENCES rpozos (hidrante) ON UPDATE CASCADE,
  CONSTRAINT rrecibpozos_ibfk_2 FOREIGN KEY (codsocio) REFERENCES rsocios (codsocio) ON UPDATE CASCADE,
  CONSTRAINT rrecibpozos_ibfk_3 FOREIGN KEY (codparti) REFERENCES rpartida (codparti) ON UPDATE CASCADE,
  CONSTRAINT rrecibpozos_ibfk_4 FOREIGN KEY (codpozo) REFERENCES rtipopozos (codpozo) ON UPDATE CASCADE
) ENGINE=InnoDB DEFAULT CHARSET=latin1;     

CREATE TABLE rrecibpozos_acc (
  codtipom char(3) NOT NULL,
  numfactu int(7) unsigned NOT NULL,
  fecfactu date NOT NULL,
  numlinea int(7) NOT NULL default '0',
  numfases smallint(3) unsigned NOT NULL,
  acciones decimal(5,2) NOT NULL,
  observac varchar(30) default NULL,
  PRIMARY KEY  (codtipom,numfactu,fecfactu,numlinea,numfases),
  KEY FK_rrecibpozos_acc (codtipom,numfactu,fecfactu,numlinea),
  CONSTRAINT rrecibpozos_acc_ibfk_1 FOREIGN KEY (codtipom, numfactu, fecfactu, numlinea) REFERENCES rrecibpozos (codtipom, numfactu, fecfactu, numlinea) ON UPDATE CASCADE
) ENGINE=InnoDB DEFAULT CHARSET=latin1;     

CREATE TABLE rrecibpozos_cam (
  codtipom char(3) NOT NULL,
  numfactu int(7) unsigned NOT NULL,
  fecfactu date NOT NULL,
  numlinea int(7) NOT NULL default '0',
  codcampo int(8) unsigned NOT NULL,
  hanegada decimal(8,4) default '0.0000',
  precio1 decimal(10,4) NOT NULL default '0.0000',
  precio2 decimal(10,4) NOT NULL default '0.0000',
  codzonas smallint(4) NOT NULL default '0',
  poligono smallint(3) NOT NULL,
  parcela int(6) NOT NULL,
  subparce varchar(2) default NULL,
  PRIMARY KEY  (codtipom,numfactu,fecfactu,numlinea,codcampo),
  UNIQUE KEY codtipom (codtipom,numfactu,fecfactu,codcampo),
  KEY FK_rrecibpozoscam (codcampo),
  CONSTRAINT rrecibpozoscam_ibfk_1 FOREIGN KEY (codcampo) REFERENCES rcampos (codcampo) ON UPDATE CASCADE,
  CONSTRAINT rrecibpozoscam_ibfk_2 FOREIGN KEY (codtipom, numfactu, fecfactu, numlinea) REFERENCES rrecibpozos (codtipom, numfactu, fecfactu, numlinea) ON UPDATE CASCADE
) ENGINE=InnoDB DEFAULT CHARSET=latin1;     

CREATE TABLE rrecibpozos_hid (
  codtipom char(3) NOT NULL,
  numfactu int(7) unsigned NOT NULL,
  fecfactu date NOT NULL,
  numlinea int(7) NOT NULL default '0',
  hidrante varchar(10) NOT NULL default '',
  hanegada decimal(8,4) default '0.0000',
  nroorden int(7) default NULL,
  PRIMARY KEY  (codtipom,numfactu,fecfactu,numlinea,hidrante),
  UNIQUE KEY codtipom (codtipom,numfactu,fecfactu,hidrante),
  KEY FK_rrecibpozoshid (hidrante),
  CONSTRAINT rrecibpozoshid_ibfk_1 FOREIGN KEY (hidrante) REFERENCES rpozos (hidrante) ON UPDATE CASCADE,
  CONSTRAINT rrecibpozoshid_ibfk_2 FOREIGN KEY (codtipom, numfactu, fecfactu, numlinea) REFERENCES rrecibpozos (codtipom, numfactu, fecfactu, numlinea) ON UPDATE CASCADE
) ENGINE=InnoDB DEFAULT CHARSET=latin1;     

CREATE TABLE rrendim (
  nromuestra int(6) unsigned NOT NULL,
  fecha datetime NOT NULL,
  numalbar int(6) unsigned NOT NULL,
  acidez decimal(6,2) NOT NULL default '0.00',
  humedad decimal(6,2) NOT NULL default '0.00',
  rendimiento decimal(8,4) NOT NULL default '0.0000',
  PRIMARY KEY  (nromuestra,fecha,numalbar)
) ENGINE=InnoDB DEFAULT CHARSET=latin1;     

CREATE TABLE rriego (
  codriego smallint(2) unsigned NOT NULL,
  nomriego varchar(30) NOT NULL,
  PRIMARY KEY  (codriego)
) ENGINE=InnoDB DEFAULT CHARSET=latin1;     

CREATE TABLE rseccion (
  codsecci smallint(3) unsigned NOT NULL default '0',
  nomsecci varchar(30) NOT NULL,
  empresa_conta smallint(2) unsigned default '0',
  raiz_cliente_socio varchar(10) default NULL,
  raiz_cliente_asociado varchar(10) default NULL,
  raiz_proveedor varchar(10) default NULL,
  codivaexe tinyint(1) NOT NULL default '0',
  PRIMARY KEY  (codsecci)
) ENGINE=InnoDB DEFAULT CHARSET=latin1;     

CREATE TABLE rseguroopcion (
  codseguro varchar(2) NOT NULL,
  nomseguro varchar(30) NOT NULL,
  PRIMARY KEY  (codseguro)
) ENGINE=InnoDB DEFAULT CHARSET=latin1;     

CREATE TABLE rsituacion (
  codsitua smallint(2) unsigned NOT NULL,
  nomsitua varchar(20) NOT NULL,
  bloqueo tinyint(1) unsigned NOT NULL default '0',
  PRIMARY KEY  (codsitua)
) ENGINE=InnoDB DEFAULT CHARSET=latin1;     

CREATE TABLE rsituacioncampo (
  codsitua smallint(2) unsigned NOT NULL,
  nomsitua varchar(20) NOT NULL,
  PRIMARY KEY  (codsitua)
) ENGINE=InnoDB DEFAULT CHARSET=latin1;     

CREATE TABLE rsmsenviados (
  codsocio int(6) unsigned NOT NULL,
  movsocio varchar(10) NOT NULL,
  fechaenvio date NOT NULL,
  horaenvio time NOT NULL,
  texto varchar(150) NOT NULL,
  KEY rsmsenviados_ibfk_1 (codsocio),
  CONSTRAINT rsmsenviados_ibfk_1 FOREIGN KEY (codsocio) REFERENCES rsocios (codsocio) ON UPDATE CASCADE
) ENGINE=InnoDB DEFAULT CHARSET=latin1;     

CREATE TABLE rsocios (
  codsocio int(6) unsigned NOT NULL,
  nifsocio varchar(9) NOT NULL,
  nomsocio varchar(40) NOT NULL,
  dirsocio varchar(35) NOT NULL,
  pobsocio varchar(30) NOT NULL,
  prosocio varchar(30) NOT NULL,
  codpostal varchar(6) NOT NULL,
  fechanac date default NULL,
  telsoci1 varchar(10) default NULL,
  telsoci2 varchar(10) default NULL,
  telsoci3 varchar(10) default NULL,
  movsocio varchar(10) default NULL,
  maisocio varchar(50) default NULL,
  codcoope smallint(2) unsigned NOT NULL default '1',
  iban varchar(4) default NULL,
  codbanco smallint(4) default NULL,
  codsucur smallint(4) default NULL,
  digcontr char(2) default NULL,
  cuentaba varchar(10) default NULL,
  observaciones varchar(250) default NULL,
  fechaalta date NOT NULL,
  fechabaja date default NULL,
  correo tinyint(1) unsigned NOT NULL default '1',
  codiva smallint(2) unsigned NOT NULL default '0',
  tipoirpf tinyint(1) unsigned NOT NULL default '0' COMMENT '0=Modulos 1=E.D. 2=Entidad',
  tipoprod tinyint(1) unsigned NOT NULL default '0' COMMENT '0=Socio 1=Tercero 2=Otra OPA 3=Aportacionista',
  codsitua smallint(2) unsigned zerofill NOT NULL,
  tiporelacion tinyint(1) unsigned NOT NULL default '0' COMMENT '0=Socio 1=Asociado 2=Tercero',
  dirsociocorreo varchar(35) NOT NULL,
  pobsociocorreo varchar(30) NOT NULL,
  prosociocorreo varchar(30) NOT NULL,
  codpostalcorreo varchar(6) NOT NULL,
  esfactadvinterna tinyint(4) NOT NULL default '0',
  codigoggap varchar(4) default NULL,
  emitefact tinyint(1) NOT NULL default '0',
  PRIMARY KEY  (codsocio),
  KEY FK_rsocios (codsitua),
  KEY FK_rsocios1 (codcoope),
  KEY FK_rsocios3 (codigoggap),
  CONSTRAINT rsocios_ibfk_1 FOREIGN KEY (codsitua) REFERENCES rsituacion (codsitua),
  CONSTRAINT rsocios_ibfk_2 FOREIGN KEY (codcoope) REFERENCES rcoope (codcoope) ON UPDATE CASCADE,
  CONSTRAINT rsocios_ibfk_3 FOREIGN KEY (codigoggap) REFERENCES rglobalgap (codigo) ON UPDATE CASCADE
) ENGINE=InnoDB DEFAULT CHARSET=latin1;     

CREATE TABLE rsocios_pozos (
  codsocio int(6) unsigned NOT NULL,
  numfases smallint(3) unsigned NOT NULL,
  acciones decimal(5,2) NOT NULL,
  observac varchar(30) default NULL,
  PRIMARY KEY  (codsocio,numfases),
  CONSTRAINT rsocios_pozos_ibfk_1 FOREIGN KEY (codsocio) REFERENCES rsocios (codsocio)
) ENGINE=InnoDB DEFAULT CHARSET=latin1;     

CREATE TABLE rsocios_seccion (
  codsocio int(6) unsigned NOT NULL,
  codsecci smallint(3) unsigned NOT NULL,
  fecalta date NOT NULL,
  fecbaja date default NULL,
  codmaccli varchar(10) default NULL,
  codmacpro varchar(10) default NULL,
  codiva smallint(2) unsigned NOT NULL,
  PRIMARY KEY  (codsocio,codsecci),
  KEY FK_rsocios_seccion (codsecci),
  CONSTRAINT rsocios_seccion_ibfk_1 FOREIGN KEY (codsocio) REFERENCES rsocios (codsocio),
  CONSTRAINT rsocios_seccion_ibfk_2 FOREIGN KEY (codsecci) REFERENCES rseccion (codsecci)
) ENGINE=InnoDB DEFAULT CHARSET=latin1;     

CREATE TABLE rsocios_telefonos (
  idtelefono varchar(9) NOT NULL default '0',
  imei varchar(25) NOT NULL,
  codsocio int(6) unsigned NOT NULL,
  nif varchar(9) default NULL,
  nombre varchar(40) default NULL,
  direccion varchar(35) default NULL,
  poblacion varchar(30) default NULL,
  provincia varchar(30) default NULL,
  codpostal varchar(6) default NULL,
  telefono1 varchar(10) default NULL,
  mail varchar(50) default NULL,
  codbanco smallint(4) default NULL,
  codsucur smallint(4) default NULL,
  digcontr char(2) default NULL,
  cuentaba varchar(10) default NULL,
  observaciones text,
  sim varchar(25) NOT NULL,
  inactivo tinyint(1) unsigned NOT NULL default '0',
  PRIMARY KEY  (idtelefono,codsocio),
  KEY Tel_IdAsoc (codsocio),
  KEY F_IdAsoc (codsocio),
  CONSTRAINT rsocios_telefonos_ibfk_1 FOREIGN KEY (codsocio) REFERENCES rsocios (codsocio)
) ENGINE=InnoDB DEFAULT CHARSET=latin1;     

CREATE TABLE rtarifaett (
  codvarie int(6) unsigned NOT NULL,
  codigoett smallint(4) NOT NULL,
  precio decimal(8,4) NOT NULL,
  PRIMARY KEY  (codvarie,codigoett),
  CONSTRAINT rtarifaett_ibfk_1 FOREIGN KEY (codvarie) REFERENCES variedades (codvarie) ON UPDATE CASCADE
) ENGINE=InnoDB DEFAULT CHARSET=latin1;     

CREATE TABLE rtarifatra (
  codtarif smallint(2) unsigned NOT NULL,
  nomtarif varchar(20) NOT NULL,
  preciokg decimal(5,4) NOT NULL,
  tipotarifa tinyint(1) unsigned NOT NULL default '0' COMMENT '0=Tarifa 1 / 1=Tarifa 2  / 2=Sin Tarifa',
  PRIMARY KEY  (codtarif)
) ENGINE=InnoDB DEFAULT CHARSET=latin1;     

CREATE TABLE rtelmovil (
  numserie varchar(1) NOT NULL,
  numfactu int(7) unsigned NOT NULL,
  fecfactu date NOT NULL,
  codsocio int(7) unsigned NOT NULL,
  baseimpo decimal(10,2) NOT NULL,
  cuotaiva decimal(10,2) NOT NULL,
  totalfac decimal(10,2) default NULL,
  intconta tinyint(1) NOT NULL,
  PRIMARY KEY  (numserie,numfactu,fecfactu),
  KEY FK_rtelmovil (codsocio),
  CONSTRAINT rtelmovil_ibfk_1 FOREIGN KEY (codsocio) REFERENCES rsocios (codsocio) ON UPDATE CASCADE
) ENGINE=InnoDB DEFAULT CHARSET=latin1;     

CREATE TABLE rtierra (
  codtierra smallint(2) unsigned NOT NULL,
  nomtierra varchar(30) NOT NULL,
  PRIMARY KEY  (codtierra)
) ENGINE=InnoDB DEFAULT CHARSET=latin1;     

CREATE TABLE rtipoapor (
  codaport smallint(3) unsigned NOT NULL,
  nomaport varchar(30) NOT NULL,
  numero int(7) NOT NULL default '0',
  letraser varchar(3) default NULL,
  PRIMARY KEY  (codaport)
) ENGINE=InnoDB DEFAULT CHARSET=latin1;     

CREATE TABLE rtipopozos (
  codpozo smallint(3) unsigned NOT NULL,
  nompozo varchar(40) NOT NULL,
  hastametcub1 int(7) NOT NULL,
  precio1 decimal(7,4) NOT NULL,
  hastametcub2 int(7) default NULL,
  precio2 decimal(7,4) default NULL,
  imporcuota decimal(7,4) NOT NULL,
  imporcuotahda decimal(7,4) NOT NULL,
  PRIMARY KEY  (codpozo)
) ENGINE=InnoDB DEFAULT CHARSET=latin1;     

CREATE TABLE rtransporte (
  codtrans varchar(10) NOT NULL,
  nomtrans varchar(30) NOT NULL,
  matricula varchar(10) default NULL,
  taravehi int(6) default NULL,
  codmacpro varchar(10) default NULL,
  codiva smallint(2) unsigned NOT NULL,
  tipoirpf tinyint(1) unsigned NOT NULL default '0' COMMENT '0=Modulos 1=E.D. 2=Entidad 3=Modulo reg.transportista',
  codforpa smallint(3) unsigned NOT NULL default '0',
  niftrans varchar(9) NOT NULL,
  dirtrans varchar(35) NOT NULL,
  pobtrans varchar(30) NOT NULL,
  protrans varchar(30) NOT NULL,
  codpostal varchar(6) NOT NULL,
  fechanac date default NULL,
  teltran1 varchar(10) default NULL,
  movtrans varchar(10) default NULL,
  maitrans varchar(50) default NULL,
  iban varchar(4) default NULL,
  codbanco smallint(4) default NULL,
  codsucur smallint(4) default NULL,
  digcontr char(2) default NULL,
  cuentaba varchar(10) default NULL,
  sefactura tinyint(1) default '1',
  contador int(7) NOT NULL default '0',
  codtraba int(6) default NULL,
  esfacttrainterna tinyint(1) NOT NULL default '0',
  PRIMARY KEY  (codtrans),
  KEY FK_rtransporte (codtraba),
  CONSTRAINT rtransporte_ibfk_1 FOREIGN KEY (codtraba) REFERENCES straba (codtraba) ON UPDATE CASCADE
) ENGINE=InnoDB DEFAULT CHARSET=latin1;     

CREATE TABLE rzonas (
  codzonas smallint(4) unsigned NOT NULL,
  nomzonas varchar(30) NOT NULL,
  precio1 decimal(8,4) default NULL,
  precio2 decimal(8,4) default NULL,
  PRIMARY KEY  (codzonas)
) ENGINE=InnoDB DEFAULT CHARSET=latin1;     

CREATE TABLE salarios (
  codcateg smallint(2) NOT NULL,
  nomcateg varchar(15) NOT NULL,
  impsalar decimal(6,4) default NULL,
  imphorae decimal(6,4) default NULL,
  dtosirpf decimal(4,2) default NULL,
  dtosegso decimal(4,2) default NULL,
  basescot decimal(6,2) default NULL,
  basesilt decimal(6,2) default NULL,
  tiposala tinyint(4) default NULL,
  imphorafest decimal(6,4) default NULL,
  pluscapataz decimal(10,2) default NULL,
  dtoreten decimal(4,2) default NULL,
  PRIMARY KEY  (codcateg)
) ENGINE=InnoDB DEFAULT CHARSET=latin1;     

CREATE TABLE salmac (
  codartic varchar(16) NOT NULL default '0',
  codalmac smallint(3) unsigned NOT NULL default '0',
  canstock decimal(12,2) NOT NULL default '0.00',
  stockmin decimal(12,2) default '0.00',
  puntoped decimal(12,2) default '0.00',
  stockmax decimal(12,2) default '0.00',
  stockinv decimal(12,2) default '0.00',
  fechainv date default NULL,
  horainve datetime default NULL,
  statusin tinyint(1) unsigned NOT NULL default '0',
  PRIMARY KEY  (codartic,codalmac),
  KEY fkcodartic (codartic),
  KEY fkcodalmac (codalmac),
  CONSTRAINT salmac_ibfk_1 FOREIGN KEY (codartic) REFERENCES sartic (codartic),
  CONSTRAINT salmac_ibfk_2 FOREIGN KEY (codalmac) REFERENCES salmpr (codalmac)
) ENGINE=InnoDB DEFAULT CHARSET=latin1 COMMENT='Articulos x Almacen';     

CREATE TABLE salmpr (
  codalmac smallint(3) unsigned NOT NULL default '0',
  nomalmac varchar(25) NOT NULL default '',
  nrocheps bigint(10) NOT NULL default '1',
  PRIMARY KEY  (codalmac)
) ENGINE=InnoDB DEFAULT CHARSET=latin1 COMMENT='Almacenes Propios';     

CREATE TABLE sartic (
  codartic varchar(16) NOT NULL default '',
  nomartic varchar(40) NOT NULL default '',
  codigoea varchar(13) default NULL,
  codprove int(6) unsigned NOT NULL default '0',
  codfamia smallint(3) unsigned NOT NULL default '0',
  codunida smallint(2) unsigned NOT NULL default '0',
  codtipar char(2) NOT NULL COMMENT 'Tipos Envases: Ifcos, cheps, etc.',
  codigiva tinyint(1) unsigned NOT NULL default '0',
  preciomp decimal(10,4) default NULL,
  preciouc decimal(10,4) default NULL,
  preciove decimal(10,4) NOT NULL default '0.0000',
  ultfecco date default NULL,
  fecaltas date NOT NULL default '0000-00-00',
  textoven varchar(200) default NULL,
  textocom varchar(200) default NULL,
  ctrstock tinyint(1) unsigned NOT NULL default '0',
  PRIMARY KEY  (codartic),
  KEY fkcodfamia (codfamia),
  KEY fkcodunida (codunida),
  KEY fkcodtipar (codtipar),
  KEY iartic1 (nomartic),
  KEY iartic3 (codigoea),
  KEY FK_sartic (codprove),
  CONSTRAINT sartic_ibfk_2 FOREIGN KEY (codfamia) REFERENCES sfamia (codfamia),
  CONSTRAINT sartic_ibfk_4 FOREIGN KEY (codunida) REFERENCES sunida (codunida),
  CONSTRAINT sartic_ibfk_5 FOREIGN KEY (codtipar) REFERENCES stipar (codtipar),
  CONSTRAINT sartic_ibfk_6 FOREIGN KEY (codprove) REFERENCES proveedor (codprove)
) ENGINE=InnoDB DEFAULT CHARSET=latin1 COMMENT='Artículos';     

CREATE TABLE scaalb (
  numalbar int(7) unsigned NOT NULL default '0',
  fechaalb date NOT NULL default '0000-00-00',
  factursn tinyint(1) unsigned NOT NULL default '0',
  codclien int(6) unsigned NOT NULL default '0',
  coddesti smallint(3) unsigned default NULL,
  codforpa smallint(3) unsigned NOT NULL default '0',
  observac varchar(200) default NULL,
  PRIMARY KEY  (numalbar),
  KEY fkCodClien (codclien),
  KEY fkCodDirec (codclien,coddesti),
  KEY fkCodForpa (codforpa),
  KEY numalbar (numalbar),
  CONSTRAINT scaalb_ibfk_1 FOREIGN KEY (codclien) REFERENCES clientes (codclien),
  CONSTRAINT scaalb_ibfk_2 FOREIGN KEY (codclien, coddesti) REFERENCES destinos (codclien, coddesti),
  CONSTRAINT scaalb_ibfk_3 FOREIGN KEY (codforpa) REFERENCES forpago (codforpa)
) ENGINE=InnoDB DEFAULT CHARSET=latin1 COMMENT='Cabecera de Albaranes Envases';     

CREATE TABLE scaalp (
  numalbar varchar(10) NOT NULL default '',
  fechaalb date NOT NULL default '0000-00-00',
  codprove int(6) unsigned NOT NULL default '0',
  nomprove varchar(40) NOT NULL,
  domprove varchar(35) NOT NULL,
  codpobla varchar(6) NOT NULL default '',
  pobprove varchar(30) NOT NULL default '',
  proprove varchar(30) NOT NULL default '',
  nifprove varchar(15) NOT NULL default '',
  telprove varchar(15) default NULL,
  codforpa smallint(3) unsigned NOT NULL default '0',
  dtoppago decimal(4,2) NOT NULL default '0.00',
  dtognral decimal(4,2) NOT NULL default '0.00',
  observa1 varchar(80) default NULL,
  observa2 varchar(80) default NULL,
  observa3 varchar(80) default NULL,
  observa4 varchar(80) default NULL,
  observa5 varchar(80) default NULL,
  numpedpr mediumint(9) default NULL,
  fecpedpr date default NULL,
  PRIMARY KEY  (numalbar,fechaalb,codprove),
  KEY indCodprove (codprove),
  KEY indCodforpa (codforpa),
  KEY indNumalbar (numalbar),
  CONSTRAINT scaalp_ibfk_1 FOREIGN KEY (codprove) REFERENCES proveedor (codprove),
  CONSTRAINT scaalp_ibfk_2 FOREIGN KEY (codforpa) REFERENCES forpago (codforpa)
) ENGINE=InnoDB DEFAULT CHARSET=latin1 COMMENT='Cabecera Albaranes Compras';     

CREATE TABLE scafpa (
  codprove int(6) unsigned NOT NULL default '0',
  numfactu varchar(10) NOT NULL default '',
  fecfactu date NOT NULL default '0000-00-00',
  numalbar varchar(10) NOT NULL default '',
  fechaalb date NOT NULL default '0000-00-00',
  numpedpr mediumint(7) unsigned default NULL,
  fecpedpr date default NULL,
  observa1 varchar(80) default NULL,
  observa2 varchar(80) default NULL,
  observa3 varchar(80) default NULL,
  observa4 varchar(80) default NULL,
  observa5 varchar(80) default NULL,
  PRIMARY KEY  (codprove,numfactu,fecfactu,numalbar),
  KEY fk_factura (codprove,numfactu,fecfactu),
  CONSTRAINT scafpa_ibfk_1 FOREIGN KEY (codprove, numfactu, fecfactu) REFERENCES scafpc (codprove, numfactu, fecfactu)
) ENGINE=InnoDB DEFAULT CHARSET=latin1 COMMENT='Albaranes Factura Proveedor';     

CREATE TABLE scafpc (
  codprove int(6) unsigned NOT NULL default '0',
  numfactu varchar(10) NOT NULL default '',
  fecfactu date NOT NULL default '0000-00-00',
  fecrecep date NOT NULL default '0000-00-00',
  nomprove varchar(40) NOT NULL default '',
  domprove varchar(40) NOT NULL default '',
  codpobla varchar(6) NOT NULL default '',
  pobprove varchar(30) NOT NULL default '',
  proprove varchar(30) NOT NULL default '',
  nifprove varchar(15) NOT NULL default '',
  telprove varchar(15) NOT NULL default '',
  codforpa smallint(3) unsigned NOT NULL default '0',
  brutofac decimal(12,2) NOT NULL default '0.00',
  dtoppago decimal(4,2) NOT NULL default '0.00',
  dtognral decimal(4,2) NOT NULL default '0.00',
  impppago decimal(12,2) NOT NULL default '0.00',
  impgnral decimal(12,2) NOT NULL default '0.00',
  baseiva1 decimal(12,2) NOT NULL default '0.00',
  baseiva2 decimal(12,2) default NULL,
  baseiva3 decimal(12,2) default NULL,
  tipoiva1 tinyint(1) unsigned default NULL,
  tipoiva2 tinyint(1) unsigned default NULL,
  tipoiva3 tinyint(1) unsigned default NULL,
  porciva1 decimal(4,2) default NULL,
  porciva2 decimal(4,2) default NULL,
  porciva3 decimal(4,2) default NULL,
  porcrec1 decimal(4,2) NOT NULL default '0.00',
  porcrec2 decimal(4,2) NOT NULL default '0.00',
  porcrec3 decimal(4,2) NOT NULL default '0.00',
  impoiva1 decimal(12,2) NOT NULL default '0.00',
  impoiva2 decimal(12,2) default NULL,
  impoiva3 decimal(12,2) default NULL,
  imporec1 decimal(12,2) NOT NULL default '0.00',
  imporec2 decimal(12,2) NOT NULL default '0.00',
  imporec3 decimal(12,2) NOT NULL default '0.00',
  totalfac decimal(12,2) NOT NULL default '0.00',
  intconta tinyint(1) unsigned NOT NULL default '0',
  confacpr varchar(15) default NULL,
  PRIMARY KEY  (codprove,numfactu,fecfactu),
  KEY fk_codprove (codprove),
  KEY fk_codforpa (codforpa),
  CONSTRAINT scafpc_ibfk_1 FOREIGN KEY (codprove) REFERENCES proveedor (codprove),
  CONSTRAINT scafpc_ibfk_2 FOREIGN KEY (codforpa) REFERENCES forpago (codforpa)
) ENGINE=InnoDB DEFAULT CHARSET=latin1 COMMENT='Cabecera Factura Proveedor';     

CREATE TABLE scamov (
  codmovim int(7) unsigned NOT NULL default '0',
  codalmac smallint(4) unsigned NOT NULL default '0',
  fecmovim date NOT NULL default '0000-00-00',
  observa1 varchar(200) default NULL,
  situacio tinyint(1) NOT NULL default '0',
  PRIMARY KEY  (codmovim),
  KEY fkMovCodalmac (codalmac),
  CONSTRAINT scamov_ibfk_1 FOREIGN KEY (codalmac) REFERENCES salmpr (codalmac)
) ENGINE=InnoDB DEFAULT CHARSET=latin1 COMMENT='Cab. Movimientos Almacen;';     

CREATE TABLE scappr (
  numpedpr mediumint(7) unsigned NOT NULL default '0',
  fecpedpr date NOT NULL default '0000-00-00',
  codprove int(6) unsigned NOT NULL default '0',
  nomprove varchar(40) NOT NULL,
  domprove varchar(35) NOT NULL default '',
  codpobla varchar(6) NOT NULL default '',
  pobprove varchar(30) NOT NULL default '',
  proprove varchar(30) NOT NULL default '',
  nifprove varchar(15) NOT NULL default '',
  telprove varchar(15) default NULL,
  coddirea tinyint(3) unsigned default '0',
  coddiref tinyint(3) unsigned default '0',
  codforpa smallint(3) unsigned NOT NULL default '0',
  dtognral decimal(4,2) NOT NULL default '0.00',
  dtoppago decimal(4,2) NOT NULL default '0.00',
  restoped tinyint(1) unsigned NOT NULL default '0',
  codclien int(6) unsigned default NULL,
  observa1 varchar(80) default NULL,
  observa2 varchar(80) default NULL,
  observa3 varchar(80) default NULL,
  observa4 varchar(80) default NULL,
  observa5 varchar(80) default NULL,
  tipoporte varchar(25) default NULL,
  PRIMARY KEY  (numpedpr),
  KEY IndFecha (fecpedpr),
  KEY codprove (codprove),
  KEY coddirea (coddirea),
  KEY coddiref (coddiref),
  KEY codforpa (codforpa),
  CONSTRAINT scappr_ibfk_1 FOREIGN KEY (codprove) REFERENCES proveedor (codprove),
  CONSTRAINT scappr_ibfk_2 FOREIGN KEY (coddirea) REFERENCES sdirpr (coddirec),
  CONSTRAINT scappr_ibfk_3 FOREIGN KEY (coddiref) REFERENCES sdirpr (coddirec),
  CONSTRAINT scappr_ibfk_4 FOREIGN KEY (codforpa) REFERENCES forpago (codforpa)
) ENGINE=InnoDB DEFAULT CHARSET=latin1 COMMENT='Cabecera Pedidos Compras';     

CREATE TABLE scartas (
  codCarta smallint(3) unsigned NOT NULL default '0',
  descarta varchar(50) default NULL,
  saludos varchar(80) default NULL,
  parrafo1 text,
  parrafo2 varchar(255) default NULL,
  parrafo3 varchar(255) default NULL,
  desped varchar(110) default NULL,
  textoSMS varchar(150) default NULL,
  documrpt varchar(100) default NULL,
  PRIMARY KEY  (codCarta)
) ENGINE=InnoDB DEFAULT CHARSET=latin1 COMMENT='Cartas para Informes';     

CREATE TABLE scaser (
  codservi int(7) unsigned NOT NULL default '0',
  clisoc tinyint(1) unsigned NOT NULL default '0',
  codalmac smallint(4) unsigned NOT NULL default '0',
  fecmovim date NOT NULL default '0000-00-00',
  codclien int(6) unsigned default '0',
  codsocio int(6) unsigned default NULL,
  observa1 varchar(200) default NULL,
  situacio tinyint(1) NOT NULL default '0',
  matriveh varchar(12) default NULL,
  PRIMARY KEY  (codservi,clisoc),
  KEY fkMovCodalmac (codalmac),
  KEY fkMovCodclien (codclien),
  KEY fkMovCodsocio (codsocio),
  CONSTRAINT scaser_ibfk_1 FOREIGN KEY (codalmac) REFERENCES salmpr (codalmac),
  CONSTRAINT scaser_ibfk_2 FOREIGN KEY (codclien) REFERENCES clientes (codclien),
  CONSTRAINT scaser_ibfk_3 FOREIGN KEY (codsocio) REFERENCES rsocios (codsocio)
) ENGINE=InnoDB DEFAULT CHARSET=latin1;     

CREATE TABLE scatra (
  codtrasp int(7) unsigned NOT NULL default '0',
  fechatra date NOT NULL default '0000-00-00',
  almaorig smallint(3) unsigned NOT NULL default '0',
  almadest smallint(3) unsigned NOT NULL default '0',
  situacio tinyint(1) unsigned NOT NULL default '0',
  observa1 varchar(200) default NULL,
  PRIMARY KEY  (codtrasp),
  KEY fkTrasAlmaorig (almaorig),
  KEY fkTrasAlmadest (almadest),
  CONSTRAINT scatra_ibfk_1 FOREIGN KEY (almaorig) REFERENCES salmpr (codalmac),
  CONSTRAINT scatra_ibfk_2 FOREIGN KEY (almadest) REFERENCES salmpr (codalmac)
) ENGINE=InnoDB DEFAULT CHARSET=latin1 COMMENT='Cab. Traspaso Almacenes';     

CREATE TABLE schalp (
  numalbar varchar(10) NOT NULL default '',
  fechaalb date NOT NULL default '0000-00-00',
  codprove int(6) unsigned NOT NULL default '0',
  codigusu int(7) unsigned NOT NULL default '0',
  fechelim date NOT NULL default '0000-00-00',
  codincid smallint(3) NOT NULL default '0',
  nomprove varchar(40) NOT NULL,
  domprove varchar(35) NOT NULL,
  codpobla varchar(6) NOT NULL default '',
  pobprove varchar(30) NOT NULL default '',
  proprove varchar(30) NOT NULL default '',
  nifprove varchar(15) NOT NULL default '',
  telprove varchar(15) default NULL,
  codforpa smallint(3) unsigned NOT NULL default '0',
  dtoppago decimal(4,2) NOT NULL default '0.00',
  dtognral decimal(4,2) NOT NULL default '0.00',
  observa1 varchar(80) default NULL,
  observa2 varchar(80) default NULL,
  observa3 varchar(80) default NULL,
  observa4 varchar(80) default NULL,
  observa5 varchar(80) default NULL,
  numpedpr mediumint(9) default NULL,
  fecpedpr date default NULL,
  PRIMARY KEY  (numalbar,fechaalb,codprove),
  KEY indCodprove (codprove),
  KEY indCodforpa (codforpa),
  KEY fkCodIncid (codincid),
  KEY indNumalbar (numalbar),
  CONSTRAINT schalp_ibfk_2 FOREIGN KEY (codprove) REFERENCES proveedor (codprove),
  CONSTRAINT schalp_ibfk_3 FOREIGN KEY (codforpa) REFERENCES forpago (codforpa),
  CONSTRAINT schalp_ibfk_5 FOREIGN KEY (codincid) REFERENCES inciden (codincid)
) ENGINE=InnoDB DEFAULT CHARSET=latin1 COMMENT='Cabecera Historico Albaranes Compras';     

CREATE TABLE schmov (
  codmovim int(7) unsigned NOT NULL default '0',
  fecmovim date NOT NULL default '0000-00-00',
  hormovim datetime NOT NULL default '2000-00-00 00:00:00',
  codalmac smallint(4) unsigned NOT NULL default '0',
  observa1 varchar(200) default NULL,
  PRIMARY KEY  (codmovim,fecmovim),
  KEY fkMovCodalmac (codalmac),
  CONSTRAINT schmov_ibfk_1 FOREIGN KEY (codalmac) REFERENCES salmpr (codalmac)
) ENGINE=InnoDB DEFAULT CHARSET=latin1 COMMENT='Historico Cab. Movimientos Almacen; InnoDB free: 21504 kB; (';     

CREATE TABLE schppr (
  numpedpr mediumint(7) unsigned NOT NULL default '0',
  fecpedpr date NOT NULL default '0000-00-00',
  codigusu int(7) unsigned NOT NULL default '0',
  fechelim date NOT NULL default '0000-00-00',
  codincid smallint(3) NOT NULL default '0',
  codprove int(6) unsigned NOT NULL default '0',
  nomprove varchar(40) NOT NULL,
  domprove varchar(35) NOT NULL default '',
  codpobla varchar(6) NOT NULL default '',
  pobprove varchar(30) NOT NULL default '',
  proprove varchar(30) NOT NULL default '',
  nifprove varchar(15) NOT NULL default '',
  telprove varchar(15) default NULL,
  coddirea tinyint(3) unsigned default '0',
  coddiref tinyint(3) unsigned default '0',
  codforpa smallint(3) unsigned NOT NULL default '0',
  dtognral decimal(4,2) NOT NULL default '0.00',
  dtoppago decimal(4,2) NOT NULL default '0.00',
  restoped tinyint(1) unsigned NOT NULL default '0',
  codclien int(6) unsigned default NULL,
  observa1 varchar(80) default NULL,
  observa2 varchar(80) default NULL,
  observa3 varchar(80) default NULL,
  observa4 varchar(80) default NULL,
  observa5 varchar(80) default NULL,
  tipoporte varchar(25) default NULL,
  PRIMARY KEY  (numpedpr,fecpedpr),
  KEY IndFecha (fecpedpr),
  KEY codprove (codprove),
  KEY coddirea (coddirea),
  KEY coddiref (coddiref),
  KEY codforpa (codforpa),
  KEY fkCodIncid (codincid),
  CONSTRAINT schppr_ibfk_1 FOREIGN KEY (codprove) REFERENCES proveedor (codprove),
  CONSTRAINT schppr_ibfk_2 FOREIGN KEY (coddirea) REFERENCES sdirpr (coddirec),
  CONSTRAINT schppr_ibfk_3 FOREIGN KEY (coddiref) REFERENCES sdirpr (coddirec),
  CONSTRAINT schppr_ibfk_4 FOREIGN KEY (codforpa) REFERENCES forpago (codforpa),
  CONSTRAINT schppr_ibfk_5 FOREIGN KEY (codincid) REFERENCES inciden (codincid)
) ENGINE=InnoDB DEFAULT CHARSET=latin1 COMMENT='Cabecera Historico Pedidos Compras';     

CREATE TABLE schser (
  codservi int(7) unsigned NOT NULL default '0',
  clisoc tinyint(1) unsigned NOT NULL default '0',
  codalmac smallint(4) unsigned NOT NULL default '0',
  fecmovim date NOT NULL default '0000-00-00',
  hormovim datetime NOT NULL,
  codclien int(6) unsigned default '0',
  codsocio int(6) unsigned default NULL,
  observa1 varchar(200) default NULL,
  situacio tinyint(1) NOT NULL default '0',
  matriveh varchar(12) default NULL,
  PRIMARY KEY  (codservi,clisoc),
  KEY fkMovhCodalmac (codalmac),
  KEY fkMovhCodclien (codclien),
  KEY fkMovhCodsocio (codsocio),
  CONSTRAINT schser_ibfk_1 FOREIGN KEY (codalmac) REFERENCES salmpr (codalmac),
  CONSTRAINT schser_ibfk_2 FOREIGN KEY (codclien) REFERENCES clientes (codclien),
  CONSTRAINT schser_ibfk_3 FOREIGN KEY (codsocio) REFERENCES rsocios (codsocio)
) ENGINE=InnoDB DEFAULT CHARSET=latin1;     

CREATE TABLE schtra (
  codtrasp int(7) unsigned NOT NULL default '0',
  fechatra date NOT NULL default '0000-00-00',
  hormovim datetime NOT NULL default '2000-00-00 00:00:00',
  almaorig smallint(3) unsigned NOT NULL default '0',
  almadest smallint(3) unsigned NOT NULL default '0',
  observa1 varchar(200) default NULL,
  PRIMARY KEY  (codtrasp,fechatra),
  KEY fkHTrasAlmaorig (almaorig),
  KEY fkHTrasAlmadest (almadest),
  CONSTRAINT schtra_ibfk_1 FOREIGN KEY (almaorig) REFERENCES salmpr (codalmac),
  CONSTRAINT schtra_ibfk_2 FOREIGN KEY (almadest) REFERENCES salmpr (codalmac)
) ENGINE=InnoDB DEFAULT CHARSET=latin1 COMMENT='Historico Cab. Traspaso Almacenes';     

CREATE TABLE scryst (
  codcryst smallint(4) unsigned NOT NULL default '0',
  nomcryst varchar(30) NOT NULL default '',
  documrpt varchar(100) NOT NULL default '',
  aridocrpt varchar(100) NOT NULL,
  codigiso varchar(10) default NULL,
  codigrev tinyint(2) unsigned default NULL,
  lineapi1 varchar(140) default NULL,
  lineapi2 varchar(140) default NULL,
  lineapi3 varchar(140) default NULL,
  lineapi4 varchar(140) default NULL,
  lineapi5 varchar(140) default NULL,
  imprimedirecto tinyint(4) unsigned NOT NULL default '0',
  PRIMARY KEY  (codcryst)
) ENGINE=InnoDB DEFAULT CHARSET=latin1 COMMENT='Tipos de Documentos';     

CREATE TABLE sdirpr (
  coddirec tinyint(3) unsigned NOT NULL default '0',
  tipodire tinyint(1) unsigned NOT NULL default '0',
  nomdirec varchar(40) NOT NULL default '',
  domdirec varchar(35) NOT NULL default '',
  codpobla varchar(6) NOT NULL default '',
  pobdirec varchar(30) NOT NULL default '',
  prodirec varchar(30) NOT NULL default '',
  responsa varchar(35) default NULL,
  PRIMARY KEY  (coddirec)
) ENGINE=InnoDB DEFAULT CHARSET=latin1 COMMENT='Direcciones Compras';     

CREATE TABLE sfamia (
  codfamia smallint(4) unsigned NOT NULL default '0',
  nomfamia varchar(25) NOT NULL default '',
  ctaventa varchar(10) NOT NULL default '',
  ctacompr varchar(10) NOT NULL default '',
  aboventa varchar(10) NOT NULL default '',
  abocompr varchar(10) NOT NULL default '',
  ctavent1 varchar(10) NOT NULL default '',
  abovent1 varchar(10) NOT NULL default '',
  codccost char(4) default NULL,
  PRIMARY KEY  (codfamia)
) ENGINE=InnoDB DEFAULT CHARSET=latin1 COMMENT='Familias de Articulos';     

CREATE TABLE shinve (
  codartic varchar(16) NOT NULL default '0',
  codalmac smallint(3) unsigned NOT NULL default '0',
  fechainv date NOT NULL default '0000-00-00',
  horainve datetime NOT NULL default '0000-00-00 00:00:00',
  existenc decimal(12,2) NOT NULL default '0.00',
  PRIMARY KEY  (codartic,codalmac,fechainv,horainve),
  KEY fkInvenCodartic (codartic),
  KEY fkInvenCodalmac (codalmac),
  CONSTRAINT shinve_ibfk_1 FOREIGN KEY (codartic) REFERENCES sartic (codartic),
  CONSTRAINT shinve_ibfk_2 FOREIGN KEY (codalmac) REFERENCES salmpr (codalmac)
) ENGINE=InnoDB DEFAULT CHARSET=latin1 COMMENT='Historico Inventario';     

CREATE TABLE sinven (
  codartic varchar(16) NOT NULL default '0',
  codalmac smallint(3) unsigned NOT NULL default '0',
  codfamia smallint(4) unsigned NOT NULL default '0',
  codprove int(6) unsigned NOT NULL default '0',
  fechainv date NOT NULL default '0000-00-00',
  horainve datetime NOT NULL default '0000-00-00 00:00:00',
  existenc decimal(12,2) NOT NULL default '0.00',
  PRIMARY KEY  (codartic,codalmac),
  KEY fkInvenCodartic (codartic),
  KEY fkInvenCodalmac (codalmac),
  KEY fkInvenCodfamia (codfamia),
  KEY fkInvenCodprove (codprove),
  CONSTRAINT sinven_ibfk_1 FOREIGN KEY (codartic) REFERENCES sartic (codartic),
  CONSTRAINT sinven_ibfk_2 FOREIGN KEY (codalmac) REFERENCES salmpr (codalmac),
  CONSTRAINT sinven_ibfk_3 FOREIGN KEY (codfamia) REFERENCES sfamia (codfamia),
  CONSTRAINT sinven_ibfk_4 FOREIGN KEY (codprove) REFERENCES proveedor (codprove)
) ENGINE=InnoDB DEFAULT CHARSET=latin1 COMMENT='Inventario Real';     

CREATE TABLE slhalp (
  numalbar varchar(10) NOT NULL default '',
  fechaalb date NOT NULL default '0000-00-00',
  codprove int(6) unsigned NOT NULL default '0',
  numlinea smallint(5) unsigned NOT NULL default '0',
  codartic varchar(16) NOT NULL default '',
  codalmac smallint(3) unsigned NOT NULL default '0',
  nomartic varchar(40) NOT NULL default '',
  ampliaci varchar(60) default NULL,
  cantidad decimal(12,2) default NULL,
  precioar decimal(10,4) NOT NULL default '0.0000',
  dtoline1 decimal(4,2) NOT NULL default '0.00',
  dtoline2 decimal(4,2) NOT NULL default '0.00',
  importel decimal(12,2) NOT NULL default '0.00',
  PRIMARY KEY  (numalbar,fechaalb,codprove,numlinea),
  KEY indCodalmac (codalmac),
  KEY indCodartic (codartic),
  KEY codartic (codartic,codalmac),
  KEY numalbar (numalbar,fechaalb,codprove),
  CONSTRAINT slhalp_ibfk_1 FOREIGN KEY (numalbar, fechaalb, codprove) REFERENCES schalp (numalbar, fechaalb, codprove),
  CONSTRAINT slhalp_ibfk_2 FOREIGN KEY (codartic, codalmac) REFERENCES salmac (codartic, codalmac)
) ENGINE=InnoDB DEFAULT CHARSET=latin1 COMMENT='Historico Lineas Albaranes Compras';     

CREATE TABLE slhmov (
  codmovim int(7) unsigned NOT NULL default '0',
  fecmovim date NOT NULL default '0000-00-00',
  numlinea smallint(4) unsigned NOT NULL default '0',
  codartic varchar(16) NOT NULL default '',
  cantidad decimal(10,2) NOT NULL default '0.00',
  tipomovi tinyint(1) unsigned NOT NULL default '0',
  motimovi varchar(50) default NULL,
  PRIMARY KEY  (codmovim,fecmovim,numlinea),
  KEY fkCabMov (codmovim),
  KEY fkMovCodartic (codartic),
  CONSTRAINT slhmov_ibfk_1 FOREIGN KEY (codmovim) REFERENCES schmov (codmovim),
  CONSTRAINT slhmov_ibfk_2 FOREIGN KEY (codartic) REFERENCES sartic (codartic)
) ENGINE=InnoDB DEFAULT CHARSET=latin1 COMMENT='Historico Lineas Movimientos Almacen';     

CREATE TABLE slhppr (
  numpedpr mediumint(7) unsigned NOT NULL default '0',
  fecpedpr date NOT NULL default '0000-00-00',
  numlinea smallint(4) unsigned NOT NULL default '0',
  codartic varchar(16) NOT NULL default '',
  codalmac smallint(3) unsigned NOT NULL default '0',
  nomartic varchar(40) default NULL,
  ampliaci varchar(60) default NULL,
  cantidad decimal(12,2) NOT NULL default '0.00',
  recibida decimal(12,2) default NULL,
  precioar decimal(10,4) NOT NULL default '0.0000',
  dtoline1 decimal(4,2) NOT NULL default '0.00',
  dtoline2 decimal(4,2) NOT NULL default '0.00',
  importel decimal(12,2) default NULL,
  PRIMARY KEY  (numpedpr,fecpedpr,numlinea),
  KEY fkNumPed (numpedpr,fecpedpr),
  KEY codartic (codartic,codalmac),
  CONSTRAINT slhppr_ibfk_1 FOREIGN KEY (numpedpr, fecpedpr) REFERENCES schppr (numpedpr, fecpedpr),
  CONSTRAINT slhppr_ibfk_2 FOREIGN KEY (codartic, codalmac) REFERENCES salmac (codartic, codalmac)
) ENGINE=InnoDB DEFAULT CHARSET=latin1 COMMENT='Lineas Historico Pedidos Compras';     

CREATE TABLE slhser (
  codservi int(7) unsigned NOT NULL default '0',
  clisoc tinyint(1) unsigned NOT NULL default '0',
  fecmovim date NOT NULL,
  numlinea smallint(4) unsigned NOT NULL default '0',
  codartic varchar(16) NOT NULL default '',
  cantidad decimal(10,2) NOT NULL default '0.00',
  tipomovi tinyint(1) unsigned NOT NULL default '0',
  motimovi varchar(50) default NULL,
  precioar decimal(10,4) NOT NULL default '0.0000',
  importel decimal(12,2) NOT NULL default '0.00',
  PRIMARY KEY  (codservi,clisoc,numlinea),
  KEY fkCabhServ (codservi,clisoc),
  KEY fkMovhCodartic (codartic),
  CONSTRAINT slhser_ibfk_1 FOREIGN KEY (codservi, clisoc) REFERENCES schser (codservi, clisoc),
  CONSTRAINT slhser_ibfk_2 FOREIGN KEY (codartic) REFERENCES sartic (codartic)
) ENGINE=InnoDB DEFAULT CHARSET=latin1 COMMENT='Lineas Servicios Clientes/Socios';     

CREATE TABLE slhtra (
  codtrasp int(7) unsigned NOT NULL default '0',
  fechamov date NOT NULL default '0000-00-00',
  numlinea smallint(4) unsigned NOT NULL default '0',
  codartic varchar(16) NOT NULL default '',
  cantidad decimal(12,2) NOT NULL default '0.00',
  observa2 varchar(50) default NULL,
  PRIMARY KEY  (codtrasp,fechamov,numlinea),
  KEY fkCabHTras (codtrasp),
  KEY fkCodartic (codartic),
  CONSTRAINT slhtra_ibfk_1 FOREIGN KEY (codtrasp) REFERENCES schtra (codtrasp),
  CONSTRAINT slhtra_ibfk_2 FOREIGN KEY (codartic) REFERENCES sartic (codartic)
) ENGINE=InnoDB DEFAULT CHARSET=latin1 COMMENT='Historico Lineas Traspaso Almacenes';     

CREATE TABLE slialb (
  numalbar int(7) unsigned NOT NULL default '0',
  numlinea smallint(5) unsigned NOT NULL default '0',
  codalmac smallint(3) unsigned NOT NULL default '0',
  codartic varchar(16) NOT NULL default '',
  cantidad decimal(12,2) NOT NULL default '0.00',
  precioar decimal(10,4) NOT NULL default '0.0000',
  dtolinea decimal(4,2) NOT NULL default '0.00',
  importel decimal(12,2) NOT NULL default '0.00',
  ampliaci varchar(60) default NULL,
  codigiva smallint(2) NOT NULL,
  PRIMARY KEY  (numalbar,numlinea),
  KEY fkNumAlb (numalbar),
  KEY fkArtAlmac (codartic,codalmac),
  CONSTRAINT slialb_ibfk_2 FOREIGN KEY (codartic, codalmac) REFERENCES salmac (codartic, codalmac),
  CONSTRAINT slialb_ibfk_3 FOREIGN KEY (numalbar) REFERENCES scaalb (numalbar) ON UPDATE CASCADE
) ENGINE=InnoDB DEFAULT CHARSET=latin1 COMMENT='Lineas de Albaranes de Envases';     

CREATE TABLE slialp (
  numalbar varchar(10) NOT NULL default '',
  fechaalb date NOT NULL default '0000-00-00',
  codprove int(6) unsigned NOT NULL default '0',
  numlinea smallint(5) unsigned NOT NULL default '0',
  codartic varchar(16) NOT NULL default '',
  codalmac smallint(3) unsigned NOT NULL default '0',
  nomartic varchar(40) NOT NULL default '',
  ampliaci varchar(60) default NULL,
  cantidad decimal(12,2) default NULL,
  precioar decimal(10,4) NOT NULL default '0.0000',
  dtoline1 decimal(4,2) NOT NULL default '0.00',
  dtoline2 decimal(4,2) NOT NULL default '0.00',
  importel decimal(12,2) NOT NULL default '0.00',
  PRIMARY KEY  (numalbar,fechaalb,codprove,numlinea),
  KEY indCodalmac (codalmac),
  KEY indCodartic (codartic),
  KEY codartic (codartic,codalmac),
  KEY numalbar (numalbar,fechaalb,codprove),
  CONSTRAINT slialp_ibfk_1 FOREIGN KEY (numalbar, fechaalb, codprove) REFERENCES scaalp (numalbar, fechaalb, codprove),
  CONSTRAINT slialp_ibfk_2 FOREIGN KEY (codartic, codalmac) REFERENCES salmac (codartic, codalmac)
) ENGINE=InnoDB DEFAULT CHARSET=latin1;     

CREATE TABLE slifpc (
  codprove int(6) unsigned NOT NULL default '0',
  numfactu varchar(10) NOT NULL default '',
  fecfactu date NOT NULL default '0000-00-00',
  numalbar varchar(10) NOT NULL default '',
  numlinea smallint(4) unsigned NOT NULL default '0',
  codalmac smallint(3) unsigned NOT NULL default '0',
  codartic varchar(16) NOT NULL default '',
  nomartic varchar(40) NOT NULL default '',
  ampliaci varchar(60) default NULL,
  cantidad decimal(12,2) NOT NULL default '0.00',
  precioar decimal(10,4) NOT NULL default '0.0000',
  dtoline1 decimal(4,2) NOT NULL default '0.00',
  dtoline2 decimal(4,2) NOT NULL default '0.00',
  importel decimal(12,2) NOT NULL default '0.00',
  numlotes varchar(15) default NULL,
  PRIMARY KEY  (codprove,numfactu,fecfactu,numalbar,numlinea),
  KEY fk_AlbFactura (codprove,numfactu,fecfactu,numalbar),
  KEY fk_salmac (codartic,codalmac),
  CONSTRAINT slifpc_ibfk_1 FOREIGN KEY (codprove, numfactu, fecfactu, numalbar) REFERENCES scafpa (codprove, numfactu, fecfactu, numalbar),
  CONSTRAINT slifpc_ibfk_2 FOREIGN KEY (codartic, codalmac) REFERENCES salmac (codartic, codalmac)
) ENGINE=InnoDB DEFAULT CHARSET=latin1 COMMENT='Lineas Factura Proveedor';     

CREATE TABLE slimov (
  codmovim int(7) unsigned NOT NULL default '0',
  numlinea smallint(4) unsigned NOT NULL default '0',
  codartic varchar(16) NOT NULL default '',
  cantidad decimal(10,2) NOT NULL default '0.00',
  tipomovi tinyint(1) unsigned NOT NULL default '0',
  motimovi varchar(50) default NULL,
  PRIMARY KEY  (codmovim,numlinea),
  KEY fkCabMovim (codmovim),
  KEY fkMovCodartic (codartic),
  CONSTRAINT slimov_ibfk_1 FOREIGN KEY (codmovim) REFERENCES scamov (codmovim),
  CONSTRAINT slimov_ibfk_2 FOREIGN KEY (codartic) REFERENCES sartic (codartic)
) ENGINE=InnoDB DEFAULT CHARSET=latin1 COMMENT='Lineas Movimientos Almacen';     

CREATE TABLE slippr (
  numpedpr mediumint(7) unsigned NOT NULL default '0',
  numlinea smallint(4) unsigned NOT NULL default '0',
  codartic varchar(16) NOT NULL default '',
  codalmac smallint(3) unsigned NOT NULL default '0',
  nomartic varchar(40) default NULL,
  ampliaci varchar(60) default NULL,
  cantidad decimal(12,2) NOT NULL default '0.00',
  recibida decimal(12,2) default NULL,
  precioar decimal(10,4) NOT NULL default '0.0000',
  dtoline1 decimal(4,2) NOT NULL default '0.00',
  dtoline2 decimal(4,2) NOT NULL default '0.00',
  importel decimal(12,2) default NULL,
  PRIMARY KEY  (numpedpr,numlinea),
  KEY codalmac (codalmac,codartic),
  KEY codartic (codartic,codalmac),
  CONSTRAINT slippr_ibfk_1 FOREIGN KEY (codartic, codalmac) REFERENCES salmac (codartic, codalmac)
) ENGINE=InnoDB DEFAULT CHARSET=latin1 COMMENT='Lineas Pedidos Compras';     

CREATE TABLE sliser (
  codservi int(7) unsigned NOT NULL default '0',
  clisoc tinyint(1) unsigned NOT NULL default '0',
  numlinea smallint(4) unsigned NOT NULL default '0',
  codartic varchar(16) NOT NULL default '',
  cantidad decimal(10,2) NOT NULL default '0.00',
  tipomovi tinyint(1) unsigned NOT NULL default '0',
  motimovi varchar(50) default NULL,
  precioar decimal(10,4) NOT NULL default '0.0000',
  importel decimal(12,2) NOT NULL default '0.00',
  PRIMARY KEY  (codservi,clisoc,numlinea),
  KEY fkCabServ (codservi,clisoc),
  KEY fkMovCodartic (codartic),
  CONSTRAINT sliser_ibfk_1 FOREIGN KEY (codservi, clisoc) REFERENCES scaser (codservi, clisoc),
  CONSTRAINT sliser_ibfk_2 FOREIGN KEY (codartic) REFERENCES sartic (codartic)
) ENGINE=InnoDB DEFAULT CHARSET=latin1 COMMENT='Lineas Servicios Clientes/Socios';     

CREATE TABLE slisp1 (
  codartic varchar(16) NOT NULL default '',
  codprove int(6) unsigned NOT NULL default '0',
  numlinea smallint(4) unsigned NOT NULL default '0',
  fechacam date NOT NULL default '0000-00-00',
  precioac decimal(10,4) NOT NULL default '0.0000',
  PRIMARY KEY  (codartic,codprove,numlinea),
  CONSTRAINT slisp1_ibfk_1 FOREIGN KEY (codartic, codprove) REFERENCES slispr (codartic, codprove)
) ENGINE=InnoDB DEFAULT CHARSET=latin1 COMMENT='Lineas Precios Proveedor';     

CREATE TABLE slispr (
  codartic varchar(16) NOT NULL default '',
  codprove int(6) unsigned NOT NULL default '0',
  precioac decimal(10,4) NOT NULL default '0.0000',
  fechanue date default NULL,
  precionu decimal(10,4) default NULL,
  dtopermi tinyint(1) unsigned NOT NULL default '0',
  cantfija decimal(8,2) default NULL,
  cantmini decimal(8,2) default NULL,
  fechaini date default NULL,
  fechafin date default NULL,
  preciopr decimal(10,4) default NULL,
  dtoperm1 tinyint(1) unsigned NOT NULL default '0',
  dtoline1 decimal(4,2) default NULL,
  dtoline2 decimal(4,2) default NULL,
  PRIMARY KEY  (codartic,codprove),
  KEY codartic (codartic),
  KEY codprove (codprove),
  CONSTRAINT slispr_ibfk_1 FOREIGN KEY (codartic) REFERENCES sartic (codartic),
  CONSTRAINT slispr_ibfk_2 FOREIGN KEY (codprove) REFERENCES proveedor (codprove)
) ENGINE=InnoDB DEFAULT CHARSET=latin1 COMMENT='Cabecera Precios Proveedor';     

CREATE TABLE slitra (
  codtrasp int(7) unsigned NOT NULL default '0',
  numlinea smallint(4) unsigned NOT NULL default '0',
  codartic varchar(16) NOT NULL default '',
  cantidad decimal(12,2) NOT NULL default '0.00',
  observa2 varchar(50) default NULL,
  PRIMARY KEY  (codtrasp,numlinea),
  KEY fkCabTras (codtrasp),
  KEY fkCodartic (codartic),
  CONSTRAINT slitra_ibfk_1 FOREIGN KEY (codtrasp) REFERENCES scatra (codtrasp),
  CONSTRAINT slitra_ibfk_2 FOREIGN KEY (codartic) REFERENCES sartic (codartic)
) ENGINE=InnoDB DEFAULT CHARSET=latin1 COMMENT='Lineas Traspaso Almacenes';     

CREATE TABLE slog (
  fecha datetime NOT NULL,
  accion tinyint(3) unsigned NOT NULL default '0',
  usuario varchar(30) default NULL,
  pc varchar(30) default NULL,
  descripcion varchar(255) default NULL,
  procedencia tinyint(1) unsigned NOT NULL default '0' COMMENT '0=Comercial 1=Recoleccion',
  tabla varchar(100) default NULL,
  cp varchar(100) default NULL,
  cadena text,
  valorant text,
  PRIMARY KEY  (accion,fecha)
) ENGINE=MyISAM DEFAULT CHARSET=latin1;     

CREATE TABLE smoval (
  codartic varchar(16) NOT NULL default '0',
  codalmac smallint(3) unsigned NOT NULL default '0',
  fechamov date NOT NULL default '0000-00-00',
  horamovi datetime NOT NULL default '0000-00-00 00:00:00',
  tipomovi tinyint(1) unsigned NOT NULL default '0',
  detamovi char(3) NOT NULL default '',
  cantidad decimal(10,2) NOT NULL default '0.00',
  impormov decimal(12,2) NOT NULL default '0.00',
  codigope int(6) unsigned NOT NULL default '0',
  letraser char(1) default NULL,
  document varchar(10) NOT NULL default '0',
  numlinea smallint(5) unsigned NOT NULL default '0',
  KEY fkCodArtic (codartic),
  KEY fkCodAlmac (codartic,codalmac),
  KEY fkDetaMovi (detamovi),
  CONSTRAINT smoval_ibfk_1 FOREIGN KEY (codartic) REFERENCES sartic (codartic),
  CONSTRAINT smoval_ibfk_2 FOREIGN KEY (codartic, codalmac) REFERENCES salmac (codartic, codalmac)
) ENGINE=InnoDB DEFAULT CHARSET=latin1 COMMENT='Movimientos Articulos';     

CREATE TABLE sparam (
  codparam tinyint(1) unsigned NOT NULL default '0',
  diremail varchar(50) default NULL,
  smtphost varchar(50) default NULL,
  smtpuser varchar(50) default NULL,
  smtppass varchar(50) default NULL,
  websoporte varchar(100) default NULL,
  serconta varchar(30) default NULL,
  usuconta varchar(20) default NULL,
  pasconta varchar(20) default NULL,
  numconta tinyint(2) unsigned default NULL,
  tipoprecio tinyint(1) default NULL COMMENT '0 = Precio Medio Ponderado/ 1 = Ultimo precio compra',
  inventar tinyint(1) unsigned NOT NULL default '0',
  ctrstock tinyint(1) unsigned NOT NULL default '0',
  diapago1 tinyint(2) unsigned default NULL,
  diapago2 tinyint(2) unsigned default NULL,
  diapago3 tinyint(2) unsigned default NULL,
  mesnogir tinyint(2) unsigned default NULL,
  limpesobrutcmr int(7) unsigned NOT NULL default '0' COMMENT 'Limite Peso Bruto CMR',
  codivatrans tinyint(1) unsigned NOT NULL COMMENT 'Iva Factura Portes ',
  ctatrareten varchar(10) default NULL,
  ctaabotrans varchar(10) default NULL,
  codivanormal tinyint(1) unsigned NOT NULL COMMENT 'Iva Normal Cliente ',
  codivaexento tinyint(1) unsigned NOT NULL COMMENT 'Iva Exento Cliente',
  codivarecargo tinyint(1) unsigned NOT NULL COMMENT 'Iva Recargo Equiv.Cliente',
  hayaridoc tinyint(1) unsigned NOT NULL default '0',
  codcarpetaalb smallint(3) unsigned NOT NULL default '0',
  codcarpetafac smallint(3) unsigned NOT NULL default '0',
  codcarpetarecalm smallint(3) unsigned NOT NULL default '0',
  codcarpetareccamp smallint(3) unsigned NOT NULL default '0',
  c1albaridoc tinyint(1) unsigned NOT NULL default '0',
  c2albaridoc tinyint(1) unsigned NOT NULL default '0',
  c3albaridoc tinyint(1) unsigned NOT NULL default '0',
  c4albaridoc tinyint(1) unsigned NOT NULL default '0',
  c1facaridoc tinyint(1) unsigned NOT NULL default '0',
  c2facaridoc tinyint(1) unsigned NOT NULL default '0',
  c3facaridoc tinyint(1) unsigned NOT NULL default '0',
  c4facaridoc tinyint(1) unsigned NOT NULL default '0',
  c1recaridoc tinyint(1) unsigned NOT NULL default '0',
  c2recaridoc tinyint(1) unsigned NOT NULL default '0',
  c3recaridoc tinyint(1) unsigned NOT NULL default '0',
  c4recaridoc tinyint(1) unsigned NOT NULL default '0',
  codextension smallint(3) unsigned NOT NULL default '0',
  nrolote int(4) unsigned NOT NULL default '0' COMMENT 'nro lote grab.f¡ch.chep',
  nrocheps bigint(10) default NULL COMMENT 'nro.chep comunicador',
  nrofiche int(4) default '1112' COMMENT 'nro.fichero chep',
  codigoedi varchar(17) default NULL COMMENT 'cod.edi vendedor',
  regmercantil varchar(70) default NULL COMMENT 'registro mercantil',
  pathedicom varchar(70) default NULL,
  porcdesvia decimal(4,2) NOT NULL default '0.00',
  porteskilocaja tinyint(1) unsigned NOT NULL default '0' COMMENT 'reparto portes por kilos=0 o cajas=1',
  codalmac smallint(3) unsigned default '0',
  regcopsa varchar(12) default NULL,
  regisopa int(4) default NULL,
  pasealbaragrupcalib tinyint(1) NOT NULL default '0' COMMENT 'Pase pedido a albaran desde palets agrupado por calibre',
  nropolizaexp varchar(15) default NULL,
  ctacomreten varchar(10) default NULL,
  codtipomalb varchar(3) NOT NULL default 'ALV',
  ctaventasfraacta varchar(10) default NULL,
  ccostefraacta varchar(4) default NULL,
  text1cmr13 varchar(250) default NULL,
  text2cmr13 varchar(250) default NULL,
  codclien int(6) unsigned default NULL,
  pasereflineaalb tinyint(1) NOT NULL default '0',
  calculocomision tinyint(1) unsigned default '0' COMMENT '0=sobre imp.bruto / 1 = sobre kilos reales',
  hayccostes tinyint(1) unsigned NOT NULL default '0',
  enviodesdeoutlook tinyint(1) unsigned NOT NULL default '0',
  arigesmail varchar(30) default NULL,
  numeroggn bigint(14) unsigned default NULL,
  pathfichadas varchar(250) default NULL,
  pathfacturae varchar(255) default NULL,
  PRIMARY KEY  (codparam),
  KEY FK_sparam (codalmac),
  KEY FK_sparam1 (codclien),
  CONSTRAINT sparam_ibfk_1 FOREIGN KEY (codalmac) REFERENCES salmpr (codalmac) ON UPDATE CASCADE,
  CONSTRAINT sparam_ibfk_2 FOREIGN KEY (codclien) REFERENCES clientes (codclien) ON UPDATE CASCADE
) ENGINE=InnoDB DEFAULT CHARSET=latin1;     

CREATE TABLE sprvar (
  nifprove varchar(9) NOT NULL default '',
  nomprove varchar(40) NOT NULL default '',
  domprove varchar(30) default NULL,
  codpobla varchar(6) default NULL,
  pobprove varchar(30) default NULL,
  proprove varchar(30) default NULL,
  telprov2 varchar(15) default NULL,
  PRIMARY KEY  (nifprove)
) ENGINE=InnoDB DEFAULT CHARSET=latin1 COMMENT='Proveedores Varios';     

CREATE TABLE stipar (
  codtipar char(2) NOT NULL default '',
  nomtipar varchar(25) NOT NULL default '',
  esretornable tinyint(1) NOT NULL default '0' COMMENT '0=No Retornable 1=Retornable',
  PRIMARY KEY  (codtipar)
) ENGINE=InnoDB DEFAULT CHARSET=latin1 COMMENT='Tipos de Articulos';     

CREATE TABLE straba (
  codtraba int(6) NOT NULL,
  nomtraba varchar(40) NOT NULL,
  domtraba varchar(35) default NULL,
  codpobla varchar(6) default NULL,
  pobtraba varchar(30) default NULL,
  protraba varchar(30) default NULL,
  mailtraba varchar(40) default NULL,
  niftraba varchar(15) NOT NULL,
  segsocial varchar(15) default NULL,
  fechaalta datetime default NULL,
  codsecci tinyint(1) NOT NULL,
  codcateg smallint(2) NOT NULL,
  iban varchar(4) default NULL,
  codbanco smallint(5) unsigned default NULL,
  codsucur smallint(5) unsigned default NULL,
  digcontr char(2) default NULL,
  cuentaba varchar(10) default NULL,
  fecantig datetime default NULL,
  teltraba varchar(10) default NULL,
  faxtraba varchar(10) default NULL,
  movtraba varchar(10) default NULL,
  grupocot int(3) NOT NULL,
  contrato tinyint(1) unsigned default NULL,
  tipotraba tinyint(1) unsigned default NULL COMMENT '0=Socio 1=trabajador',
  fechabaja datetime default NULL,
  codmacta varchar(10) default NULL,
  codforpa smallint(3) unsigned NOT NULL,
  observac varchar(250) default NULL,
  codalmac smallint(3) unsigned NOT NULL,
  dtosirpf decimal(4,2) default NULL,
  dtosegso decimal(4,2) default NULL,
  pluscapataz decimal(10,2) default NULL,
  porc_antig decimal(4,2) default NULL,
  dtoreten decimal(4,2) default NULL,
  codasesoria int(4) default NULL,
  idtarjeta int(6) default NULL,
  codhorario int(4) default NULL,
  prhoracoste decimal(6,4) NOT NULL default '0.0000',
  PRIMARY KEY  (codtraba),
  KEY FK_straba (codcateg),
  KEY FK_straba1 (codforpa),
  KEY FK_straba2 (codalmac),
  CONSTRAINT straba_ibfk_1 FOREIGN KEY (codcateg) REFERENCES salarios (codcateg) ON UPDATE CASCADE,
  CONSTRAINT straba_ibfk_2 FOREIGN KEY (codforpa) REFERENCES forpago (codforpa) ON UPDATE CASCADE,
  CONSTRAINT straba_ibfk_3 FOREIGN KEY (codalmac) REFERENCES salmpr (codalmac) ON UPDATE CASCADE
) ENGINE=InnoDB DEFAULT CHARSET=latin1;     

CREATE TABLE sunida (
  codunida smallint(2) unsigned NOT NULL default '0',
  nomunida varchar(10) NOT NULL default '',
  nomunbre char(3) NOT NULL default '',
  PRIMARY KEY  (codunida)
) ENGINE=InnoDB DEFAULT CHARSET=latin1 COMMENT='Tipos de Unidad';     

CREATE TABLE tarifas (
  codtarif smallint(3) NOT NULL,
  tarifatr decimal(5,4) default '0.0000',
  PRIMARY KEY  (codtarif)
) ENGINE=InnoDB DEFAULT CHARSET=latin1 ROW_FORMAT=DYNAMIC COMMENT='Tarifas Transporte';     

CREATE TABLE tcafpa (
  codtrans smallint(3) unsigned NOT NULL default '0',
  numfactu varchar(10) NOT NULL,
  fecfactu date NOT NULL default '0000-00-00',
  numalbar int(6) unsigned NOT NULL,
  fechaalb date NOT NULL default '0000-00-00',
  importel decimal(10,2) NOT NULL,
  observa1 varchar(200) default NULL,
  observa2 varchar(80) default NULL,
  observa3 varchar(80) default NULL,
  observa4 varchar(80) default NULL,
  observa5 varchar(80) default NULL,
  PRIMARY KEY  (codtrans,numfactu,fecfactu,numalbar),
  CONSTRAINT tcafpa_ibfk_1 FOREIGN KEY (codtrans) REFERENCES agencias (codtrans),
  CONSTRAINT tcafpa_ibfk_2 FOREIGN KEY (codtrans, numfactu, fecfactu) REFERENCES tcafpc (codtrans, numfactu, fecfactu) ON UPDATE CASCADE
) ENGINE=InnoDB DEFAULT CHARSET=latin1;     

CREATE TABLE tcafpc (
  codtrans smallint(3) unsigned NOT NULL default '0',
  numfactu varchar(10) NOT NULL,
  fecfactu date NOT NULL default '0000-00-00',
  fecrecep date NOT NULL default '0000-00-00',
  nomtrans varchar(40) NOT NULL,
  domtrans varchar(40) NOT NULL,
  codpobla varchar(6) NOT NULL default '',
  pobtrans varchar(30) NOT NULL,
  protrans varchar(30) NOT NULL,
  niftrans varchar(15) NOT NULL,
  teltrans varchar(15) NOT NULL,
  codforpa smallint(3) unsigned NOT NULL default '0',
  brutofac decimal(12,2) NOT NULL default '0.00',
  dtoppago decimal(4,2) NOT NULL default '0.00',
  dtognral decimal(4,2) NOT NULL default '0.00',
  impppago decimal(12,2) NOT NULL default '0.00',
  impgnral decimal(12,2) NOT NULL default '0.00',
  baseiva1 decimal(12,2) NOT NULL default '0.00',
  baseiva2 decimal(12,2) default NULL,
  baseiva3 decimal(12,2) default NULL,
  tipoiva1 tinyint(1) unsigned default NULL,
  tipoiva2 tinyint(1) unsigned default NULL,
  tipoiva3 tinyint(1) unsigned default NULL,
  porciva1 decimal(4,2) default NULL,
  porciva2 decimal(4,2) default NULL,
  porciva3 decimal(4,2) default NULL,
  porcrec1 decimal(4,2) NOT NULL default '0.00',
  porcrec2 decimal(4,2) NOT NULL default '0.00',
  porcrec3 decimal(4,2) NOT NULL default '0.00',
  impoiva1 decimal(12,2) NOT NULL default '0.00',
  impoiva2 decimal(12,2) default NULL,
  impoiva3 decimal(12,2) default NULL,
  imporec1 decimal(12,2) NOT NULL default '0.00',
  imporec2 decimal(12,2) NOT NULL default '0.00',
  imporec3 decimal(12,2) NOT NULL default '0.00',
  retfacpr decimal(6,2) default NULL,
  trefacpr decimal(12,2) default NULL,
  totalfac decimal(12,2) NOT NULL default '0.00',
  intconta tinyint(1) unsigned NOT NULL default '0',
  tipo tinyint(1) unsigned NOT NULL default '0' COMMENT '0=Transportista 1=Comisionista',
  PRIMARY KEY  (codtrans,numfactu,fecfactu),
  KEY FK_tcafpc (codforpa),
  CONSTRAINT tcafpc_ibfk_1 FOREIGN KEY (codtrans) REFERENCES agencias (codtrans),
  CONSTRAINT tcafpc_ibfk_2 FOREIGN KEY (codforpa) REFERENCES forpago (codforpa)
) ENGINE=InnoDB DEFAULT CHARSET=latin1;     

CREATE TABLE tcafpv (
  codtrans smallint(3) unsigned NOT NULL default '0',
  numfactu varchar(10) NOT NULL,
  fecfactu date NOT NULL default '0000-00-00',
  codmacta varchar(10) NOT NULL,
  importel decimal(10,2) NOT NULL,
  PRIMARY KEY  (codtrans,numfactu,fecfactu,codmacta),
  CONSTRAINT tcafpv_ibfk_1 FOREIGN KEY (codtrans) REFERENCES agencias (codtrans),
  CONSTRAINT tcafpv_ibfk_2 FOREIGN KEY (codtrans, numfactu, fecfactu) REFERENCES tcafpc (codtrans, numfactu, fecfactu) ON UPDATE CASCADE
) ENGINE=InnoDB DEFAULT CHARSET=latin1;     

CREATE TABLE tipomer (
  codtimer smallint(3) unsigned NOT NULL default '0',
  nomtimer varchar(25) NOT NULL default '0',
  tiptimer tinyint(1) unsigned NOT NULL default '0',
  PRIMARY KEY  (codtimer)
) ENGINE=InnoDB DEFAULT CHARSET=latin1 COMMENT='Tipos Mercado';     

CREATE TABLE tiposiva (
  codigiva tinyint(1) unsigned NOT NULL default '0',
  nombriva char(15) NOT NULL default '',
  tipodiva tinyint(1) unsigned NOT NULL default '0',
  porceiva decimal(4,2) NOT NULL default '0.00',
  porcerec decimal(4,2) default NULL,
  cuentare char(10) default NULL,
  cuentarr char(10) default NULL,
  cuentaso char(10) default NULL,
  cuentasr char(10) default NULL,
  cuentasn char(10) default NULL,
  PRIMARY KEY  (codigiva),
  KEY cl_repercutido (cuentare),
  KEY cl_repercutidorec (cuentarr),
  KEY cl_soportado (cuentaso),
  KEY cl_soportadore (cuentasr),
  KEY cl_soportadoNded (cuentasn)
) ENGINE=InnoDB DEFAULT CHARSET=latin1;     

CREATE TABLE tipovarie (
  codtipo smallint(3) unsigned NOT NULL default '0',
  nomtipo varchar(25) NOT NULL default '0',
  PRIMARY KEY  (codtipo)
) ENGINE=InnoDB DEFAULT CHARSET=latin1 COMMENT='Tipos de Variedad';     

CREATE TABLE tlifpc (
  codtrans smallint(3) unsigned NOT NULL default '0',
  numfactu varchar(10) NOT NULL,
  fecfactu date NOT NULL default '0000-00-00',
  numalbar int(6) unsigned NOT NULL,
  numlinea smallint(2) unsigned NOT NULL default '0',
  importel decimal(10,2) NOT NULL default '0.00',
  PRIMARY KEY  (codtrans,numfactu,fecfactu,numalbar,numlinea),
  CONSTRAINT tlifpc_ibfk_1 FOREIGN KEY (codtrans, numfactu, fecfactu, numalbar) REFERENCES tcafpa (codtrans, numfactu, fecfactu, numalbar) ON UPDATE CASCADE
) ENGINE=InnoDB DEFAULT CHARSET=latin1;     

CREATE TABLE tmp346 (
  codusu int(7) NOT NULL,
  codsocio int(6) unsigned NOT NULL,
  codgrupo smallint(3) NOT NULL,
  importe decimal(12,2) default NULL
) ENGINE=InnoDB DEFAULT CHARSET=latin1;     

CREATE TABLE tmpalmazara (
  codusu int(7) unsigned NOT NULL,
  codsocio int(7) default NULL,
  codvarie int(7) default NULL,
  entradas varchar(8) default NULL,
  cantidad int(7) default NULL
) ENGINE=InnoDB DEFAULT CHARSET=latin1;     

CREATE TABLE tmpclasifica (
  codusu int(7) default NULL,
  codcampo int(7) default NULL,
  codsocio int(7) default NULL,
  numnotac int(7) default NULL,
  codvarie int(6) default NULL,
  codclase smallint(3) default NULL,
  cal1 int(7) default NULL,
  cal2 int(7) default NULL,
  cal3 int(7) default NULL,
  cal4 int(7) default NULL,
  cal5 int(7) default NULL,
  cal6 int(7) default NULL,
  cal7 int(7) default NULL,
  cal8 int(7) default NULL,
  cal9 int(7) default NULL,
  cal10 int(7) default NULL,
  cal11 int(7) default NULL,
  cal12 int(7) default NULL,
  cal13 int(7) default NULL,
  cal14 int(7) default NULL,
  cal15 int(7) default NULL,
  cal16 int(7) default NULL,
  cal17 int(7) default NULL,
  cal18 int(7) default NULL,
  cal19 int(7) default NULL,
  cal20 int(7) default NULL,
  kilosnet int(7) default NULL
) ENGINE=InnoDB DEFAULT CHARSET=latin1;     

CREATE TABLE tmpclasifica2 (
  codusu int(7) default NULL,
  codcampo int(7) default NULL,
  codsocio int(7) default NULL,
  numnotac int(7) default NULL,
  codvarie int(6) default NULL,
  codclase smallint(3) default NULL,
  nomcal1 varchar(3) default NULL,
  kilcal1 int(7) default NULL,
  nomcal2 varchar(3) default NULL,
  kilcal2 int(7) default NULL,
  nomcal3 varchar(3) default NULL,
  kilcal3 int(7) default NULL,
  nomcal4 varchar(3) default NULL,
  kilcal4 int(7) default NULL,
  nomcal5 varchar(3) default NULL,
  kilcal5 int(7) default NULL,
  nomcal6 varchar(3) default NULL,
  kilcal6 int(7) default NULL,
  nomcal7 varchar(3) default NULL,
  kilcal7 int(7) default NULL,
  nomcal8 varchar(3) default NULL,
  kilcal8 int(7) default NULL,
  nomcal9 varchar(3) default NULL,
  kilcal9 int(7) default NULL,
  nomcal10 varchar(3) default NULL,
  kilcal10 int(7) default NULL,
  nomcal11 varchar(3) default NULL,
  kilcal11 int(7) default NULL,
  nomcal12 varchar(3) default NULL,
  kilcal12 int(7) default NULL,
  nomcal13 varchar(3) default NULL,
  kilcal13 int(7) default NULL,
  nomcal14 varchar(3) default NULL,
  kilcal14 int(7) default NULL,
  nomcal15 varchar(3) default NULL,
  kilcal15 int(7) default NULL,
  nomcal16 varchar(3) default NULL,
  kilcal16 int(7) default NULL,
  nomcal17 varchar(3) default NULL,
  kilcal17 int(7) default NULL,
  nomcal18 varchar(3) default NULL,
  kilcal18 int(7) default NULL,
  nomcal19 varchar(3) default NULL,
  kilcal19 int(7) default NULL,
  nomcal20 varchar(3) default NULL,
  kilcal20 int(7) default NULL,
  kilosnet int(7) default NULL
) ENGINE=InnoDB DEFAULT CHARSET=latin1;     

CREATE TABLE tmpcmr (
  numlinea smallint(1) NOT NULL,
  codusu int(7) NOT NULL,
  numalbar int(6) NOT NULL
) ENGINE=InnoDB DEFAULT CHARSET=latin1;     

CREATE TABLE tmpcopiascmr (
  numlinea smallint(1) NOT NULL,
  texto varchar(100) NOT NULL
) ENGINE=InnoDB DEFAULT CHARSET=latin1;     

CREATE TABLE tmpenvasesret (
  codusu int(7) NOT NULL,
  codartic varchar(16) default NULL,
  fechamov date default NULL,
  cantidad decimal(12,2) default NULL,
  tipomovi tinyint(1) default NULL,
  numalbar varchar(10) default NULL,
  clipro int(6) default NULL,
  nomclipro varchar(40) default NULL,
  tipo varchar(3) default NULL
) ENGINE=InnoDB DEFAULT CHARSET=latin1;     

CREATE TABLE tmpexcel (
  codusu int(7) NOT NULL,
  numalbar int(7) unsigned NOT NULL,
  fecalbar date NOT NULL,
  codvarie int(6) unsigned NOT NULL,
  codsocio int(6) unsigned NOT NULL,
  codcampo int(8) unsigned NOT NULL,
  tipoentr tinyint(1) default NULL,
  kilosnet int(6) default NULL,
  calidad1 int(6) default NULL,
  calidad2 int(6) default NULL,
  calidad3 int(6) default NULL,
  calidad4 int(6) default NULL,
  calidad5 int(6) default NULL,
  calidad6 int(6) default NULL,
  calidad7 int(6) default NULL,
  calidad8 int(6) default NULL,
  calidad9 int(6) default NULL,
  calidad10 int(6) default NULL,
  calidad11 int(6) default NULL,
  calidad12 int(6) default NULL,
  calidad13 int(6) default NULL,
  calidad14 int(6) default NULL,
  calidad15 int(6) default NULL,
  calidad16 int(6) default NULL,
  calidad17 int(6) default NULL,
  calidad18 int(6) default NULL,
  calidad19 int(6) default NULL,
  calidad20 int(6) default NULL,
  situacion tinyint(1) default NULL COMMENT '0=correcta 1=no existe entrada 11=no existe calidad 12=no cuadran kilos 2=ya existe entrada en temporal'
) ENGINE=InnoDB DEFAULT CHARSET=latin1;     

CREATE TABLE tmpfactura (
  codusu int(7) NOT NULL,
  codsocio int(7) NOT NULL,
  baseimpo decimal(8,2) NOT NULL,
  imporiva decimal(8,2) NOT NULL,
  impreten decimal(8,2) default NULL,
  impapor decimal(8,2) default NULL,
  impgastos decimal(8,2) default NULL,
  totalfac decimal(8,2) NOT NULL,
  impfrasvar decimal(8,2) default NULL
) ENGINE=InnoDB DEFAULT CHARSET=latin1;     

CREATE TABLE tmpinfcostes (
  codusu int(7) NOT NULL,
  codcoste smallint(6) default NULL,
  denominacion varchar(40) default NULL,
  importe decimal(12,4) default NULL
) ENGINE=InnoDB DEFAULT CHARSET=latin1;     

CREATE TABLE tmpinfkilos (
  codusu int(7) default NULL,
  codprodu smallint(3) default NULL,
  codsocio int(6) default NULL,
  codcampo int(8) default NULL,
  kilosnet int(7) default NULL,
  porcen decimal(12,2) default NULL,
  canaforo int(7) default NULL,
  hanegada decimal(12,2) default NULL,
  hectarea decimal(12,4) default NULL,
  rdtohane decimal(12,2) default NULL,
  rdtohecta decimal(12,2) default NULL,
  nroarbol int(7) default NULL
) ENGINE=InnoDB DEFAULT CHARSET=latin1;     

CREATE TABLE tmpinformes (
  codusu int(7) unsigned NOT NULL default '0',
  codigo1 int(6) unsigned NOT NULL default '0',
  campo1 smallint(4) unsigned default NULL,
  campo2 smallint(4) unsigned default NULL,
  nombre1 varchar(40) default NULL,
  nombre2 varchar(40) default NULL,
  nombre3 varchar(40) default NULL,
  importe1 decimal(12,2) default NULL,
  importe2 decimal(12,2) default NULL,
  importe3 decimal(12,2) default NULL,
  importe4 decimal(12,2) default NULL,
  importe5 decimal(12,2) default NULL,
  importe6 decimal(12,2) default NULL,
  porcen1 decimal(5,2) default NULL,
  porcen2 decimal(5,2) default NULL,
  importeb1 decimal(12,2) default NULL,
  importeb2 decimal(12,2) default NULL,
  importeb3 decimal(12,2) default NULL,
  importeb4 decimal(12,2) default NULL,
  importeb5 decimal(12,2) default NULL,
  importeb6 decimal(12,2) default NULL,
  fecha1 date default NULL,
  fecha2 date default NULL,
  precio1 decimal(10,4) default NULL,
  precio2 decimal(10,4) default NULL
) ENGINE=MyISAM DEFAULT CHARSET=latin1 COMMENT='Temporal para informes';     

CREATE TABLE tmpinformes2 (
  codusu int(7) unsigned NOT NULL default '0',
  codigo1 int(6) unsigned NOT NULL default '0',
  campo1 smallint(4) unsigned default NULL,
  campo2 smallint(4) unsigned default NULL,
  nombre1 varchar(40) default NULL,
  nombre2 varchar(40) default NULL,
  importe1 decimal(12,2) default NULL,
  importe2 decimal(12,2) default NULL,
  importe3 decimal(12,2) default NULL,
  importe4 decimal(12,2) default NULL,
  importe5 decimal(12,2) default NULL,
  porcen1 decimal(5,2) default NULL,
  porcen2 decimal(5,2) default NULL,
  importeb1 decimal(12,2) default NULL,
  importeb2 decimal(12,2) default NULL,
  importeb3 decimal(12,2) default NULL,
  importeb4 decimal(12,2) default NULL,
  importeb5 decimal(12,2) default NULL,
  fecha1 date default NULL,
  fecha2 date default NULL,
  fecha3 date default NULL,
  precio1 decimal(10,4) default NULL,
  precio2 decimal(10,4) default NULL,
  KEY codusu (codusu,importe2,importe3,fecha1)
) ENGINE=MyISAM DEFAULT CHARSET=latin1 COMMENT='Temporal para informes';     

CREATE TABLE tmpinfventas (
  codusu int(7) NOT NULL,
  fecalbar date NOT NULL,
  numalbar int(6) unsigned NOT NULL,
  numlinea smallint(2) unsigned NOT NULL,
  numcajas int(4) default NULL,
  pesoreal decimal(12,2) default NULL,
  pesoneto int(6) default NULL,
  gastos decimal(12,2) default NULL,
  impventa decimal(12,2) default NULL,
  facturado tinyint(1) default NULL COMMENT '0 = No / 1 = Si',
  cobrado tinyint(1) default NULL COMMENT '0 = No / 1 = Si',
  codigo1 smallint(6) default NULL,
  gastos1 decimal(12,2) default NULL,
  codigo2 smallint(6) default NULL,
  gastos2 decimal(12,2) default NULL,
  codigo3 smallint(6) default NULL,
  gastos3 decimal(12,2) default NULL,
  codigo4 smallint(6) default NULL,
  gastos4 decimal(12,2) default NULL,
  codigo5 smallint(6) default NULL,
  gastos5 decimal(12,2) default NULL,
  gastosportes decimal(12,2) default NULL,
  gastosenvases decimal(12,2) default NULL,
  neto1 int(9) default NULL,
  neto2 int(9) default NULL,
  neto3 int(9) default NULL,
  neto4 int(9) default NULL,
  neto5 int(9) default NULL,
  gastoscomisiones decimal(12,2) default NULL,
  precioprovisional decimal(12,2) default NULL
) ENGINE=InnoDB DEFAULT CHARSET=latin1;     

CREATE TABLE tmplineas (
  numalbar int(6) default NULL,
  numlinea smallint(2) default NULL,
  importel decimal(10,2) default NULL
) ENGINE=InnoDB DEFAULT CHARSET=latin1;     

CREATE TABLE tmpliquidacion (
  codusu int(7) unsigned NOT NULL,
  codvarie int(6) unsigned NOT NULL,
  codsocio int(6) unsigned NOT NULL,
  codcampo int(8) unsigned NOT NULL,
  recolect tinyint(1) default NULL,
  tipoentr tinyint(1) default NULL,
  codcalid smallint(2) unsigned NOT NULL,
  contador smallint(3) unsigned NOT NULL,
  kilosnet int(6) default NULL,
  precio decimal(6,4) default NULL,
  importe decimal(10,2) default NULL,
  nomvarie varchar(15) default NULL,
  fechaini date NOT NULL,
  fechafin date NOT NULL,
  gastos decimal(10,2) default NULL
) ENGINE=InnoDB DEFAULT CHARSET=latin1;     

CREATE TABLE tmpliquidacion1 (
  codusu int(7) unsigned NOT NULL,
  codsocio int(6) unsigned NOT NULL,
  codvarie int(6) unsigned NOT NULL,
  codcampo int(8) unsigned NOT NULL,
  fechaini date NOT NULL,
  fechafin date NOT NULL,
  gastos decimal(31,2) default NULL
) ENGINE=InnoDB DEFAULT CHARSET=latin1;     

CREATE TABLE tmppesada (
  codusu int(7) default NULL,
  operacion varchar(1) default NULL,
  nropesada int(7) default NULL,
  numnotac int(7) default NULL,
  contador int(7) default NULL
) ENGINE=InnoDB DEFAULT CHARSET=latin1;     

CREATE TABLE tmpportesv (
  codusu int(7) unsigned NOT NULL,
  codtrans smallint(3) NOT NULL,
  numfactu varchar(10) NOT NULL,
  fecfactu date NOT NULL,
  codmacta varchar(10) NOT NULL,
  importel decimal(12,2) NOT NULL
) ENGINE=InnoDB DEFAULT CHARSET=latin1;     

CREATE TABLE tmppreciosaux (
  codusu int(7) NOT NULL,
  codvarie int(6) unsigned NOT NULL,
  tipofact tinyint(1) unsigned NOT NULL COMMENT '0=Anticipo 1=Liquidacion',
  codcalid smallint(2) unsigned NOT NULL,
  kilosnet int(7) NOT NULL,
  porcentaje decimal(5,2) NOT NULL,
  precio decimal(6,4) NOT NULL
) ENGINE=InnoDB DEFAULT CHARSET=latin1;     

CREATE TABLE tmprfactsoc (
  codusu int(7) NOT NULL,
  codtipom char(3) NOT NULL,
  numfactu int(7) unsigned NOT NULL,
  fecfactu date NOT NULL,
  codsocio varchar(10) NOT NULL,
  baseimpo decimal(8,2) NOT NULL,
  tipoiva smallint(2) NOT NULL,
  porc_iva decimal(4,2) NOT NULL,
  imporiva decimal(8,2) NOT NULL,
  tipoirpf tinyint(1) NOT NULL COMMENT 'Como rsocios',
  basereten decimal(8,2) default NULL,
  porc_ret decimal(4,2) default NULL,
  impreten decimal(8,2) default NULL,
  baseaport decimal(8,2) default NULL,
  porc_apo decimal(4,2) default NULL,
  impapor decimal(8,2) default NULL,
  totalfac decimal(8,2) NOT NULL,
  tipo tinyint(1) NOT NULL default '0' COMMENT '0=factura socio 1=factura transporte',
  nif varchar(9) default NULL,
  nomsocio varchar(40) default NULL,
  esretirada tinyint(1) NOT NULL default '0',
  codpostal varchar(6) default NULL,
  KEY codusu (codusu,codsocio),
  KEY codusu1 (codusu,codtipom,numfactu,fecfactu,codsocio)
) ENGINE=InnoDB DEFAULT CHARSET=latin1;     

CREATE TABLE tmprfactsoc_variedad (
  codusu int(7) NOT NULL,
  codtipom char(3) NOT NULL,
  numfactu int(7) unsigned NOT NULL,
  fecfactu date NOT NULL,
  codsocio varchar(10) NOT NULL,
  codvarie int(6) NOT NULL,
  codcampo int(8) unsigned NOT NULL,
  kilosnet int(6) NOT NULL,
  preciomed decimal(6,4) NOT NULL,
  imporvar decimal(8,2) NOT NULL,
  descontado tinyint(1) NOT NULL default '0',
  KEY codusu (codusu,codtipom,numfactu,fecfactu,codsocio),
  KEY codusu1 (codusu,codtipom,numfactu,fecfactu,codsocio,codvarie,codcampo)
) ENGINE=InnoDB DEFAULT CHARSET=latin1;     

CREATE TABLE tmpscapla (
  codusu int(7) unsigned NOT NULL default '0',
  codplant smallint(3) unsigned NOT NULL default '0',
  cantidad decimal(12,2) default NULL,
  PRIMARY KEY  (codusu,codplant)
) ENGINE=MyISAM DEFAULT CHARSET=latin1 COMMENT='Temporal Cabecera Plantillas';     

CREATE TABLE tmpstockfec (
  codusu int(7) unsigned NOT NULL default '0',
  codartic varchar(16) NOT NULL default '',
  codalmac int(6) unsigned NOT NULL default '0',
  stock decimal(12,2) NOT NULL default '0.00',
  PRIMARY KEY  (codusu,codartic,codalmac)
) ENGINE=MyISAM DEFAULT CHARSET=latin1 COMMENT='Temporal Stocks a una Fecha';     

CREATE TABLE tmpsuperficies (
  codusu int(7) unsigned default NULL,
  codvarie int(6) default NULL,
  superficie1 decimal(12,4) default NULL,
  superficie2 decimal(12,4) default NULL,
  superficie3 decimal(12,4) default NULL,
  superficie4 decimal(12,4) default NULL
) ENGINE=InnoDB DEFAULT CHARSET=latin1;     

CREATE TABLE trzareas (
  codarea int(7) unsigned NOT NULL,
  nomarea char(50) default NULL,
  PRIMARY KEY  (codarea)
) ENGINE=InnoDB DEFAULT CHARSET=latin1;     

CREATE TABLE trzdispositivos (
  id int(11) NOT NULL default '0',
  tipo int(11) default NULL,
  ip varchar(20) default NULL,
  numero int(11) NOT NULL default '0',
  PRIMARY KEY  (id),
  UNIQUE KEY idx_ip (ip)
) ENGINE=InnoDB DEFAULT CHARSET=latin1;     

CREATE TABLE trzentradas (
  codentrada int(11) NOT NULL default '0',
  numero int(11) default NULL,
  codigo varchar(20) default NULL,
  idDispositivo int(11) NOT NULL default '0',
  nombre varchar(16) default NULL,
  PRIMARY KEY  (codentrada),
  KEY idDispositivo (idDispositivo),
  CONSTRAINT trzentradas_ibfk_1 FOREIGN KEY (idDispositivo) REFERENCES trzdispositivos (id)
) ENGINE=InnoDB DEFAULT CHARSET=latin1;     

CREATE TABLE trzlineas_cargas (
  linea int(11) unsigned NOT NULL default '0',
  idpalet int(11) unsigned NOT NULL default '0',
  fechahora datetime NOT NULL default '0000-00-00 00:00:00',
  fecha date NOT NULL default '0000-00-00',
  tipo int(11) NOT NULL default '0' COMMENT 'Tipo del palet volcado',
  crfid varchar(20) default NULL,
  PRIMARY KEY  (linea,idpalet,tipo),
  KEY idpalet (idpalet)
) ENGINE=InnoDB DEFAULT CHARSET=latin1;     

CREATE TABLE trzlineas_confeccion (
  codlinconfe int(11) NOT NULL default '0',
  nombre varchar(20) default NULL,
  PRIMARY KEY  (codlinconfe)
) ENGINE=InnoDB DEFAULT CHARSET=latin1;     

CREATE TABLE trzlineas_confeccion_entradas (
  codlinconfe int(11) NOT NULL default '0',
  codentrada int(11) NOT NULL default '0',
  PRIMARY KEY  (codlinconfe,codentrada),
  KEY idLinea_Confeccion (codlinconfe),
  KEY idEntrada (codentrada),
  CONSTRAINT trzlineas_confeccion_entradas_ibfk_3 FOREIGN KEY (codlinconfe) REFERENCES trzlineas_confeccion (codlinconfe) ON UPDATE CASCADE,
  CONSTRAINT trzlineas_confeccion_entradas_ibfk_4 FOREIGN KEY (codentrada) REFERENCES trzentradas (codentrada) ON UPDATE CASCADE
) ENGINE=InnoDB DEFAULT CHARSET=latin1;     

CREATE TABLE trzlineas_rfid (
  linea int(11) unsigned NOT NULL default '0',
  ip varchar(20) NOT NULL default '0',
  PRIMARY KEY  (linea,ip),
  KEY ip (ip)
) ENGINE=InnoDB DEFAULT CHARSET=latin1;     

CREATE TABLE trzpalet_palets (
  IdPalet int(11) unsigned NOT NULL COMMENT 'Código del palet reconstruido',
  IdPalet2 int(11) unsigned NOT NULL COMMENT 'Código del palet componente',
  PRIMARY KEY  (IdPalet,IdPalet2),
  KEY CK_Componentes (IdPalet2),
  CONSTRAINT trzpalet_palets_ibfk_1 FOREIGN KEY (IdPalet) REFERENCES trzpalets (idpalet) ON UPDATE CASCADE,
  CONSTRAINT trzpalet_palets_ibfk_2 FOREIGN KEY (IdPalet2) REFERENCES trzpalets (idpalet) ON UPDATE CASCADE
) ENGINE=InnoDB DEFAULT CHARSET=latin1 COMMENT='Enlaza los palets reconstruidos con los originales';     

CREATE TABLE trzpalets (
  idpalet int(11) unsigned NOT NULL default '0',
  tipo int(11) unsigned NOT NULL default '0',
  idlote int(11) default '0',
  numcajones int(11) default '0',
  numkilos float default '0',
  idcalle int(11) default '0',
  idarea int(11) default '0',
  codsocio int(11) default '0',
  codcampo int(11) default '0',
  codvarie int(11) default NULL,
  fecha date default NULL,
  hora datetime default NULL,
  completo tinyint(1) default '1',
  numnotac int(7) NOT NULL,
  CRFID varchar(20) default NULL,
  PRIMARY KEY  (idpalet,tipo),
  KEY codvarie (codvarie)
) ENGINE=InnoDB DEFAULT CHARSET=latin1;     

CREATE TABLE trzsucesos (
  id int(11) default NULL,
  tipo tinyint(3) NOT NULL default '0',
  fechahora datetime NOT NULL default '0000-00-00 00:00:00',
  mensaje text
) ENGINE=InnoDB DEFAULT CHARSET=latin1;     

CREATE TABLE trztipos (
  codtipo smallint(3) unsigned NOT NULL,
  nomtipo varchar(30) default NULL,
  PRIMARY KEY  (codtipo)
) ENGINE=InnoDB DEFAULT CHARSET=latin1;     

CREATE TABLE trztmp_palets_lineas_cargas (
  codusu int(7) default NULL,
  numpalet int(6) default NULL,
  linea int(11) default NULL,
  palet int(11) default NULL,
  codtipo smallint(3) default NULL,
  fechahora datetime default NULL,
  fecha date default NULL,
  numnotac int(7) default NULL
) ENGINE=InnoDB DEFAULT CHARSET=latin1;     

CREATE TABLE trztransitos (
  IdAreaS int(11) NOT NULL default '0',
  IdAreaE int(11) NOT NULL default '0',
  IdPalet int(11) NOT NULL default '0',
  Tipo tinyint(11) unsigned NOT NULL default '0',
  Fecha date NOT NULL default '0000-00-00',
  Hora datetime NOT NULL default '0000-00-00 00:00:00',
  Abocador int(11) unsigned default '0',
  Lote int(11) unsigned default '0',
  PRIMARY KEY  (IdAreaS,IdAreaE,IdPalet,Fecha,Hora,Tipo)
) ENGINE=InnoDB DEFAULT CHARSET=latin1;     

CREATE TABLE variane (
  codvarie int(6) unsigned NOT NULL default '0',
  numlinea smallint(3) NOT NULL default '0',
  codvaane varchar(4) default '0',
  PRIMARY KEY  (codvarie,numlinea),
  KEY codvarie (codvarie),
  CONSTRAINT variane_ibfk_1 FOREIGN KEY (codvarie) REFERENCES variedades (codvarie)
) ENGINE=InnoDB DEFAULT CHARSET=latin1 COMMENT='Variedades Anecoop';     

CREATE TABLE variedades (
  codvarie int(6) unsigned NOT NULL default '0',
  nomvarie varchar(20) NOT NULL default '0',
  codprodu smallint(3) unsigned NOT NULL default '0',
  codclase smallint(3) unsigned NOT NULL default '0',
  codconse int(6) NOT NULL default '0' COMMENT 'Cod. Conselleria',
  kgscajon decimal(5,2) default '0.00' COMMENT 'Kilos/cajon',
  minkgcaj decimal(5,2) default '0.00' COMMENT 'Min. Kgs/cajon',
  maxkgcaj decimal(5,2) default '0.00' COMMENT 'Max. Kgs/cajon',
  facorrde decimal(5,2) default '0.00' COMMENT 'Factor corrector destrio',
  facorrme decimal(5,2) default '0.00' COMMENT 'Factor corrector mermas',
  arrobjor decimal(5,2) default '0.00' COMMENT '@/jornal',
  porcindu decimal(5,2) default '0.00' COMMENT '% para industria',
  porcmerm decimal(5,2) default '0.00' COMMENT '% mermas',
  porcdest decimal(5,2) default '0.00' COMMENT '% destrio',
  eurdesta decimal(5,4) default '0.0000' COMMENT 'euros/kg destajo',
  eurecole decimal(5,4) default '0.0000' COMMENT 'euros/kg recoleccion',
  eurmanob decimal(5,4) default '0.0000' COMMENT 'euros/kg mano de obra',
  eursegsoc decimal(5,4) default '0.0000' COMMENT 'euros/kg seg.social',
  eurotria decimal(5,4) default '0.0000' COMMENT 'euros/kg tria',
  eurhaneg decimal(5,4) default '0.0000' COMMENT 'euros/kg hanegada',
  codunida smallint(2) unsigned default NULL,
  ctavtasinterior varchar(10) default NULL COMMENT 'raiz cta contable vtas',
  ctavtasexportacion varchar(10) default NULL,
  ctavtasindustria varchar(10) default NULL,
  ctavtasretirada varchar(10) default NULL,
  ctavtasotros varchar(10) default NULL,
  codigiva tinyint(1) unsigned NOT NULL default '0',
  codccost char(4) default NULL,
  ctatrainterior varchar(10) default NULL,
  ctatraexporta varchar(10) default NULL,
  tipoclasifica tinyint(1) unsigned NOT NULL default '0' COMMENT '0=campo 1=almacen',
  rdtomaximo int(7) default NULL COMMENT 'Rdto maximo recoleccion',
  ctaanticipo varchar(10) default NULL,
  ctaliquidacion varchar(10) default NULL,
  ctacomtercero varchar(10) default NULL,
  ctacomisionista varchar(10) default NULL,
  ctasiniestros varchar(10) default NULL,
  ctatransporte varchar(10) default NULL,
  ctaacarecol varchar(10) default NULL COMMENT 'Cta gastos acarreo/tranporte socio',
  tipovariedad tinyint(4) NOT NULL default '0' COMMENT 'Tipo Mercancia 0=coop 1=ajena',
  tipovarie2 tinyint(1) NOT NULL default '0' COMMENT '0=convencional 1=biologica',
  PRIMARY KEY  (codvarie),
  KEY FK_variedades (codclase),
  KEY FK_variedades1 (codprodu),
  KEY FK_variedades2 (codunida),
  CONSTRAINT variedades_ibfk_1 FOREIGN KEY (codclase) REFERENCES clases (codclase),
  CONSTRAINT variedades_ibfk_2 FOREIGN KEY (codprodu) REFERENCES productos (codprodu),
  CONSTRAINT variedades_ibfk_3 FOREIGN KEY (codunida) REFERENCES sunida (codunida)
) ENGINE=InnoDB DEFAULT CHARSET=latin1 COMMENT='Variedades';     

CREATE TABLE vtafrutacab (
  codtipom char(3) NOT NULL,
  numalbar int(7) unsigned NOT NULL,
  fecalbar date NOT NULL,
  codclien int(6) unsigned default NULL,
  codsocio int(6) unsigned default NULL,
  matriveh varchar(12) default NULL,
  observac varchar(200) default NULL,
  numcajon int(7) default NULL,
  numpalet int(7) default NULL,
  numpalot int(7) default NULL,
  taracajon int(7) default NULL,
  tarapalet int(7) default NULL,
  tarapalot int(7) default NULL,
  pesopalot decimal(5,2) default NULL,
  taravehi int(7) default NULL,
  bultos01 int(7) default NULL,
  bultos02 int(7) default NULL,
  bultos03 int(7) default NULL,
  textos01 varchar(40) default NULL,
  textos02 varchar(40) default NULL,
  textos03 varchar(40) default NULL,
  pesobruto int(7) default NULL,
  pesoneto int(7) default NULL,
  tipoalbaran smallint(1) unsigned NOT NULL default '0' COMMENT '0=Vta Fruta 1=Precalibrado',
  PRIMARY KEY  (codtipom,numalbar,fecalbar),
  KEY FK_vtafrutacab (codclien),
  KEY FK_vtafrutacab1 (codsocio),
  CONSTRAINT vtafrutacab_ibfk_1 FOREIGN KEY (codclien) REFERENCES clientes (codclien) ON UPDATE CASCADE,
  CONSTRAINT vtafrutacab_ibfk_2 FOREIGN KEY (codsocio) REFERENCES rsocios (codsocio) ON UPDATE CASCADE
) ENGINE=InnoDB DEFAULT CHARSET=latin1;     

CREATE TABLE vtafrutalin (
  codtipom char(3) NOT NULL,
  numalbar int(7) unsigned NOT NULL,
  fecalbar date NOT NULL,
  numlinea int(7) unsigned NOT NULL,
  codvarie int(6) unsigned NOT NULL,
  descalibre varchar(10) default NULL,
  pesoneto int(7) NOT NULL,
  pesobruto int(7) NOT NULL,
  numcajon int(7) NOT NULL,
  numpalet int(7) NOT NULL,
  pesonetoreal int(7) NOT NULL,
  PRIMARY KEY  (codtipom,numalbar,fecalbar,numlinea),
  KEY FK_vtafrutalin (codvarie),
  CONSTRAINT vtafrutalin_ibfk_1 FOREIGN KEY (codtipom, numalbar, fecalbar) REFERENCES vtafrutacab (codtipom, numalbar, fecalbar) ON UPDATE CASCADE,
  CONSTRAINT vtafrutalin_ibfk_2 FOREIGN KEY (codvarie) REFERENCES variedades (codvarie) ON UPDATE CASCADE
) ENGINE=InnoDB DEFAULT CHARSET=latin1;     

CREATE TABLE zbloqueos (
  codusu int(7) unsigned NOT NULL default '0',
  tabla char(20) NOT NULL default '',
  clave char(30) NOT NULL default '',
  PRIMARY KEY  (tabla,clave)
) ENGINE=MyISAM DEFAULT CHARSET=latin1;     

